/** Copyright 2012-2020 The MathWorks, Inc. *///>>built//>>built

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(k){var d=0;return function(){return d<k.length?{done:!1,value:k[d++]}:{done:!0}}};$jscomp.arrayIterator=function(k){return{next:$jscomp.arrayIteratorImpl(k)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,d,g){k!=Array.prototype&&k!=Object.prototype&&(k[d]=g.value)};$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(k,d){this.$jscomp$symbol$id_=k;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function k(g){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+d++,g)}var d=0;return k}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.asyncIterator;k||(k=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};
require({cache:{"browse_for_folder_button/index":function(){define(["dojo/_base/declare","dojo/Deferred","./_impl/BrowseForFolderAction"],function(k,d,g){return{initialize:function(a){a=new d;var b=k([g]);a.resolve({exports:{browseForFolderAction:b}});return a.promise}}})},"browse_for_folder_button/_impl/BrowseForFolderAction":function(){define("dojo/_base/declare dojo/on dojo/_base/lang dijit/_TemplatedMixin mw-navigationbar/toolbaractions/Action mw-filename-utils/FileNameUtil filechooser-ui/FileChooser2".split(" "),
function(k,d,g,a,b,l,f){return k([b],{constructor:function(a){this.pathService=a.pathService;this.layoutService=a.layoutService;this.addressbarL10n=a.addressbarL10n;this.id="browseForFolderNode";this.text=this.addressbarL10n.BrowseForFolder;this.enabled=!0;this.actionClass="browseForFolderButton addressBarButton";this.style={"background-image":"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlZJREFUeNqkU19IU1EY/93tYqtteWcunWtyW4F/2mYPJWNCGiRWlFpGEEhBDyKGEZEPChW9SG/60KKHSKGHQbHqpQdJkZGDRabioqzWnC2iIm217W53/07n3pEQ+LDRBx/fOd/h9/t+33fOYQgh+B9jGYb5J/Hgam1RjOxGgLY+V0HgidtnwNIYOnp5kldzRjn58Fod3kzfgq5id2EKMlnc8E85x+xdw3JiX+cwfO4hLL/2bgiwNJ1dX1Ms5AGMXaldPjU0yWt0koocQOgJSYFApNsEdYHu45hxO1Gi2I4SlUYmWPDeh1JaHGnU/xKFaOdO60H8iH6Ba9YJ//fneLe6gI9rnzD+8i4O7XLQtvSYm57AVs6EHK0TDi3KM0Dv6Nvx0T5cj+yo5pficzjZ2IFEbgWRWByZFItklNYhaWg5LUoNpRBiMWxSqSGmkVcgWWWzkQmz0cM9bd1YWn2Mp745eF4FoVZuBq+rgM1oAiEJlFdyeDE1g21lJgSD/rwCyZYYpuFivQOhiA/PfCE4qo/hZkcr7T9Jq9MZ5GI0ilS+CpyhBIIQlxUo/hKIYo63mvdgeTUADvU4bZfAdIi0quSESERJOTa1NuD9h0WZgLVdsM5XlRv2qlRKZHMEX9d+Yz4cgH3Qg679BzDQfpyChDwRvRGSTUKj2QKtXgFxhQFj6bPwVWWG+YHuXu5behZCJohkPA23KwDb52xh77mmp6alZbCZeAKPyB1vP7H11/2kOb4Q7PpPMp83X+LU3EgilaC9iSeC94JPiv6apnOmMeojxWD+CDAAzA3wVXfzkqsAAAAASUVORK5CYII\x3d')",
width:"100%",height:"100%","background-origin":"content-box","background-repeat":"no-repeat"};this.callback=function(a){g.hitch(this,this._handleBrowseForFolderAction(a))};d(this.pathService,"CWDChanged",function(){this.currentWorkingFolder=this.pathService.getCurrentFolder()}.bind(this));this._fileService=a.fileService},_handleBrowseForFolderAction:function(a){this.currentWorkingFolder.path=this.pathService.getCurrentFolderPath();this._fileChooser=k([f])({fileService:this._fileService,pathService:this.pathService,
style:{width:"425px",height:"425px"},fileMustExist:!0,selectionMode:1});this._fileChooser.on("okButtonClicked",g.hitch(this,function(a){this._changePath(a.selectedNode[0].path);this._close()}));this._fileChooser.on("cancelButtonClicked",g.hitch(this,function(a){this._close()}));this._fileChooser.onClose=g.hitch(this,function(){this._close()});this._fileChooser.startup();this.layoutService.addWidget("fileChooser","newDialog",this._fileChooser,{title:this.addressbarL10n.folderChooserTitle})},_changePath:function(a){this.pathService.setMATLABCWD(a)},
_close:function(){d.emit(this._fileChooser.domNode,"restorefocus",{bubbles:!0});this.inherited(arguments);this.layoutService.removeWidget("fileChooser")}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(k,d,g,a,b,l,f,h){var c=d("dijit._TemplatedMixin",h,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(c){var e=this.declaredClass,
b=this;return f.substitute(c,this,function(c,d){"!"==d.charAt(0)&&(c=a.getObject(d.substr(1),!1,b));if("undefined"==typeof c)throw Error(e+" template:"+d);return null==c?"":"!"==d.charAt(0)?c:this._escapeValue(""+c)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=k(this.templatePath,{sanitize:!0}));
var e=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(a.isString(e)){var b=g.toDom(this._stringRepl(e),this.ownerDocument);if(1!=b.nodeType)throw Error("Invalid template: "+e);}else b=e.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var c=this.containerNode;if(a&&c)for(;a.hasChildNodes();)c.appendChild(a.firstChild)}});c._templateCache={};c.getCachedTemplate=function(a,
b,d){var e=c._templateCache,m=a,h=e[m];if(h){try{if(!h.ownerDocument||h.ownerDocument==(d||document))return h}catch(r){}g.destroy(h)}a=f.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return e[m]=a;b=g.toDom(a,d);if(1!=b.nodeType)throw Error("Invalid template: "+a);return e[m]=b};l("ie")&&b(window,"unload",function(){var a=c._templateCache,b;for(b in a){var d=a[b];"object"==typeof d&&g.destroy(d);delete a[b]}});return c})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(k){return k.cache})},
"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(k,d,g,a){var b=function(c,b,d){a(c,{sync:!!b,headers:{"X-Requested-With":null}}).then(d)};var l={},f=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var c=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(a=c[1])}else a="";return a},h={},c={};k.cache=function(a,c,h){if("string"==typeof a)if(/\//.test(a)){var e=a;h=c}else e=d.toUrl(a.replace(/\./g,"/")+(c?"/"+c:""));else e=
a+"",h=c;a=void 0!=h&&"string"!=typeof h?h.value:h;h=h&&h.sanitize;if("string"==typeof a)return l[e]=a,h?f(a):a;if(null===a)return delete l[e],null;e in l||b(e,!0,function(a){l[e]=a});return h?f(l[e]):l[e]};return{dynamic:!0,normalize:function(a,c){a=a.split("!");var e=a[0];return(/^\./.test(e)?c(e):e)+(a[1]?"!"+a[1]:"")},load:function(a,d,n){a=a.split("!");var e=1<a.length,m=a[0],g=d.toUrl(a[0]);a="url:"+g;var r=h,k=function(a){n(e?f(a):a)};m in l?r=l[m]:d.cache&&a in d.cache?r=d.cache[a]:g in l&&
(r=l[g]);if(r===h)if(c[g])c[g].push(k);else{var y=c[g]=[k];b(g,!d.async,function(a){l[m]=l[g]=a;for(var b=0;b<y.length;)y[b++](a);delete c[g]})}else k(r)}}})},"dojo/request":function(){define(["./request/default!"],function(k){return k})},"dojo/request/default":function(){define(["exports","require","../has"],function(k,d,g){var a=g("config-requestProvider");a||(a="./xhr");k.getPlatformDefaultId=function(){return"./xhr"};k.load=function(b,l,f,h){d(["platform"==b?"./xhr":a],function(a){f(a)})}})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(k,d){var g=/[&<>'"\/]/g,a={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},b={};d.setObject("dojo.string",b);b.escape=function(b){return b?b.replace(g,function(b){return a[b]}):""};b.rep=function(a,b){if(0>=b||!a)return"";for(var d=[];;){b&1&&d.push(a);if(!(b>>=1))break;a+=a}return d.join("")};b.pad=function(a,d,h,c){h||(h="0");a=String(a);d=b.rep(h,Math.ceil((d-a.length)/
h.length));return c?a+d:d+a};b.substitute=function(a,b,h,c){c=c||k.global;h=h?d.hitch(c,h):function(a){return a};return a.replace(/\$\{([^\s:\}]*)(?::([^\s:\}]+))?\}/g,function(a,m,f){if(""==m)return"$";a=d.getObject(m,!1,b);f&&(a=d.getObject(f,!1,c).call(c,a,m));return h(a,m).toString()})};b.trim=String.prototype.trim?d.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return b})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(k,d,g,a,b,l,f,h,c){var e=b.delegate(h,{mouseenter:l.enter,mouseleave:l.leave,keypress:g._keypress}),m;g=a("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var c=a;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(a,c){return a.getAttribute(c)},this._attach)||
this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==a)break;for(;!c.nextSibling;)if(c=c.parentNode,c==a)return;c=c.nextSibling}},_processTemplateNode:function(a,c,e){var d=!0,m=this.attachScope||this,h=c(a,"dojoAttachPoint")||c(a,"data-dojo-attach-point");if(h)for(var f=h.split(/\s*,\s*/);h=f.shift();)b.isArray(m[h])?m[h].push(a):m[h]=a,d="containerNode"!=h,this._attachPoints.push(h);if(c=c(a,"dojoAttachEvent")||c(a,"data-dojo-attach-event"))for(h=c.split(/\s*,\s*/),f=b.trim;c=h.shift();)if(c){var l=
null;-1!=c.indexOf(":")?(l=c.split(":"),c=f(l[0]),l=f(l[1])):c=f(c);l||(l=c);this._attachEvents.push(e(a,c,b.hitch(m,l)))}return d},_attach:function(a,c,b){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?m||(m=k("./a11yclick")):e[c]||c;return f(a,c,b)},_detachTemplateNodes:function(){var a=this.attachScope||this;d.forEach(this._attachPoints,function(c){delete a[c]});this._attachPoints=[];d.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});b.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return g})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(k,d,g,a,b,l,f,h,c,e){function m(a,c,b){return t&&b?function(a,c){return l(a,b,c)}:u?function(b,e){var d=l(b,c,function(a){e.call(this,a);C=(new Date).getTime()}),h=l(b,a,function(a){(!C||(new Date).getTime()>C+1E3)&&e.call(this,a)});return{remove:function(){d.remove();
h.remove()}}}:function(c,b){return l(c,a,b)}}function n(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function q(c,b,d){if(!h.isRight(c)){var m=n(c.target);if(x=!c.target.disabled&&m&&m.dojoClick)if(w=(v="useTarget"==x)?m:c.target,v&&c.preventDefault(),A=c.changedTouches?c.changedTouches[0].pageX-e.global.pageXOffset:c.clientX,z=c.changedTouches?c.changedTouches[0].pageY-e.global.pageYOffset:c.clientY,D=("object"==typeof x?x.x:"number"==typeof x?x:0)||4,E=("object"==typeof x?x.y:"number"==
typeof x?x:0)||4,!y){c=function(c){e.doc.addEventListener(c,function(b){var e=b.target;x&&!b._dojo_click&&(new Date).getTime()<=B+1E3&&("INPUT"!=e.tagName||!a.contains(e,"dijitOffScreen"))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==c&&("INPUT"!=e.tagName||"radio"==e.type&&(a.contains(e,"dijitCheckBoxInput")||a.contains(e,"mblRadioButton"))||"checkbox"==e.type&&(a.contains(e,"dijitCheckBoxInput")||a.contains(e,"mblCheckBox")))&&"TEXTAREA"!=e.tagName&&"AUDIO"!=
e.tagName&&"VIDEO"!=e.tagName&&b.preventDefault())},!0)};var f=function(a){x=v?g.isDescendant(e.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-e.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-e.global.pageYOffset:a.clientY),w):x&&(a.changedTouches?a.changedTouches[0].target:a.target)==w&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-e.global.pageXOffset:a.clientX)-A)<=D&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-e.global.pageYOffset:a.clientY)-
z)<=E};y=!0;e.doc.addEventListener(b,function(a){h.isRight(a)||(f(a),v&&a.preventDefault())},!0);e.doc.addEventListener(d,function(a){if(!h.isRight(a)&&(f(a),x)){var c=function(c){var b=document.createEvent("MouseEvents");b._dojo_click=!0;b.initMouseEvent(c,!0,!0,a.view,a.detail,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return b};B=(new Date).getTime();var b=v?w:a.target;"LABEL"===b.tagName&&(b=g.byId(b.getAttribute("for"))||b);var e=a.changedTouches?
a.changedTouches[0]:a,d=c("mousedown"),m=c("mouseup"),n=c("click");setTimeout(function(){l.emit(b,"mousedown",d);l.emit(b,"mouseup",m);l.emit(b,"click",n);B=(new Date).getTime()},0)}},!0);c("click");c("mousedown");c("mouseup")}}}var p=5>f("ios"),t=f("pointer-events")||f("MSPointer"),r=function(){var a={},c;for(c in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[c]=f("MSPointer")?"MSPointer"+c.charAt(0).toUpperCase()+c.slice(1):"pointer"+c;return a}(),u=f("touch-events"),y,x,v=!1,w,A,z,D,E,B,C,G;f("touch")&&
(t?c(function(){e.doc.addEventListener(r.down,function(a){q(a,r.move,r.up)},!0)}):c(function(){function a(a){var c=b.delegate(a,{bubbles:!0});6<=f("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,c.targetTouches=a.targetTouches);return c}G=e.body();e.doc.addEventListener("touchstart",function(a){C=(new Date).getTime();var c=G;G=a.target;l.emit(c,"dojotouchout",{relatedTarget:G,bubbles:!0});l.emit(G,"dojotouchover",
{relatedTarget:c,bubbles:!0});q(a,"touchmove","touchend")},!0);l(e.doc,"touchmove",function(c){C=(new Date).getTime();var b=e.doc.elementFromPoint(c.pageX-(p?0:e.global.pageXOffset),c.pageY-(p?0:e.global.pageYOffset));b&&(G!==b&&(l.emit(G,"dojotouchout",{relatedTarget:b,bubbles:!0}),l.emit(b,"dojotouchover",{relatedTarget:G,bubbles:!0}),G=b),l.emit(b,"dojotouchmove",a(c))||c.preventDefault())});l(e.doc,"touchend",function(c){C=(new Date).getTime();var b=e.doc.elementFromPoint(c.pageX-(p?0:e.global.pageXOffset),
c.pageY-(p?0:e.global.pageYOffset))||e.body();l.emit(b,"dojotouchend",a(c))})}));d={press:m("mousedown","touchstart",r.down),move:m("mousemove","dojotouchmove",r.move),release:m("mouseup","dojotouchend",r.up),cancel:m(h.leave,"touchcancel",t?r.cancel:null),over:m("mouseover","dojotouchover",r.over),out:m("mouseout","dojotouchout",r.out),enter:h._eventHandler(m("mouseover","dojotouchover",r.over)),leave:h._eventHandler(m("mouseout","dojotouchout",r.out))};return k.touch=d})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable require ./registry".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A,z){function D(a){return function(c){h[c?"set":"remove"](this.domNode,a,c);this._set(a,c)}}q.add("dijit-legacy-requires",!p.isAsync);q("dijit-legacy-requires")&&u(0,function(){k(["dijit/_base/manager"])});var E={};return l("dijit._WidgetBase",[y,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",
srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:a.blankGif||k.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var c=a.prototype,b=a._setterAttrs=[];a=a._onMap={};for(var e in c.attributeMap)b.push(e);for(e in c)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,
e.length-9),c.attributeMap&&e in c.attributeMap||b.push(e))}},postscript:function(a,c){this.create(a,c)},create:function(a,c){this._introspect();this.srcNodeRef=f.byId(c);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,t.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=v.body(this.ownerDocument);z.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();if((a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a){a.parentNode.replaceChild(this.domNode,a);var b=!0}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},c;for(c in this.params||{})a[c]=this._get(c);d.forEach(this.constructor._setterAttrs,
function(c){if(!(c in a)){var b=this._get(c);b&&this.set(c,b)}},this);for(c in a)this.set(c,a[c])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(d.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,d.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function c(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();d.forEach(this._connects,t.hitch(this,"disconnect"));d.forEach(this._supportingWidgets,c);this.domNode&&d.forEach(z.findWidgets(this.domNode,this.containerNode),c);this.destroyRendering(a);
z.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?h.remove(this.domNode,"widgetId"):e.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||e.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){d.forEach(this.getChildren(),function(c){c.destroyRecursive&&c.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var c=this.domNode;t.isObject(a)?
n.set(c,a):c.style.cssText=c.style.cssText?c.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,e){e=3<=arguments.length?e:this.attributeMap[a];d.forEach(t.isArray(e)?e:[e],function(e){var d=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":t.isFunction(b)&&(b=t.hitch(this,b));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?h.set(d,e,b):d.set(e,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));
break;case "textContent":d.textContent=b;break;case "innerHTML":d.innerHTML=b;break;case "class":c.replace(d,b,this[a]);break;case "toggleClass":c.toggle(d,e.className||a,b)}},this)},get:function(a){var c=this._getAttrNames(a);return this[c.g]?this[c.g]():this._get(a)},set:function(a,c){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var e=this[b.s];if(t.isFunction(e))var d=e.apply(this,Array.prototype.slice.call(arguments,1));else{e=this.focusNode&&!t.isFunction(this.focusNode)?
"focusNode":"domNode";var m=this[e]&&this[e].tagName,h;if((h=m)&&!(h=E[m])){h=this[e];var f={};for(l in h)f[l.toLowerCase()]=!0;h=E[m]=f}var l=h;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:l&&b.l in l&&"function"!=typeof c||/^aria-|^data-|^role$/.test(a)?e:null;null!=b&&this._attrToDom(a,c,b);this._set(a,c)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var c=this._attrPairNames;if(c[a])return c[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return c[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,c){var b=this[a];this[a]=c;!this._created||b===c||b!==b&&c!==c||(this._watchCallbacks&&this._watchCallbacks(a,b,c),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:c}}))},_get:function(a){return this[a]},emit:function(a,c,b){c=c||{};void 0===c.bubbles&&(c.bubbles=!0);void 0===c.cancelable&&(c.cancelable=!0);c.detail||(c.detail={});c.detail.widget=this;var e,d=this["on"+a];d&&
(e=d.apply(this,b?b:[c]));this._started&&!this._beingDestroyed&&r.emit(this.domNode,a.toLowerCase(),c);return e},on:function(a,c){var b=this._onMap(a);return b?g.after(this,b,c,!0):this.own(r(this.domNode,a,c))[0]},_onMap:function(a){var c=this.constructor,b=c._onMap;if(!b){b=c._onMap={};for(var e in c.prototype)/^on/.test(e)&&(b[e.replace(/^on/,"").toLowerCase()]=e)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?z.findWidgets(this.containerNode):[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,c,e){return this.own(b.connect(a,c,this,e))[0]},disconnect:function(a){a.remove()},subscribe:function(a,c){return this.own(x.subscribe(a,t.hitch(this,c)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():m.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=n.get(this.domNode,"display")},placeAt:function(a,c){var b=!a.tagName&&z.byId(a);!b||!b.addChild||c&&"number"!==typeof c?(a=b&&"domNode"in b?b.containerNode&&!/after|before|replace/.test(c||"")?b.containerNode:b.domNode:f.byId(a,this.ownerDocument),e.place(this.domNode,a,c),!this._started&&(this.getParent()||{})._started&&this.startup()):b.addChild(this,c);return this},defer:function(a,c){var b=setTimeout(t.hitch(this,function(){b&&(b=null,this._destroyed||t.hitch(this,a)())}),c||0);return{remove:function(){b&&
(clearTimeout(b),b=null);return null}}}})})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(k,d,g,a){return k("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,d){return"function"===typeof this[d.g]?this[d.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(b,
d){if("object"===typeof b){for(var f in b)b.hasOwnProperty(f)&&"_watchCallbacks"!=f&&this.set(f,b[f]);return this}f=this._getAttrNames(b);var h=this._get(b,f);f=this[f.s];var c;"function"===typeof f?c=f.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=d;if(this._watchCallbacks){var e=this;a(c,function(){e._watchCallbacks(b,h,d)})}return this},_changeAttrValue:function(a,d){var b=this.get(a);this[a]=d;this._watchCallbacks&&this._watchCallbacks(a,b,d);return this},watch:function(a,d){var b=
this._watchCallbacks;if(!b){var h=this;b=this._watchCallbacks=function(a,c,d,f){var e=function(b){if(b){b=b.slice();for(var e=0,m=b.length;e<m;e++)b[e].call(h,a,c,d)}};e(b["_"+a]);f||e(b["*"])}}d||"function"!==typeof a?a="_"+a:(d=a,a="*");var c=b[a];"object"!==typeof c&&(c=b[a]=[]);c.push(d);a={};a.unwatch=a.remove=function(){var a=g.indexOf(c,d);-1<a&&c.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(k,d,g){return g("dijit.Destroyable",
null,{destroy:function(a){this._destroyed=!0},own:function(){var a=["destroyRecursive","destroy","remove"];k.forEach(arguments,function(b){function l(){f.remove();k.forEach(h,function(a){a.remove()})}var f=d.before(this,"destroy",function(a){b[c](a)}),h=[];if(b.then){var c="cancel";b.then(l,l)}else k.forEach(a,function(a){"function"===typeof b[a]&&(c||(c=a),h.push(d.after(b,a,l,!0)))})},this);return arguments}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],
function(k,d,g){var a={},b={},l={length:0,add:function(a){if(b[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");b[a.id]=a;this.length++},remove:function(a){b[a]&&(delete b[a],this.length--)},byId:function(a){return"string"==typeof a?b[a]:a},byNode:function(a){return b[a.getAttribute("widgetId")]},toArray:function(){var a=[],d;for(d in b)a.push(b[d]);return a},getUniqueId:function(d){do var h=d+"_"+(d in a?++a[d]:a[d]=0);while(b[h]);return"dijit"==
g._scopeName?h:g._scopeName+"_"+h},findWidgets:function(a,d){function c(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var h=a.getAttribute("widgetId");h?(h=b[h])&&e.push(h):a!==d&&c(a)}}var e=[];c(a);return e},_destroyAll:function(){g._curFocus=null;g._prevFocus=null;g._activeStack=[];k.forEach(l.findWidgets(d.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var d=1==a.nodeType&&a.getAttribute("widgetId");
if(d)return b[d];a=a.parentNode}return null},_hash:b};return g.registry=l})},"mw-navigationbar/toolbaractions/Action":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(k,d){return k(null,{id:"",text:"",actionClass:"",enabled:function(){return!1},constructor:function(g){d.mixin(this,g)},callback:function(){}})})},"mw-filename-utils/FileNameUtil":function(){define(["dojo/_base/array"],function(k){return{MATLAB_FILE_PATTERN:/^[a-z][a-z0-9_]*\.m$/i,USER_DIR_PATH:"users/",USERS_DIR_PATH:"/users/",
USER_PUBLISHED_DIR:"Published",USER_PUBLISHED_DIR_PATH_PATTERN:"^/MATLAB Drive/Published$",USER_SHARED_DIR_PATH_PATTERN:"^/MATLAB Drive/Shared$",IN_USER_SHARED_DIR_PATTERN:"^/MATLAB Drive/Shared/*",BROWSER_TYPES:"htm html pdf doc docx dot dotx rtf docm dotm xls asv dat exe dll zip".split(" "),LOAD_TYPES:["mat"],MATLAB_OPEN_TYPES:"fig tif png jpg jpeg gif au bmp mlx xlsx".split(" "),LIVE_SCRIPT_EXTENSION:"mlx",MATLAB_CODE_FILE_EXTENSION:"m",FILENAME_PATTERN:/^[^"\/\*:><\?\\|]+$/,MATLAB_EXTENSION_PATTERN:/\.(m|mln|mlx)$/i,
SUPPORTED_EXTENSION_PATTERN:/\.(pdf|html|htm)$/i,SUPPORTED_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx|pdf|html|htm)$/i,MATLAB_FILENAME_PATTERN:/^[a-z][a-z0-9_]*\.(m|mln|mlx)$/i,MATLAB_NAME_LENGTH:63,FILE_NAME_LENGTH:128,isMatlabFileInfo:function(d){return this._fileInfoNameMatchesRegExp(d,this.MATLAB_FILE_PATTERN)},isMatlabFileName:function(d){return this._fileNameMatchesRegExp(d,this.MATLAB_FILE_PATTERN)},isValidFileName:function(d){return this._fileNameMatchesRegExp(d,this.FILENAME_PATTERN)},
checkFileInfoExtension:function(d,g){return d&&d.name&&this.checkFileNameExtension(d.name,g)},checkFileNameExtension:function(d,g){g instanceof Array||(g=[g]);return k.some(g,function(a){return this.getFileNameExtension(d).toLocaleLowerCase()===a.toLocaleLowerCase()},this)},constructMatlabFilePath:function(d){return"'"+this.pathFromFileInfo(d).replace(/'/g,"''")+"'"},constructUrlFromFileInfo:function(d,g){var a="/"+d.location.substring(Math.min(d.location.indexOf("/MATLAB Drive/")+14,d.location.length));
return this.USER_DIR_PATH+g+a+d.name},constructPathFromUserName:function(d){if(d)return this.USERS_DIR_PATH+d+"/"},getFileSeparator:function(d){return-1!==d.search(/^[a-z]:/i)||-1!==d.search(/^\\\\/i)?"\\":"/"},getFileNameNoExtension:function(d){if(!d||"string"!==typeof d)return d;var g=-1!==d.lastIndexOf(".")?d.lastIndexOf("."):d.length;return d.slice(0,g)},getFileNameExtension:function(d){if(!d||"string"!==typeof d)return d;var g=-1!==d.lastIndexOf(".")?d.lastIndexOf(".")+1:d.length;return d.substring(g,
d.length)},normalizePath:function(d){var g=this.getFileSeparator(d);return d.replace(/[\/\\]*$/,g)},parseHomeFolderFromPath:function(d,g){var a=d.indexOf(g),b="";0<a&&(b=d.substring(0,a+g.length)+this.getFileSeparator(d));return b},getPackageStartFromLocation:function(d){d=this.normalizeLocation(d);var g=this.getFileSeparator(d);"\\"===g&&(g+=g);return d.search("(\\"+g+"\\+[a-zA-Z][a-zA-Z0-9_]*)+\\"+g+"$")},getFullyQualifiedMatlabName:function(d){var g=this.convertLocationToPackage(d.location);d=
this.getFileNameNoExtension(d.name);return g+d},getPathForPublish:function(d,g){-1<d.location.indexOf("+")?g=this.getFullyQualifiedMatlabName(d):(g=g?d.location.replace("/MATLAB Drive/",g):d.location,g+=d.name);return g},convertToPublishURLFromMATLABDriveURL:function(d,g){if(0===d.indexOf("/MATLAB Drive/"+this.USER_PUBLISHED_DIR))return d.replace("/MATLAB Drive/",g)},areFilesEqual:function(d,g){return this.pathFromFileInfo(d)===this.pathFromFileInfo(g)},convertPathToRowClass:function(d){return d.replace(/[\/\.]/g,
"_")},convertLocationToPackage:function(d){d=this.normalizeLocation(d);var g=this.getPackageStartFromLocation(d);if(0>g)return"";var a=this.getFileSeparator(d);"\\"===a&&(a+=a);return d.substring(g+1,d.length).replace(/\+/g,"").replace(new RegExp("\\"+a,"g"),".")},isShareable:function(d){return d.location===this.USERS_DIR_PATH||this.isUserPublishedDirectoryPath(d.path)?!1:d.shareAttributes&&void 0!==d.shareAttributes.canProduceShare?d.shareAttributes.canProduceShare:d.isDirectory&&!(d.parent&&"ROOT"===
d.parent.pathId)},isUserSharedDirectoryPath:function(d){return d.match(this.USER_SHARED_DIR_PATH_PATTERN)},isInUsersSharedDirectory:function(d){return-1!==d.search(this.IN_USER_SHARED_DIR_PATTERN)},isCurrentFolderInPath:function(d,g){return-1!==g.search(d)},isUserPublishedDirectoryPath:function(d){return d.match(this.USER_PUBLISHED_DIR_PATH_PATTERN)},isVersioned:function(d){return!d.isDirectory&&this.isWritable(d)&&this.isMatlabEditorOpenType(d)},isWritable:function(d){return d&&d.filePermissions&&
d.filePermissions.canWrite},isLiveScriptFile:function(d){return this.getFileNameExtension(d)===this.LIVE_SCRIPT_EXTENSION},isPlainCodeFile:function(d){return this.getFileNameExtension(d)===this.MATLAB_CODE_FILE_EXTENSION},canRename:function(d){return!d||d.parent&&"ROOT"===d.parent.pathId||d.parent&&d.name===this.USER_PUBLISHED_DIR&&"ROOT"===d.parent.parent.pathId?!1:this.isWritable(d)},canDelete:function(d){return this.canRename(d)},canDownload:function(d){return!d||d.name&&"mln"===this.getFileNameExtension(d.name).toLocaleLowerCase()?
!1:!d.isDirectory},_fileInfoNameMatchesRegExp:function(d,g){var a=!1;d&&d.name&&(a=this._fileNameMatchesRegExp(d.name,g));return a},_fileNameMatchesRegExp:function(d,g){var a=!1;g=this._getCaseInsensitiveRegExp(g);d&&"string"===typeof d&&-1!==d.search(g)&&(a=!0);return a},_getCaseInsensitiveRegExp:function(d){return d instanceof RegExp?new RegExp(d.source,"i"):new RegExp(d,"i")},assertIsFile:function(d){if(!this.isFile(d))throw Error("MW.utils.FileNameUtil: the object is not a 'File'. "+JSON.stringify(d));
},isFile:function(d){return d&&d.hasOwnProperty("content")&&d.hasOwnProperty("fileInfo")&&this.isFileInfo(d.fileInfo)},assertIsFileInfo:function(d){if(!this.isFileInfo(d))throw Error("MW.utils.FileNameUtil: the object is not a 'FileInfo'. "+JSON.stringify(d));},isFileInfo:function(d){return d&&d.hasOwnProperty("location")&&d.hasOwnProperty("name")&&d.hasOwnProperty("isDirectory")},normalizeLocation:function(d){"string"!==typeof d||0!==d.length&&d.lastIndexOf(this.getFileSeparator(d))===d.length-1||
(d+=this.getFileSeparator(d));return d},createFilePath:function(d,g){return this.normalizeLocation(d)+g},folderInfoFromPath:function(d){d=this.fileInfoFromPath(d);d.isDirectory=!0;return d},fileInfoFromPath:function(d){return{location:this.locationFromPath(d),name:this.nameFromPath(d),filePermissions:{canWrite:!0},isDirectory:!1,separator:this.getFileSeparator(d)}},pathFromFileInfo:function(d){this.assertIsFileInfo(d);return d.location+d.name},locationFromPath:function(d){var g=this.getFileSeparator(d),
a=d.split(g);if(a[a.length-1]){var b=a[a.length-1];b=d.slice(0,d.length-b.length)}else a[a.length-2]&&(b=a[a.length-2],b=d.slice(0,d.length-b.length-1));b||d!==g||(b=g);return b},getParentPath:function(d){d=this.locationFromPath(d);return this._getPath(d)},_getPath:function(d){if(0===d.length)return d;var g=this.getFileSeparator(d);return d.charAt(d.length-1)!==g||3===d.length&&d.charAt(0).match(/[a-z]/i)&&":"===d.charAt(1)&&"\\"===d.charAt(2)||"/"===d?d:d.slice(0,d.length-1)},nameFromPath:function(d){var g=
"",a=this.getFileSeparator(d);d=d.replace(a+a,a);d=d.split(a);d[d.length-1]?g=d[d.length-1]:d[d.length-2]&&(g=d[d.length-2]);return g},createEmptyFileObject:function(d,g){return{content:"",fileInfo:this.fileInfoFromPath(this.createFilePath(d,g))}},remoteFile:function(d){var g=d;this.isFile(d)&&this.isFileInfo(d.fileInfo)&&(g={content:d.content,fileInfo:this.remoteFileInfo(d.fileInfo)});return g},remoteFileInfo:function(d){var g=d;this.isFileInfo(d)&&(g={location:d.location,name:d.name,isDirectory:d.isDirectory});
return g},extractSelectedFileName:function(d){if(!d||""===d||1>d.length)return"";var g=this.getFileSeparator(d);return 0>d.lastIndexOf(g)?d:d.substring(d.lastIndexOf(g)+1,d.length)},isBrowserType:function(d){return this.checkFileInfoExtension(d,this.BROWSER_TYPES)?!0:!1},isLoadType:function(d){return this.checkFileInfoExtension(d,this.LOAD_TYPES)?!0:!1},isMatlabOpenType:function(d){return this.checkFileInfoExtension(d,this.MATLAB_OPEN_TYPES)?!0:!1},isMatlabEditorOpenType:function(d){return!(this.checkFileInfoExtension(d,
this.BROWSER_TYPES)||this.checkFileInfoExtension(d,this.LOAD_TYPES)||this.checkFileInfoExtension(d,this.MATLAB_OPEN_TYPES))}}})},"filechooser-ui/FileChooser2":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-geometry dojo/dom-style dojo/on dojo/Evented dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/focus mw-form/PushButton dijit/form/Select mw-filebrowser/FileBrowser mw-filename-utils/FileNameUtil dojo/text!./fileChooserTemplate.html dojo/i18n!./l10n/gen/resources/filechooser/nls/filechooser fileiconprovider-js/FileIconProvider ./columns/ColumnRegistry ./FileChooserActionManager".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w){return k([c,e,m,f],{templateString:u,FILES_ONLY:0,DIRECTORIES_ONLY:1,constructor:function(a){a=a||{};this._fileIconProvider=a.fileIconProvider||new x;this._columnRegistry=v.getRegistry({fileIconProvider:this._fileIconProvider});this._fileService=a.fileService;this._pathService=a.pathService;this._selectedFilter={};this._excludeOnlyRoots=a.excludeOnlyRoots||[];this._actionManager=new w;this._selectionMode="number"===typeof a.selectionMode?a.selectionMode:
this.FILES_ONLY;this.localization=y;this._okButtonText=a.approveButtonText||y.ok;this._okButton=new q({text:this._okButtonText});this._okButton.set("disabled",!0);this._cancelButton=new q({text:y.cancel})},postCreate:function(){this._pathService.getAccessibleRoots();this.root=this._pathService.startupFolder;this.inherited(arguments);if(this._fileService.fileStore.store.isGroupingMode||this._fileService.fileStore.store.isSearchMode)this._fileServiceGroupedStore=this._fileService.fileStore.store,this._fileService.fileStore.store=
this._fileService.fileStore.store.originalStore;this.fileBrowser=new t({fileService:this._fileService,allowDnD:!1,columnRegistry:this._columnRegistry,contextMenuEnabled:!1,actionManager:this._actionManager},this.fileBrowserNode);this._okButton.placeAt(this.okButtonNode);this._cancelButton.placeAt(this.cancelButtonNode);b.set(this.fileTypeWithLabelNode,{display:"none"});b.set(this.fileNameWithLabelNode,{display:"none"});this._setupSelectionMode();this.own(g.after(this.fileBrowser,"onSelectionChange",
d.hitch(this,this._enableOkButton),!0),l(this._pathService,"accessibleRoots",d.hitch(this,function(a){this._setRootFolders(a)})),l(this.domNode,"keydown",d.hitch(this,this._handleTabKeyboardAccessibility)),l(this._okButton,"click",d.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._emitOkButtonClickedEvent()})),l(this._cancelButton,"click",d.hitch(this,function(){this.emit("cancelButtonClicked")})),l(this.fileBrowser.grid,".dgrid-row:dblclick",function(a){a.stopPropagation();a.preventDefault();
this._expandFolderOrSelectFile(a)}.bind(this)),l(this.fileBrowser.grid,"keypress",function(a){a.keyCode===h.ENTER&&(a.stopPropagation(),a.preventDefault(),this._expandFolderOrSelectFile(a))}.bind(this)))},_expandFolderOrSelectFile:function(a){(a=this.fileBrowser.grid.row(a))&&a.data.hasChildren?this.fileBrowser.grid.expand(a):!1===this._okButton.get("disabled")&&this._emitOkButtonClickedEvent()},_enableOkButton:function(a,c){this._selectionMode===this.DIRECTORIES_ONLY?this._enableOkButtonForDirectories(a,
c):this._enableOkButtonForFiles(a,c)},_enableOkButtonForDirectories:function(a,c){0<a.length?this._okButton.set("disabled",!1):this._okButton.set("disabled",!0)},_enableOkButtonForFiles:function(a,c){if(0<a.length){c=!1;for(var b=0;b<a.length;b++)a[b].isDirectory&&(c=!0);c?this._okButton.set("disabled",!0):this._okButton.set("disabled",!1)}else this._okButton.set("disabled",!0)},_emitOkButtonClickedEvent:function(){var a=this.fileBrowser.grid.getSelectedFileInfos();this.emit("okButtonClicked",{selectedNode:a})},
setFilters:function(a,c){c&&(this._selectedFilter.parent=c);var b=this._selectedFilter.parent;if(a){this._selectedFilter.value=a;var e=a.replace(/[(.)(*)]/g,"")}var d=new RegExp("^.*.("+e+")$","i"),h=function(a){return this.pathService.getAccessibleRootsCachedData().directories.map(function(a){return a.fileInfo.path}).some(function(c){return a.path.startsWith(c)})}.bind(this),m=function(a){return!0===a.isDirectory||d.test(a.name)};a=function(a){return a.parent===b&&m(a)&&h(a)};a.commonFilter=m;this.fileBrowser.grid.set("query",
a)},_setRootFolders:function(a){a=a.data;for(var c=a.directories,b=0;b<a.directories.length;b++)c[b].fileInfo.path=r.pathFromFileInfo(c[b].fileInfo),c[b].fileInfo.parent=a.parentPath,c[b].fileInfo.isDirectory=a.directories[b].fileInfo.hasChildren=!0,0!==this._excludeOnlyRoots.length&&-1!==this._excludeOnlyRoots.indexOf(c[b].fileInfo.path)||this.fileService.addOrUpdateFilesInStore(c[b].fileInfo);this._selectedFilter.parent=a.parentPath;this.setFilters(this._selectedFilter.value);this._okButton.set("disabled",
!0)},_setupSelectionMode:function(){this.selectionMode===this.FILES_ONLY?this._selectedFilter.value="*.*":this.selectionMode===this.DIRECTORIES_ONLY&&(this._selectedFilter={})},_handleTabKeyboardAccessibility:function(a){if(a.keyCode===h.TAB){var c=this.fileBrowser.getFocusableElements().focusableElements;var b=Object.values(this.bottom.querySelectorAll('[tabindex\x3d"0"]'));c=c.concat(b);b=c.indexOf(a.target);0>b?n.focus(c[0]):a.shiftKey?a.shiftKey&&(c=c[b-1]?c[b-1]:c[c.length-1],n.focus(c)):(c=
c[b+1]?c[b+1]:c[0],n.focus(c));a.preventDefault();a.stopPropagation()}},destroy:function(){this.inherited(arguments);this._fileServiceGroupedStore&&(this._fileService.fileStore.store=this._fileServiceGroupedStore)}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(k,d,g,a,b){return g("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var d=
this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);b.parse(d,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(a.hitch(this,function(a){this._startupWidgets=a;for(var b=0;b<a.length;b++)this._processTemplateNode(a[b],function(a,b){return a[b]},function(a,b,d){return b in a?a.connect(a,b,d):a.on(b,d,!0)});this.containerNode&&
this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(a,b,d){return b(a,"dojoType")||b(a,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){k.forEach(this._startupWidgets,function(a){a&&!a._started&&
a.startup&&a.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r){function u(a){return eval("("+a+")")}function y(a){var c=a._nameCaseMap,b=a.prototype;if(!c||c._extendCnt<v){c=a._nameCaseMap={};for(var e in b)"_"!==e.charAt(0)&&
(c[e.toLowerCase()]=e);c._extendCnt=v}return c}function x(a,c){c||(c=k);var b=c._dojoParserCtorMap||(c._dojoParserCtorMap={}),e=a.join();if(!b[e]){for(var d=[],h=0,m=a.length;h<m;h++){var f=a[h];d[d.length]=b[f]=b[f]||g.getObject(f)||~f.indexOf("/")&&c(f)}a=d.shift();b[e]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return b[e]}new Date("X");var v=0;c.after(g,"extend",function(){v++},!0);var w={_clearCache:function(){v++;_ctorMap={}},_functionFromScript:function(c,b){var e=
"",d="",h=c.getAttribute(b+"args")||c.getAttribute("args");b=c.getAttribute("with");h=(h||"").split(/\s*,\s*/);b&&b.length&&a.forEach(b.split(/\s*,\s*/),function(a){e+="with("+a+"){";d+="}"});return new Function(h,e+c.innerHTML+d)},instantiate:function(c,b,e){b=b||{};e=e||{};var h=(e.scope||d._scopeName)+"Type",m="data-"+(e.scope||d._scopeName)+"-",f=m+"type",l=m+"mixins",n=[];a.forEach(c,function(a){var c=h in b?b[h]:a.getAttribute(f)||a.getAttribute(h);if(c){var e=a.getAttribute(l);c=e?[c].concat(e.split(/\s*,\s*/)):
[c];n.push({node:a,types:c})}});return this._instantiate(n,b,e)},_instantiate:function(c,b,d,h){function m(c){b._started||d.noStart||a.forEach(c,function(a){"function"!==typeof a.startup||a._started||a.startup()});return c}c=a.map(c,function(a){var c=a.ctor||x(a.types,d.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(c,a.node,b,d,a.scripts,a.inherited)},this);return h?e(c).then(m):m(c)},construct:function(b,e,f,l,n,r){function k(a){D&&
g.setObject(D,a);for(B=0;B<W.length;B++)c[W[B].advice||"after"](a,W[B].method,g.hitch(a,W[B].func),!0);for(B=0;B<V.length;B++)V[B].call(a);for(B=0;B<R.length;B++)a.watch(R[B].prop,R[B].func);for(B=0;B<S.length;B++)t(a,S[B].event,S[B].func);return a}var A=b&&b.prototype;l=l||{};var v={};l.defaults&&g.mixin(v,l.defaults);r&&g.mixin(v,r);if(q("dom-attributes-explicit"))var x=e.attributes;else q("dom-attributes-specified-flag")?x=a.filter(e.attributes,function(a){return a.specified}):(r=(/^input$|^img$/i.test(e.nodeName)?
e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),x=a.map(r.split(/\s+/),function(a){var c=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==c?e.getAttribute(c):e.getAttributeNode(c).value}}));var w=l.scope||d._scopeName;r="data-"+w+"-";var z={};"dojo"!==w&&(z[r+"props"]="data-dojo-props",z[r+"type"]="data-dojo-type",z[r+"mixins"]="data-dojo-mixins",z[w+"type"]="dojotype",z[r+"id"]="data-dojo-id");
var B=0,C;w=[];for(var D,E;C=x[B++];){var K=C.name,M=K.toLowerCase();C=C.value;switch(z[M]||M){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":E=C;break;case "data-dojo-id":case "jsid":D=C;break;case "data-dojo-attach-point":case "dojoattachpoint":v.dojoAttachPoint=C;break;case "data-dojo-attach-event":case "dojoattachevent":v.dojoAttachEvent=C;break;case "class":v["class"]=e.className;break;case "style":v.style=e.style&&e.style.cssText;break;default:if(K in
A||(K=y(b)[M]||K),K in A)switch(typeof A[K]){case "string":v[K]=C;break;case "number":v[K]=C.length?Number(C):NaN;break;case "boolean":v[K]="false"!=C.toLowerCase();break;case "function":""===C||-1!=C.search(/[^\w\.]+/i)?v[K]=new Function(C):v[K]=g.getObject(C,!1)||new Function(C);w.push(K);break;default:M=A[K],v[K]=M&&"length"in M?C?C.split(/\s*,\s*/):[]:M instanceof Date?""==C?new Date(""):"now"==C?new Date:m.fromISOString(C):M instanceof h?d.baseUrl+C:u(C)}else v[K]=C}}for(x=0;x<w.length;x++)z=
w[x].toLowerCase(),e.removeAttribute(z),e[z]=null;if(E)try{E=u.call(l.propsThis,"{"+E+"}"),g.mixin(v,E)}catch(Z){throw Error(Z.toString()+" in data-dojo-props\x3d'"+E+"'");}g.mixin(v,f);n||(n=b&&(b._noScript||A._noScript)?[]:p("\x3e script[type^\x3d'dojo/']",e));var W=[],V=[],R=[],S=[];if(n)for(B=0;B<n.length;B++)z=n[B],e.removeChild(z),f=z.getAttribute(r+"event")||z.getAttribute("event"),l=z.getAttribute(r+"prop"),E=z.getAttribute(r+"method"),w=z.getAttribute(r+"advice"),x=z.getAttribute("type"),
z=this._functionFromScript(z,r),f?"dojo/connect"==x?W.push({method:f,func:z}):"dojo/on"==x?S.push({event:f,func:z}):v[f]=z:"dojo/aspect"==x?W.push({method:E,advice:w,func:z}):"dojo/watch"==x?R.push({prop:l,func:z}):V.push(z);b=(n=b.markupFactory||A.markupFactory)?n(v,e,b):new b(v,e);return b.then?b.then(k):k(b)},scan:function(c,b){function e(a){if(!a.inherited){a.inherited={};var c=a.node,b=e(a.parent);c={dir:c.getAttribute("dir")||b.dir,lang:c.getAttribute("lang")||b.lang,textDir:c.getAttribute(r)||
b.textDir};for(var d in c)c[d]&&(a.inherited[d]=c[d])}return a.inherited}var h=[],m=[],f={},l=(b.scope||d._scopeName)+"Type",g="data-"+(b.scope||d._scopeName)+"-",p=g+"type",r=g+"textdir";g+="mixins";var q=c.firstChild,u=b.inherited;if(!u){var t=function(a,c){return a.getAttribute&&a.getAttribute(c)||a.parentNode&&t(a.parentNode,c)};u={dir:t(c,"dir"),lang:t(c,"lang"),textDir:t(c,r)};for(var A in u)u[A]||delete u[A]}A={inherited:u};for(var v,y;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(v&&"script"==
q.nodeName.toLowerCase())(u=q.getAttribute("type"))&&/^dojo\/\w/i.test(u)&&v.push(q),q=q.nextSibling;else if(y)q=q.nextSibling;else if(u=q.getAttribute(p)||q.getAttribute(l),c=q.firstChild,u||c&&(3!=c.nodeType||c.nextSibling)){y=null;if(u){var w=q.getAttribute(g);v=w?[u].concat(w.split(/\s*,\s*/)):[u];try{y=x(v,b.contextRequire)}catch(W){}y||a.forEach(v,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,m[m.length]=a)});w=y&&!y.prototype._noScript?[]:null;A={types:v,ctor:y,parent:A,node:q,scripts:w};A.inherited=
e(A);h.push(A)}else A={node:q,scripts:v,parent:A};v=w;y=q.stopParser||y&&y.prototype.stopParser&&!b.template;q=c}else q=q.nextSibling;else{if(!A||!A.node)break;q=A.node.nextSibling;y=!1;A=A.parent;v=A.scripts}var z=new n;m.length?(b.contextRequire||k)(m,function(){z.resolve(a.filter(h,function(a){if(!a.ctor)try{a.ctor=x(a.types,b.contextRequire)}catch(S){}for(var c=a.parent;c&&!c.types;)c=c.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!c||
c.instantiate&&c.instantiateChildren;return a.instantiate}))}):z.resolve(h);return z.promise},_require:function(a,c){a=u("{"+a.innerHTML+"}");var b=[],e=[],d=new n;c=c&&c.contextRequire||k;for(var h in a)b.push(h),e.push(a[h]);c(e,function(){for(var a=0;a<b.length;a++)g.setObject(b[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a,c){var b=new n,e=b.promise;b.resolve(!0);var d=this;p("script[type\x3d'dojo/require']",a).forEach(function(a){e=e.then(function(){return d._require(a,
c)});a.parentNode.removeChild(a)});return e},parse:function(a,c){!a||"string"==typeof a||"nodeType"in a||(c=a,a=c.rootNode);var b=a?l.byId(a):f.body();c=c||{};var e=c.template?{template:!0}:{},d=[],h=this;a=this._scanAmd(b,c).then(function(){return h.scan(b,c)}).then(function(a){return h._instantiate(a,e,c,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});g.mixin(d,a);return d}};d.parser=w;b.parseOnLoad&&r(100,w,"parse");return w})},
"dojo/_base/url":function(){define(["./kernel"],function(k){var d=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,g=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,a=function(){for(var b=arguments,l=[b[0]],f=1;f<b.length;f++)if(b[f]){var h=new a(b[f]+"");l=new a(l[0]+"");if(""==h.path&&!h.scheme&&!h.authority&&!h.query)null!=h.fragment&&(l.fragment=h.fragment),h=l;else if(!h.scheme&&(h.scheme=l.scheme,!h.authority&&(h.authority=l.authority,"/"!=h.path.charAt(0)))){l=
(l.path.substring(0,l.path.lastIndexOf("/")+1)+h.path).split("/");for(var c=0;c<l.length;c++)"."==l[c]?c==l.length-1?l[c]="":(l.splice(c,1),c--):0<c&&(1!=c||""!=l[0])&&".."==l[c]&&".."!=l[c-1]&&(c==l.length-1?(l.splice(c,1),l[c-1]=""):(l.splice(c-1,2),c-=2));h.path=l.join("/")}l=[];h.scheme&&l.push(h.scheme,":");h.authority&&l.push("//",h.authority);l.push(h.path);h.query&&l.push("?",h.query);h.fragment&&l.push("#",h.fragment)}this.uri=l.join("");b=this.uri.match(d);this.scheme=b[2]||(b[1]?"":null);
this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);null!=this.authority&&(b=this.authority.match(g),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null)};a.prototype.toString=function(){return this.uri};return k._Url=a})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(k,d,g){var a=k.some;return function(b){var l,f;b instanceof Array?f=b:b&&"object"===typeof b&&
(l=b);var h=[];if(l){f=[];for(var c in l)Object.hasOwnProperty.call(l,c)&&(h.push(c),f.push(l[c]));var e={}}else f&&(e=[]);if(!f||!f.length)return(new d).resolve(e);var m=new d;m.promise.always(function(){e=h=null});var n=f.length;a(f,function(a,c){l||h.push(c);g(a,function(a){m.isFulfilled()||(e[h[c]]=a,0===--n&&m.resolve(e))},m.reject);return m.isFulfilled()});return m.promise}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(k,d){var g={};k.setObject("dojo.date.stamp",
g);g.fromISOString=function(a,b){g._isoRegExp||(g._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var l=g._isoRegExp.exec(a);a=null;if(l){l.shift();l[1]&&l[1]--;l[6]&&(l[6]*=1E3);b&&(b=new Date(b),d.forEach(d.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return b["get"+a]()}),function(a,b){l[b]=l[b]||a}));a=new Date(l[0]||1970,l[1]||0,l[2]||1,l[3]||0,l[4]||0,l[5]||0,l[6]||0);100>l[0]&&
a.setFullYear(l[0]||1970);var f=0,h=l[7]&&l[7].charAt(0);"Z"!=h&&(f=60*(l[8]||0)+(Number(l[9])||0),"-"!=h&&(f*=-1));h&&(f-=a.getTimezoneOffset());f&&a.setTime(a.getTime()+6E4*f)}return a};g.toISOString=function(a,b){var d=function(a){return 10>a?"0"+a:a};b=b||{};var f=[],h=b.zulu?"getUTC":"get",c="";"time"!=b.selector&&(c=a[h+"FullYear"](),c=["0000".substr((c+"").length)+c,d(a[h+"Month"]()+1),d(a[h+"Date"]())].join("-"));f.push(c);"date"!=b.selector&&(c=[d(a[h+"Hours"]()),d(a[h+"Minutes"]()),d(a[h+
"Seconds"]())].join(":"),h=a[h+"Milliseconds"](),b.milliseconds&&(c+="."+(100>h?"0":"")+d(h)),b.zulu?c+="Z":"time"!=b.selector&&(a=a.getTimezoneOffset(),b=Math.abs(a),c+=(0<a?"-":"+")+d(Math.floor(b/60))+":"+d(b%60)),f.push(c));return f.join("T")};return g})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u){var y,x,v=new (d([n,f],{curNode:null,activeStack:[],constructor:function(){var a=h.hitch(this,function(a){g.isDescendant(this.curNode,a)&&this.set("curNode",null);g.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});k.before(l,"empty",a);k.before(l,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var e=this,d=a.document&&a.document.body;if(d){var h=m("pointer-events")?"pointerdown":m("MSPointer")?
"MSPointerDown":m("touch-events")?"mousedown, touchstart":"mousedown",f=c(a.document,h,function(a){a&&a.target&&null==a.target.parentNode||e._onTouchNode(b||a.target,"mouse")}),l=c(d,"focusin",function(a){if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(t.isFocusable(a.target)?e._onFocusNode(b||a.target):e._onTouchNode(b||a.target))}}),n=c(d,"focusout",function(a){e._onBlurNode(b||a.target)});return{remove:function(){f.remove();l.remove();n.remove();d=f=l=n=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<y+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<x+100||(this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(c,e){x=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);b.contains(c,"dijitPopup")&&(c=c.firstChild);var d=[];try{for(;c;){var h=a.get(c,"dijitPopupParent");if(h)c=r.byId(h).domNode;else if(c.tagName&&"body"==c.tagName.toLowerCase()){if(c===q.body())break;c=p.get(c.ownerDocument).frameElement}else{var m=c.getAttribute&&c.getAttribute("widgetId"),f=m&&r.byId(m);!f||"mouse"==e&&f.get("disabled")||d.unshift(m);c=c.parentNode}}}catch(G){}this._setStack(d,
e)},_onFocusNode:function(a){a&&9!=a.nodeType&&(y=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,c){var b=this.activeStack,e=b.length-1,d=a.length-1;if(a[d]!=b[e]){this.set("activeStack",a);var h;for(h=e;0<=h&&b[h]!=a[h];h--)if(e=r.byId(b[h]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(c),
this.emit("widget-blur",e,c);for(h++;h<=d;h++)if(e=r.byId(a[h]))e.set("focused",!0),e._focusManager==this&&e._onFocus(c),this.emit("widget-focus",e,c)}},focus:function(a){if(a)try{a.focus()}catch(z){}}}));e(function(){var a=v.registerWin(p.get(document));m("ie")&&c(window,"unload",function(){a&&(a.remove(),a=null)})});u.focus=function(a){v.focus(a)};for(var w in v)/^_/.test(w)||(u.focus[w]="function"==typeof v[w]?h.hitch(v,w):v[w]);v.watch(function(a,c,b){u.focus[a]=b});return v})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(k,d,g,a,b,l,f){var h={_isElementShown:function(c){var b=a.get(c);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=g.get(c,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return g.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;var b=c.body}catch(n){try{b=a.contentWindow.document.body}catch(q){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){if(!g.get(a,"disabled"))return g.has(a,"tabIndex")?+g.get(a,"tabIndex"):h.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=h.effectiveTabIndex(a)},isFocusable:function(a){return-1<=h.effectiveTabIndex(a)},_getTabNavigable:function(a){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}function b(a){return y[c(a)]||a}var d,f,p,k,r,u,y={},x=h._isElementShown,v=h.effectiveTabIndex,w=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=l("ie")&&"HTML"!==a.scopeName)&&x(a)){var b=v(a);if(0<=b){if(0==b)d||(d=a),f=a;else if(0<b){if(!p||b<k)k=b,p=a;if(!r||b>=u)u=b,r=a}b=c(a);g.get(a,"checked")&&b&&(y[b]=a)}"SELECT"!=a.nodeName.toUpperCase()&&w(a)}};x(a)&&w(a);return{first:b(d),last:b(f),lowest:b(p),highest:b(r)}},getFirstInTabbingOrder:function(a,
b){a=h._getTabNavigable(d.byId(a,b));return a.lowest?a.lowest:a.first},getLastInTabbingOrder:function(a,b){a=h._getTabNavigable(d.byId(a,b));return a.last?a.last:a.highest}};b.mixin(f,h);return h})},"mw-form/PushButton":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/DescriptionMixin mw-form/mixins/property/DisabledMixin mw-form/mixins/property/HorizontalAlignmentMixin mw-form/mixins/property/IconAlignmentMixin mw-form/mixins/property/IconMixin mw-form/mixins/property/SizeMixin mw-form/mixins/property/TextMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/property/VerticalAlignmentMixin mw-form/mixins/IconAndTextSizingMixin mw-form/mixins/PreventSelectionMixin mw-form/mixins/mixinDependencyValidator mw-form/mixins/AriaLabelledByMixin dojo/text!./templates/PushButton.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A){return k(v.validate([g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,w]),{baseClass:"mwWidget mwPushButton",templateString:A,postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",this._handleKeydown.bind(this)),d(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){switch(a.keyCode){case 13:this.get("disabled")||a.target.click();a.preventDefault();break;case 32:a.preventDefault()}},_handleKeyup:function(a){switch(a.keyCode){case 13:a.preventDefault();
break;case 32:this.get("disabled")||a.target.click(),a.preventDefault()}},_qeClick:function(){this.emit("click")}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(k,d){return k("dijit._Contained",null,{_getSibling:function(d){var a=this.getParent();return a&&a._getSiblingOfChild&&a._getSiblingOfChild(this,"previous"==d?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var d=
this.getParent();return d&&d.getIndexOfChild?d.getIndexOfChild(this):-1}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n){d=d("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);k.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(a){this.watch(a,l.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){c=c.concat(k.map(c,function(c){return c+a}),"dijit"+a)}var c=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var b="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(b);this.state&&a(this.state);
this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");b=this.stateNode||this.domNode;var e={};k.forEach(b.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&k.forEach(this._stateClasses,function(a){delete e[a]});k.forEach(c,function(a){e[a]=!0});var d=[],h;for(h in e)d.push(h);b.className=d.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(c,
b,e){function d(e){a.toggle(c,b+"Active",e)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":a.toggle(c,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":a.toggle(c,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":a.toggle(c,
b+"Focused",!0);break;case "blur":case "focusout":a.toggle(c,b+"Focused",!1)}},_trackMouseState:function(a,c){a._cssState=c}});h(function(){function a(a,c,b){if(!b||!g.isDescendant(b,c))for(;c&&c!=b;c=c.parentNode)if(c._cssState){var e=n.getEnclosingWidget(c);e&&(c==e.domNode?e._cssMouseEvent(a):e._subnodeCssMouseEvent(c,c._cssState,a))}}var b=e.body(),d;f(b,c.over,function(c){a(c,c.target,c.relatedTarget)});f(b,c.out,function(c){a(c,c.target,c.relatedTarget)});f(b,m.press,function(c){d=c.target;
a(c,d)});f(b,m.release,function(c){a(c,d);d=null});f(b,"focusin, focusout",function(a){var c=a.target;if(c._cssState&&!c.getAttribute("widgetId")){var b=n.getEnclosingWidget(c);b&&b._subnodeCssMouseEvent(c,c._cssState,a)}})});return d})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(k,d,g,a){function b(a){if((a.keyCode===k.ENTER||a.keyCode===k.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}
var l;g(document,"keydown",function(a){b(a)?(l=a.target,a.preventDefault()):l=null});g(document,"keyup",function(a){b(a)&&a.target==l&&(l=null,g.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var f=function(a,c){a.dojoClick=!0;return g(a,"click",c)};f.click=f;f.press=function(b,c){var e=g(b,a.press,function(a){("mousedown"!=a.type||d.isLeft(a))&&c(a)}),h=g(b,"keydown",function(a){a.keyCode!==k.ENTER&&a.keyCode!==
k.SPACE||c(a)});return{remove:function(){e.remove();h.remove()}}};f.release=function(b,c){var e=g(b,a.release,function(a){("mouseup"!=a.type||d.isLeft(a))&&c(a)}),h=g(b,"keyup",function(a){a.keyCode!==k.ENTER&&a.keyCode!==k.SPACE||c(a)});return{remove:function(){e.remove();h.remove()}}};f.move=a.move;return f})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(k,d,g,a){a.extend(d,{focused:!1,onFocus:function(){},onBlur:function(){},
_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return g("dijit._FocusMixin",null,{_focusManager:k})})},"mw-form/mixins/property/TagMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{tag:"",_setTagAttr:function(d){if("string"!==typeof d)throw Error("tag property expects a 'String'");this.domNode.setAttribute("data-tag",d);this._set("tag",d)},postCreate:function(){this.inherited(arguments);this.set("tag",this.get("tag"))}})})},"mw-form/mixins/property/DescriptionMixin":function(){define(["dojo/_base/declare",
"mw-event-utils/platformize"],function(k,d){return k(null,{description:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDescriptionMixin");this.set("description",this.get("description"))},_setDescriptionAttr:function(d){if("string"!==typeof d)throw Error("'description' property expects a literal string!");this._updateDescription(d);this._set("description",d)},_updateDescription:function(d){this._lastKnownDescription=d;if(this.descriptionNode)this.descriptionNode.textContent=
d,!1===this.get("showDescription")?this.domNode.classList.add("mwHideDescription"):""===d?this.domNode.classList.add("mwHideDescription"):this.domNode.classList.remove("mwHideDescription");else{var a=this;setTimeout(function(){a._destroyed||a._updateTitle(d)},200)}},_updateTitle:function(g,a){if(a){""!==g&&void 0!==g&&(g=""===this._lastKnownDescription?g:" ("+g+")");var b=this._lastKnownDescription+g}else b=this.get("shortcut")?g?g+" ("+d.getPlatformSpecificString(this.get("shortcut"))+")":d.getPlatformSpecificString(this.get("shortcut")):
g;this.getTitleNodes().forEach(function(a){a.setAttribute("title",b)})},getTitleNodes:function(){return[this.domNode]}})})},"mw-event-utils/platformize":function(){define(["dojo/sniff"],function(k){function d(a){var c=a.match(f)?b:l;return a.replace("NUMPAD-",c)}function g(a){a.sort(function(a,c){return h.indexOf(a)-h.indexOf(c)})}var a=k("mac")?"":"+",b=k("mac")?"":"NumPad-",l=k("mac")?"":"NumPad ",f=/NUMPAD-\d/,h=["CTRL","ALT","SHIFT","META"],c={CTRL:{macString:"\u2303",otherPlatformString:"Ctrl"},
META:{macString:"\u2318",otherPlatformString:"Ctrl"},SHIFT:{macString:"\u21e7",otherPlatformString:"Shift"},ALT:{macString:"\u2325",otherPlatformString:"Alt"},ENTER:{macString:"\u23ce",otherPlatformString:"Enter"},DELETE:{macString:"\u2326",otherPlatformString:"Delete"},DEL:{macString:"\u2326",otherPlatformString:"Del"},SPACEBAR:{macString:"\u2423",otherPlatformString:"Spacebar"},SPACE:{macString:"\u2423",otherPlatformString:"Space"},UP:{macString:"\u2191",otherPlatformString:"Up"},DOWN:{macString:"\u2193",
otherPlatformString:"Down"},LEFT:{macString:"\u2190",otherPlatformString:"Left"},RIGHT:{macString:"\u2192",otherPlatformString:"Right"},HOME:{macString:"\u2196",otherPlatformString:"Home"},END:{macString:"\u2198",otherPlatformString:"End"},PAGEUP:{macString:"\u21de",otherPlatformString:"Page Up"},PAGEDOWN:{macString:"\u21df",otherPlatformString:"Page Down"},TAB:{macString:"\u21e5",otherPlatformString:"Tab"},ESCAPE:{macString:"\u238b",otherPlatformString:"Esc"},BACKSPACE:{macString:"\u232b",otherPlatformString:"Backspace"},
CLEAR:{macString:"\u2327",otherPlatformString:"Clear"},PAUSE:{macString:"Pause",otherPlatformString:"Pause"},INSERT:{macString:"Insert",otherPlatformString:"Insert"}};return{getPlatformSpecificString:function(b,h){h=h||{};b=b.replace(/ /g,"");b=b.replace(/_/g,"+");b=b.toUpperCase();b=b.replace(/CNTRL|CONTROL/g,"CTRL");k("mac")&&!h.dontConvertCtrlToCmd&&(b=b.replace(/CTRL/g,"META"));/[^+-]\+$/.test(b)&&(b+="+");b=b.split(/\+(?!$)/);var e=b.pop();0===e.indexOf("NUMPAD-")&&(e=d(e));h.sortModifiers&&
g(b);b.push(e);return b.map(function(a){var b=c[a];return b?k("mac")?b.macString:b.otherPlatformString:a}).join(a)}}})},"mw-form/mixins/property/DisabledMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{disabled:!1,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwDisabledMixin");this.set("disabled",this.get("disabled"));this._disableInteractionHandler=this._disableInteractionHandler.bind(this);this._addDisableListener(this.domNode,this._disableInteractionHandler)},
startup:function(){this.inherited(arguments);this.get("disabled")&&(this.domNode.dojoClick=!1)},destroy:function(){this.domNode&&this._removeDisableListener(this.domNode,this._disableInteractionHandler);this.inherited(arguments)},_disableInteractionHandler:function(d){this.get("disabled")&&this._disabledInteraction(d)},_disabledInteraction:function(d){d.stopImmediatePropagation();var g=document.createEvent("MouseEvent");g.initMouseEvent(d.type,d.bubbles,d.cancelable,d.view,d.detail,d.screenX,d.screenY,
d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget);this.domNode.parentElement.dispatchEvent(g)},_addDisableListener:function(d,g){window.PointerEvent&&d.addEventListener("pointerdown",g,!0);d.addEventListener("mousedown",g,!0);d.addEventListener("click",g,!0)},_removeDisableListener:function(d,g){window.PointerEvent&&d.removeEventListener("pointerdown",g,!0);d.removeEventListener("mousedown",g,!0);d.removeEventListener("click",g,!0)},_updateDisableNode:function(d){d?
(this.domNode.classList.add("mwDisabled"),this.domNode.classList.remove("mwEnabled")):(this.domNode.classList.add("mwEnabled"),this.domNode.classList.remove("mwDisabled"))},_setDisabledAttr:function(d){if("boolean"!==typeof d)throw Error("'disabled' property expects a boolean!");this._set("disabled",d);this._updateDisableNode(d);this.set("hovering",!1);this.set("active",!1);this._setAriaDisabled();this.baseClass.split(" ").forEach(function(g){d?this.domNode.classList.add(g+"Disabled"):this.domNode.classList.remove(g+
"Disabled")}.bind(this));d?(this.domNode.classList.add("dijitDisabled"),this.domNode.dojoClick=!1):(this.domNode.classList.remove("dijitDisabled"),this.domNode.dojoClick=void 0);this._setTabIndexOnNode(this.focusNode)},_setTabIndexOnNode:function(d){this.get("disabled")?d.removeAttribute("tabIndex"):d.setAttribute("tabIndex","0")},_setAriaDisabled:function(){(this.disabledNode?this.disabledNode:this.domNode).setAttribute("aria-disabled",this.get("disabled")&&!this.get("dropDownNeverDisabled")?"true":
"false")}})})},"mw-form/mixins/property/HorizontalAlignmentMixin":function(){define(["dojo/_base/declare"],function(k){var d=["left","center","right"],g={};Object.keys(d).forEach(function(a){var b=d[a];a=d[a];a=a.charAt(0).toUpperCase()+a.slice(1);g[b]="mwHorizontalAlignment"+a});return k(null,{horizontalAlignment:"center",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwHorizontalAlignmentMixin")},_setHorizontalAlignmentAttr:function(a){if(-1===d.indexOf(a))throw Error("'Vertical alignment' property expects '' one of these values: "+
d);this._applyHorizontalAlignmentClass(a);this._set("horizontalAlignment",a)},_applyHorizontalAlignmentClass:function(a){var b=this.get("horizontalAlignment");(b=g[b])&&this.domNode.classList.remove(b);this.domNode.classList.add(g[a])}})})},"mw-form/mixins/property/IconAlignmentMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","mw-form/mixins/property/TextMixin","mw-form/mixins/property/IconMixin"],function(k,d,g,a){k=k(null,{CLASS_NAME_PREFIX:"mwIconAlignment",constructor:function(){this.ICON_ALIGNMENT_CONFIGURATION=
{top:{className:this.CLASS_NAME_PREFIX+"Top",textNodeLocation:"after"},right:{className:this.CLASS_NAME_PREFIX+"Right",textNodeLocation:"before"},bottom:{className:this.CLASS_NAME_PREFIX+"Bottom",textNodeLocation:"before"},left:{className:this.CLASS_NAME_PREFIX+"Left",textNodeLocation:"after"}}},iconAlignment:"left",_supportedValues:["top","right","bottom","left"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwIconAlignmentMixin")},_setIconAlignmentAttr:function(a){if(this.get("iconAlignment")!==
a||!this._started){if(-1===this._supportedValues.indexOf(a))throw Error("'iconAlignment' property expects one of these values: "+this._supportedValues);var b=this.ICON_ALIGNMENT_CONFIGURATION[this.get("iconAlignment")].className;this.domNode.classList.remove(b);this.domNode.classList.add(this.ICON_ALIGNMENT_CONFIGURATION[a].className);d.place(this.textNode,this.iconNode,this.ICON_ALIGNMENT_CONFIGURATION[a].textNodeLocation);this._set("iconAlignment",a)}}});k._dependencies=[{mixin:g,orderDependent:!1},
{mixin:a,orderDependent:!1}];return k})},"mw-form/mixins/property/TextMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{text:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwTextMixin");this.set("text",this.get("text"))},_setTextAttr:function(d){if("string"!==typeof d)throw Error("'text' property expects a literal string!");this._updateTextInDOM(d);this._set("text",d)},_updateTextInDOM:function(d){this._placeTextInNode(d);0===this._getTextForDOM(d).length?
this.domNode.classList.add("mwNoText"):this.domNode.classList.remove("mwNoText")},_placeTextInNode:function(d,g){void 0===g&&(g=this.textNode);for(;g.firstChild;)g.removeChild(g.firstChild);d=this._getTextForDOM(d,g);if(0<d.length){var a=document.createElement("span");a.classList.add("mwTextLine");a.textContent=d;g.appendChild(a);g.classList.remove("mwEmptyNode")}else g.classList.add("mwEmptyNode")},_getTextForDOM:function(d){return d}})})},"mw-form/mixins/property/IconMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/dom-construct","dojo/on"],function(k,d,g,a){return k(null,{_iconTypes:{DATA_URI:"data_uri",PATH_URI:"path_uri",CSS_CLASS:"css_class"},icon:"",_lastIconApplied:"",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwIconMixin");this.set("icon",this.get("icon"))},_setIconAttr:function(a){if("string"!==typeof a)throw Error("'icon' property expects a literal string!");this._set("icon",a);this._updateDOM(a)},_updateDOM:function(a){this._removeOldIcon();
this._applyNewIcon(a)},_removeOldIcon:function(){var a=this._lastIconApplied,d=this._getIconType(a);d===this._iconTypes.DATA_URI||d===this._iconTypes.PATH_URI?this._removeImageStyles(this.iconNode):d===this._iconTypes.CSS_CLASS&&""!==a&&a.trim().split(" ").forEach(function(a){this.iconNode.classList.remove(a)},this)},_applyNewIcon:function(b){var l=this._getIconType(b);if(l===this._iconTypes.DATA_URI||l===this._iconTypes.PATH_URI){var f=g.create("img",{src:b});this.own(a.once(f,"load",d.hitch(this,
function(){this._applyImageStyles(this.iconNode,b,f);this.emit("iconapplied");this.emit("updatelayout");g.destroy(f)})))}else l===this._iconTypes.CSS_CLASS&&""!==b&&b.trim().split(" ").forEach(function(a){this.iconNode.classList.add(a)},this);0===b.length?this.domNode.classList.add("mwNoIcon"):this.domNode.classList.remove("mwNoIcon");this._lastIconApplied=b},_getIconType:function(a){var b="";return b=-1<a.indexOf("data:")?this._iconTypes.DATA_URI:a.match(/\./)?this._iconTypes.PATH_URI:this._iconTypes.CSS_CLASS},
_applyImageStyles:function(a,d,f){a.style.backgroundImage='url("'+d+'")';a.style.width=f.width+"px";a.style.height=f.height+"px"},_removeImageStyles:function(a){a.style.backgroundImage="";a.style.width="";a.style.height=""}})})},"mw-form/mixins/property/SizeMixin":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(k,d){return d(null,{width:"auto",height:"auto",_allowedValues:["auto","100%"],postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwSizeMixin");
this.on("updatelayout",k.hitch(this,this._updateLayout))},startup:function(){this.inherited(arguments);this._updateLayout()},_updateLayout:function(){this._setWidthAttr(this.get("width"));this._setHeightAttr(this.get("height"))},_setWidthAttr:function(d){this._setSize("width",d)},_setHeightAttr:function(d){this._setSize("height",d)},_validateSizeInput:function(d){if(!("string"===typeof d&&0<=this._allowedValues.indexOf(d)||"number"===typeof d&&0<d))throw Error(" Property should either be 'auto' or a positive integer");
},_setSize:function(d,a){this._validateSizeInput(a);this._set(d,a);if(this._started){var b="";b=0<=this._allowedValues.indexOf(a)?a:this._getAdjustedSize(d,a,this.domNode);this.domNode.style[d]=b}},_getAdjustedSize:function(d,a,b){return a+"px"}})})},"mw-form/mixins/property/VisualFamilyMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{visualFamily:"default",_setVisualFamilyAttr:function(d){if("string"!==typeof d||0===d.length)throw Error("'visualFamily' property expects a literal non-empty string!");
var g=this._getClassNameForVisualFamily(this.get("visualFamily"));this.domNode.classList.remove(g);g=this._getClassNameForVisualFamily(d);this.domNode.classList.add(g);this._set("visualFamily",d)},_getClassNameForVisualFamily:function(d){return"mw"+d.charAt(0).toUpperCase()+d.slice(1)+"VisualFamily"}})})},"mw-form/mixins/property/VerticalAlignmentMixin":function(){define(["dojo/_base/declare","mw-form/mixins/property/SizeMixin"],function(k,d){var g=["top","middle","bottom"],a={};Object.keys(g).forEach(function(b){var d=
g[b];b=g[b];b=b.charAt(0).toUpperCase()+b.slice(1);a[d]="mwVerticalAlignment"+b});k=k(null,{verticalAlignment:"middle",postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwVerticalAlignmentMixin")},_setVerticalAlignmentAttr:function(a){if(-1===g.indexOf(a))throw Error("'Vertical alignment' property expects '' one of these values: "+g[a]);this._applyVerticalAlignmentClass(a);this._set("verticalAlignment",a)},_applyVerticalAlignmentClass:function(b){var d=this.get("verticalAlignment");
(d=a[d])&&this.domNode.classList.remove(d);this.domNode.classList.add(a[b])}});k._dependencies=[{mixin:d,orderDependent:!0}];return k})},"mw-form/mixins/IconAndTextSizingMixin":function(){define(["dojo/_base/declare","dojo/dom-style","mw-form/mixins/property/SizeMixin"],function(k,d,g){k=k(null,{_paddingAndBorder:6,_setSize:function(a,b){this.inherited(arguments);if(this._started){var d="";"auto"===b||"100%"===b?(d=b,this._setSpecialSizeOnAdditionalNodes(a,"none")):(d=this._getAdjustedSize(a,b,this.domNode),
this._setSpecialSizeOnAdditionalNodes(a,parseFloat(d)-this._paddingAndBorder+"px"));this.contentWrapperNode.style[a]="100%"}},_setSpecialSizeOnAdditionalNodes:function(a,b){"width"===a?this.iconAndTextContainerNode.style.maxWidth=b:"height"===a&&(this.textNode.style.maxHeight=b)}});k._dependencies=[{mixin:g,orderDependent:!0}];return k})},"mw-form/mixins/PreventSelectionMixin":function(){define(["dojo/_base/declare","dojo/on"],function(k,d){return k(null,{postCreate:function(){this.inherited(arguments);
this._getNonSelectableNodes().forEach(function(g){d(g,"selectstart",function(a){-1===["INPUT","TEXTAREA"].indexOf(a.target.nodeName)&&a.preventDefault()})})},_getNonSelectableNodes:function(){return[this.domNode]}})})},"mw-form/mixins/mixinDependencyValidator":function(){define([],function(){return{validate:function(k){return k}}})},"mw-form/mixins/AriaLabelledByMixin":function(){define(["dojo/_base/declare","mw-form/mixins/property/TextMixin"],function(k,d){k=k(null,{postCreate:function(){this.inherited(arguments);
var d=this.id+"_label";this.focusNode.setAttribute("aria-labelledby",d);this.textNode.setAttribute("id",d)}});k._dependencies=[{mixin:d,orderDependent:!1}];return k})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x){function v(a){return function(c){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(h.hitch(this,a,c))}}var w=d("dijit.form._SelectMenu",q,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,c=this.parentWidget.value;
h.isArray(c)&&(c=c[c.length-1]);c&&k.forEach(this.parentWidget._getChildren(),function(b){b.option&&c===b.option.value&&(a=!0,this.focusChild(b,!1))},this);a||this.inherited(arguments)}});d=d("dijit.form.Select",[m,n,u],{baseClass:"dijitSelect dijitValidationTextBox",templateString:x,_buttonInputDisabled:e("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var c=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=c?c:0].value)}this.dropDown=new w({id:this.id+"_menu",parentWidget:this});a.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var c=h.hitch(this,"_setValueAttr",a);a=new p({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,
onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a}return new t({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(A){}},focusChild:function(a){a&&this.set("value",
a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=y.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,c,b,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{k.forEach(this._getChildren(),function(a){a.destroyRecursive()});
var c=new p({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(c)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);g.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var c=a?"":this._missingMsg;c&&this.focused&&this._hasBeenBlurred?r.show(c,this.domNode,this.tooltipPosition,!this.isLeftToRight()):r.hide(this.domNode);this._set("message",c);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);r.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=l.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[f.LEFT_ARROW];delete a[f.RIGHT_ARROW]},_setStyleAttr:function(c){this.inherited(arguments);
a.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);r.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){r.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
d._Menu=w;d.prototype._onContainerKeydown=v("_onContainerKeydown");d.prototype._onContainerKeypress=v("_onContainerKeypress");return d})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n,q){return b("dijit.form._FormSelectWidget",q,{multiple:!1,
options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;
if(c.isArrayLike(a))return k.map(a,"return this.getOptions(item);",this);c.isString(a)&&(a={value:a});c.isObject(a)&&(k.some(b,function(c,b){for(var d in a)if(!(d in c)||c[d]!=a[d])return!1;a=b;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){k.forEach(c.isArrayLike(a)?a:[a],function(a){a&&c.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(c.isArrayLike(a)?a:[a]);k.forEach(a,function(a){a&&(this.options=k.filter(this.options,
function(c){return c.value!==a.value||c.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){k.forEach(c.isArrayLike(a)?a:[a],function(a){var c=this.getOptions({value:a.value}),b;if(c)for(b in a)c[b]=a[b]},this);this._loadChildren()},setStore:function(a,c,b){h.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,c,b)},_deprecatedSetStore:function(b,e,h){var f=this.store;h=h||{};if(f!==b){for(var l;l=this._notifyConnections.pop();)l.remove();b.get||(c.mixin(b,{_oldAPI:!0,get:function(a){var c=new d;this.fetchItemByIdentity({identity:a,onItem:function(a){c.resolve(a)},onError:function(a){c.reject(a)}});return c.promise},query:function(a,b){var e=new d(function(){h.abort&&h.abort()});e.total=new d;var h=this.fetch(c.mixin({query:a,onBegin:function(a){e.total.resolve(a)},
onComplete:function(a){e.resolve(a)},onError:function(a){e.reject(a)}},b));return new n(e)}}),b.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[g.after(b,"onNew",c.hitch(this,"_onNewItem"),!0),g.after(b,"onDelete",c.hitch(this,"_onDeleteItem"),!0),g.after(b,"onSet",c.hitch(this,"_onSetItem"),!0)]));this._set("store",b)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);h.query&&this._set("query",h.query);h.queryOptions&&this._set("queryOptions",h.queryOptions);b&&b.query&&(this._loadingStore=!0,this.onLoadDeferred=new d,this._queryRes=b.query(this.query,this.queryOptions),m(this._queryRes,c.hitch(this,function(d){if(this.sortByLabel&&!h.sort&&d.length)if(b.getValue)d.sort(a.createSortFunction([{attribute:b.getLabelAttributes(d[0])[0]}],b));else{var m=this.labelAttr;d.sort(function(a,c){return a[m]>c[m]?1:c[m]>
a[m]?-1:0})}h.onFetch&&(d=h.onFetch.call(this,d,h));k.forEach(d,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(c.hitch(this,function(a,c,b){c==b?this._onSetItem(a):(-1!=c&&this._onDeleteItem(a),-1!=b&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:e);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(d):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),c.hitch(this,function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)})));return f},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=c.isArrayLike(a)?k.map(a,function(a){return c.isObject(a)?a:{value:a}}):c.isObject(a)?[a]:[{value:a}];a=k.filter(this.getOptions(a),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!d.length||(a[0]=
d[0]);k.forEach(d,function(c){c.selected=k.some(a,function(a){return a.value===c.value})});d=k.map(a,function(a){return a.value});if("undefined"!=typeof d&&"undefined"!=typeof d[0]){var e=k.map(a,function(a){return a.label});this._setDisplay(this.multiple?e:e[0]);this.inherited(arguments,[this.multiple?d:d[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=k.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?
a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(k.forEach(this._getChildren(),function(a){a.destroyRecursive()}),k.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var c=this;k.forEach(this._getChildren(),function(b){var d=k.some(a,function(a){return b.option&&
a===b.option.value});d&&!c.multiple&&(c.focusedChild=b);f.toggle(b.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);b.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var c=k.filter(a,function(a){return a.selected})[0];if(c&&c.value)return c.value;a[0].selected=!0;return a[0].value}return this.multiple?k.map(k.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,c){c&&c.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var c=this.store,b=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:c.getLabel(a);return{value:b?c.getIdentity(a):null,label:b,item:a}},_addOptionForItem:function(a){var c=this.store;c.isItemLoaded&&!c.isItemLoaded(a)?c.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);l.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?e("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+h._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);g.after(this,"onChange",c.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(k){var d={};k.setObject("dojo.data.util.sorter",d);d.basicComparator=function(d,a){var b=-1;null===d&&(d=void 0);null===a&&(a=void 0);if(d==a)b=0;else if(d>a||null==d)b=1;return b};d.createSortFunction=function(g,a){function b(a,c,b,d){return function(e,h){e=d.getValue(e,a);h=d.getValue(h,a);
return c*b(e,h)}}for(var l=[],f,h=a.comparatorMap,c=d.basicComparator,e=0;e<g.length;e++){f=g[e];var m=f.attribute;if(m){f=f.descending?-1:1;var n=c;h&&("string"!==typeof m&&"toString"in m&&(m=m.toString()),n=h[m]||c);l.push(b(m,f,n,a))}}return function(a,c){for(var b=0;b<l.length;){var d=l[b++](a,c);if(0!==d)return d}return 0}};return d})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(k,d,g){var a=function(b){function l(d){b[d]=function(){var c=
arguments,e=g(b,function(b){Array.prototype.unshift.call(c,b);return a(k[d].apply(k,c))});if("forEach"!==d||f)return e}}if(!b)return b;var f=!!b.then;f&&(b=d.delegate(b));l("forEach");l("filter");l("map");null==b.total&&(b.total=g(b,function(a){return a.length}));return b};d.setObject("dojo.store.util.QueryResults",a);return a})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(k,d,g,a){return k("dijit.form._FormValueWidget",
[g,a],{_layoutHackIE7:function(){if(7==d("ie"))for(var a=this.domNode,l=a.parentNode,f=a.firstChild||a,h=f.style.filter,c=this;l&&0==l.clientHeight;)(function(){var a=c.connect(l,"onscroll",function(){c.disconnect(a);f.style.filter=(new Date).getMilliseconds();c.defer(function(){f.style.filter=h})})})(),l=l.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(k,d,g,a,b,l,f,h){d("dijit-legacy-requires")&&a(0,function(){require(["dijit/form/_FormValueWidget"])});return k("dijit.form._FormWidget",[b,f,l,h],{setDisabled:function(a){g.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){g.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){g.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!d("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q){function p(){}function t(a){return function(c,b,d,e){return c&&"string"==typeof b&&c[b]==p?c.on(b.substring(2).toLowerCase(),f.hitch(d,e)):a.apply(g,arguments)}}k.around(g,"connect",t);l.connect&&k.around(l,"connect",t);k=a("dijit._Widget",[m,n,q],{onClick:p,onDblClick:p,onKeyDown:p,onKeyPress:p,onKeyUp:p,onMouseDown:p,onMouseMove:p,onMouseOut:p,onMouseOver:p,onMouseLeave:p,onMouseEnter:p,onMouseUp:p,constructor:function(a){this._toConnect={};for(var c in a)this[c]===
p&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=a[c],delete a[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,c){return this[this._onMap(a)]===p?g.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){l.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,c)},attr:function(a,c){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){l.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?h("[widgetId]",this.containerNode).map(e.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});b("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});
return k})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(k,d,g,a,b,l){k=a("dijit._OnDijitClickMixin",null,{connect:function(a,b,c){return this.inherited(arguments,[a,"ondijitclick"==b?l:b,c])}});k.a11yclick=l;return k})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(k,d,g,a,b){var l=b.doc.documentElement;b=a("ie");var f=a("trident"),h=
a("opera"),c=Math.floor,e=a("ff"),m=k.boxModel.replace(/-/,"");h={dj_quirks:a("quirks"),dj_opera:h,dj_khtml:a("khtml"),dj_webkit:a("webkit"),dj_safari:a("safari"),dj_chrome:a("chrome"),dj_edge:a("edge"),dj_gecko:a("mozilla"),dj_ios:a("ios"),dj_android:a("android")};b&&(h.dj_ie=!0,h["dj_ie"+c(b)]=!0,h.dj_iequirks=a("quirks"));f&&(h.dj_trident=!0,h["dj_trident"+c(f)]=!0);e&&(h["dj_ff"+c(e)]=!0);h["dj_"+m]=!0;var n="",q;for(q in h)h[q]&&(n+=q+" ");l.className=d.trim(l.className+" "+n);g(function(){if(!k.isBodyLtr()){var a=
"dj_rtl dijitRtl "+n.replace(/ /g,"-rtl ");l.className=d.trim(l.className+" "+a+"dj_rtl dijitRtl "+n.replace(/ /g,"-rtl "))}});return a})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(k,d,g,a){g(function(){d("highcontrast")&&k.add(a.body(),"dijit_a11y")});return d})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(k,d,g,a,b,l,f){b.add("highcontrast",function(){var h=
f.doc.createElement("div");try{h.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(d.blankGif||k.toUrl("./resources/blank.gif"))+'");';f.body().appendChild(h);var c=a.getComputedStyle(h),e=c.backgroundImage;return c.borderTopColor==c.borderRightColor||e&&("none"==e||"url(invalid-url:)"==e)}catch(m){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+m.toString()),!1}finally{8>=
b("ie")?h.outerHTML="":f.body().removeChild(h)}});l(function(){b("highcontrast")&&g.add(f.body(),"dj_a11y")});return b})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(k,d,g,a,b,l,f,h,c,e){return d("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,
intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?g.set(this.focusNode,"disabled",a):this.focusNode.setAttribute("aria-disabled",a?"true":"false");this.valueNode&&g.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:
"focusNode",k.forEach(b.isArray(a)?a:[a],function(a){a=this[a];h("webkit")||e.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var d=this.own(f(this.focusNode,"focus",function(){m.remove();d.remove()}))[0],e=h("pointer-events")?"pointerup":h("MSPointer")?"MSPointerUp":h("touch-events")?"touchend, mouseup":"mouseup",m=this.own(f(this.ownerDocumentBody,
e,b.hitch(this,function(a){m.remove();d.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=a.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(m){}},compare:function(a,c){return"number"==typeof a&&"number"==typeof c?isNaN(a)&&isNaN(c)?
0:a-c:a>c?1:a<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(k,d,g,a,b,l){return k("dijit.form._FormValueMixin",
l,{readOnly:!1,_setReadOnlyAttr:function(a){d.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,
!0)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r){return k("dijit._HasDropDown",r,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],
_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(m.once(this.ownerDocument,n.release,e.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var c=this.dropDown,d=!1;if(a&&this._opened){var e=l.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w&&a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!d;)b.contains(e,"dijitPopup")?d=!0:e=e.parentNode;
if(d){e=a.target;if(c.onItemClick){for(var h;e&&!(h=q.byNode(e));)e=e.parentNode;if(h&&h.onClick&&h.getParent)h.getParent().onItemClick(h,a)}return}}}this._opened?c.focus&&(!1!==c.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){c.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=
this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";b.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(m(this._buttonNode,
n.press,e.hitch(this,"_onDropDownMouseDown")),m(this._buttonNode,"click",e.hitch(this,"_onDropDownClick")),m(a,"keydown",e.hitch(this,"_onKey")),m(a,"keyup",e.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,d=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),
a.preventDefault()):b&&this._opened&&a.keyCode==c.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==c.DOWN_ARROW||(a.keyCode==c.ENTER||a.keyCode==c.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=
this.dropDown;a&&a.focus&&this.defer(e.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new d,c=e.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?c():this.loadDropDown(c);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var c=
this.dropDown,d=c.domNode,h=this._aroundNode||this.domNode,m=this,f=t.open({parent:this,popup:c,around:h,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){m.closeDropDown(!0)},onCancel:function(){m.closeDropDown(!0)},onClose:function(){a.set(m._popupStateNode,"popupActive",!1);b.remove(m._popupStateNode,"dijitHasDropDownOpen");m._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&h.offsetWidth>c._popupWrapper.offsetWidth){h=h.offsetWidth-c._popupWrapper.offsetWidth;
var n={w:c.domNode.offsetWidth+h};this._origStyle=d.style.cssText;e.isFunction(c.resize)?c.resize(n):l.setMarginBox(d,n);"R"==f.corner[1]&&(c._popupWrapper.style.left=c._popupWrapper.style.left.replace("px","")-h+"px")}a.set(this._popupStateNode,"popupActive","true");b.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",c.id);"presentation"===d.getAttribute("role")||d.getAttribute("aria-labelledby")||
d.setAttribute("aria-labelledby",this.id);return f},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),t.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r){function u(){this._popupWrapper&&(l.destroy(this._popupWrapper),delete this._popupWrapper)}g=g(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,c=f.position(this._firstAroundNode,!0),b=c.x-a.x;a=c.y-a.y;if(b||a)for(this._firstAroundPosition=c,c=0;c<this._stack.length;c++){var d=this._stack[c].wrapper.style;d.top=parseFloat(d.top)+a+"px";"auto"==d.right?d.left=parseFloat(d.left)+b+
"px":d.right=parseFloat(d.right)-b+"px"}this._aroundMoveListener=setTimeout(m.hitch(this,"_repositionAll"),b||a?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,b=a.domNode;c||(c=l.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(b),b=b.style,b.display="",b.visibility="",b.position="",b.top="0px",a._popupWrapper=c,d.after(a,"destroy",u,!0),"ontouchend"in document&&n(c,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),c.dojoClick=!0);return c},moveOffScreen:function(a){var c=this._createWrapper(a);a=f.isBodyLtr(a.ownerDocument);var b={visibility:"hidden",top:"-9999px",display:""};b[a?"left":"right"]="-9999px";b[a?"right":"left"]="auto";h.set(c,b);return c},hide:function(a){var c=this._createWrapper(a);h.set(c,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,c=a.length-1;0<c&&a[c].parent===a[c-1].widget;c--);return a[c]},open:function(d){var l=this._stack,g=d.popup,r=g.domNode,k=d.orient||["below","below-alt","above","above-alt"],u=d.parent?d.parent.isLeftToRight():f.isBodyLtr(g.ownerDocument),y=d.around,E=d.around&&d.around.id?d.around.id+"_dropdown":"popup_"+this._idGen++;if(!d.doNotClose)for(;l.length&&(!d.parent||!a.isDescendant(d.parent.domNode,l[l.length-1].widget.domNode));)this.close(l[l.length-1].widget);
var B=this.moveOffScreen(g);g.startup&&!g._started&&g.startup();var C=f.position(r);if("maxHeight"in d&&-1!=d.maxHeight)var G=d.maxHeight||Infinity;else{G=t.getEffectiveBox(this.ownerDocument);var I=y?f.position(y,!1):{y:d.y-(d.padding||0),h:2*(d.padding||0)};G=Math.floor(Math.max(I.y,G.h-(I.y+I.h)))}C.h>G&&(C=h.getComputedStyle(r),h.set(B,{overflowY:"scroll",height:G+"px",border:C.borderLeftWidth+" "+C.borderLeftStyle+" "+C.borderLeftColor}),r._originalStyle=r.style.cssText,r.style.border="none");
b.set(B,{id:E,style:{zIndex:this._beginZIndex+l.length},"class":"dijitPopup "+(g.baseClass||g["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:d.parent?d.parent.id:""});0==l.length&&y&&(this._firstAroundNode=y,this._firstAroundPosition=f.position(y,!0),this._aroundMoveListener=setTimeout(m.hitch(this,"_repositionAll"),50));c("config-bgIframe")&&!g.bgIframe&&(g.bgIframe=new p(B));E=g.orient?m.hitch(g,"orient"):null;k=y?q.around(B,y,k,u,E):q.at(B,d,"R"==k?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],
d.padding,E);B.style.visibility="visible";r.style.visibility="visible";r=[];r.push(n(B,"keydown",m.hitch(this,function(a){if(a.keyCode==e.ESCAPE&&d.onCancel)a.stopPropagation(),a.preventDefault(),d.onCancel();else if(a.keyCode==e.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));g.onCancel&&d.onCancel&&r.push(g.on("cancel",d.onCancel));r.push(g.on(g.onExecute?"execute":"change",m.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));
l.push({widget:g,wrapper:B,parent:d.parent,onExecute:d.onExecute,onCancel:d.onCancel,onClose:d.onClose,handlers:r});if(g.onOpen)g.onOpen(k);return k},close:function(a){for(var c=this._stack;a&&k.some(c,function(c){return c.widget==a})||!a&&c.length;){var b=c.pop(),d=b.widget,e=b.onClose;d.bgIframe&&(d.bgIframe.destroy(),delete d.bgIframe);if(d.onClose)d.onClose();for(var h;h=b.handlers.pop();)h.remove();d&&d.domNode&&this.hide(d);e&&e()}0==c.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return r.popup=new g})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(k,d,g,a,b,l,f){function h(a,c,h,f){var e=l.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||b.body(a.ownerDocument).appendChild(a);var m=null;k.some(c,function(c){var b=c.corner,l=c.pos,n=
0,g={w:{L:e.l+e.w-l.x,R:l.x-e.l,M:e.w}[b.charAt(1)],h:{T:e.t+e.h-l.y,B:l.y-e.t,M:e.h}[b.charAt(0)]},r=a.style;r.left=r.right="auto";h&&(n=h(a,c.aroundCorner,b,g,f),n="undefined"==typeof n?0:n);var q=a.style,p=q.display,k=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");r=d.position(a);q.display=p;q.visibility=k;p={L:l.x,R:l.x-r.w,M:Math.max(e.l,Math.min(e.l+e.w,l.x+(r.w>>1))-r.w)}[b.charAt(1)];k={T:l.y,B:l.y-r.h,M:Math.max(e.t,Math.min(e.t+e.h,l.y+(r.h>>1))-r.h)}[b.charAt(0)];
l=Math.max(e.l,p);q=Math.max(e.t,k);p=Math.min(e.l+e.w,p+r.w)-l;k=Math.min(e.t+e.h,k+r.h)-q;n+=r.w-p+(r.h-k);if(null==m||n<m.overflow)m={corner:b,aroundCorner:c.aroundCorner,x:l,y:q,w:p,h:k,overflow:n,spaceAvailable:g};return!n});m.overflow&&h&&h(a,m.aroundCorner,m.corner,m.spaceAvailable,f);c=m.y;var n=m.x,q=b.body(a.ownerDocument);/relative|absolute/.test(g.get(q,"position"))&&(c-=g.get(q,"marginTop"),n-=g.get(q,"marginLeft"));q=a.style;q.top=c+"px";q.left=n+"px";q.right="auto";return m}var c={TL:"BR",
TR:"BL",BL:"TR",BR:"TL"};return f.place={at:function(a,b,d,f,l){d=k.map(d,function(a){var d={corner:a,aroundCorner:c[a],pos:{x:b.x,y:b.y}};f&&(d.pos.x+="L"==a.charAt(1)?f.x:-f.x,d.pos.y+="T"==a.charAt(0)?f.y:-f.y);return d});return h(a,d,l)},around:function(c,b,f,l,p){function e(a,c){B.push({aroundCorner:a,corner:c,pos:{x:{L:A,R:A+D,M:A+(D>>1)}[a.charAt(1)],y:{T:z,B:z+E,M:z+(E>>1)}[a.charAt(0)]}})}if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){var m=d.position(b,!0);if(/^(above|below)/.test(f[0])){var n=
d.getBorderExtents(b),q=b.firstChild?d.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},x=d.getBorderExtents(c),v=c.firstChild?d.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};m.y+=Math.min(n.t+q.t,x.t+v.t);m.h-=Math.min(n.t+q.t,x.t+v.t)+Math.min(n.b+q.b,x.b+v.b)}}else m=b;if(b.parentNode)for(n="absolute"==g.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){q=d.position(b,!0);x=g.getComputedStyle(b);/relative|absolute/.test(x.position)&&(n=!1);if(!n&&/hidden|auto|scroll/.test(x.overflow)){v=
Math.min(m.y+m.h,q.y+q.h);var w=Math.min(m.x+m.w,q.x+q.w);m.x=Math.max(m.x,q.x);m.y=Math.max(m.y,q.y);m.h=v-m.y;m.w=w-m.x}"absolute"==x.position&&(n=!0);b=b.parentNode}var A=m.x,z=m.y,D="w"in m?m.w:m.w=m.width,E="h"in m?m.h:(a.deprecated("place.around: dijit/place.__Rectangle: { x:"+A+", y:"+z+", height:"+m.height+", width:"+D+" } has been deprecated.  Please use { x:"+A+", y:"+z+", h:"+m.height+", w:"+D+" }","","2.0"),m.h=m.height),B=[];k.forEach(f,function(a){var c=l;switch(a){case "above-centered":e("TM",
"BM");break;case "below-centered":e("BM","TM");break;case "after-centered":c=!c;case "before-centered":e(c?"ML":"MR",c?"MR":"ML");break;case "after":c=!c;case "before":e(c?"TL":"TR",c?"TR":"TL");e(c?"BL":"BR",c?"BR":"BL");break;case "below-alt":c=!c;case "below":e(c?"BL":"BR",c?"TL":"TR");e(c?"BR":"BL",c?"TR":"TL");break;case "above-alt":c=!c;case "above":e(c?"TL":"TR",c?"BL":"BR");e(c?"TR":"TL",c?"BR":"BL");break;default:e(a.aroundCorner,a.corner)}});c=h(c,B,p,{w:D,h:E});c.aroundNodePos=m;return c}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(k,d,g,a,b){var l=new k,f;g(function(){var h=b.getBox();l._rlh=d(window,"resize",function(){var a=b.getBox();if(h.h!=a.h||h.w!=a.w)h=a,l.emit("resize")});if(8==a("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,l.emit("resize"))},500)}a("ios")&&(d(document,"focusin",function(a){f=a.target}),d(document,"focusout",function(a){f=null}))});l.getEffectiveBox=
function(d){d=b.getBox(d);var c=f&&f.tagName&&f.tagName.toLowerCase();a("ios")&&f&&!f.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(f.type))&&(d.h*=0==orientation||180==orientation?.66:.4,c=f.getBoundingClientRect(),d.h=Math.max(d.h,c.top+c.height));return d};return l})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(k,d,g,a,b,l,
f,h){h.add("config-bgIframe",h("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||h("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var c=new function(){var c=[];this.pop=function(){if(c.length){var d=c.pop();d.style.display=""}else 9>h("ie")?(d=g.dojoBlankHtmlUrl||k.toUrl("dojo/resources/blank.html")||'javascript:""',d=document.createElement("\x3ciframe src\x3d'"+d+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):
(d=a.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role","presentation"),b.set(d,"opacity",.1)),d.tabIndex=-1;return d};this.push=function(a){a.style.display="none";c.push(a)}};d.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(h("config-bgIframe")){var d=this.iframe=c.pop();a.appendChild(d);7>h("ie")||h("quirks")?(this.resize(a),this._conn=f(a,"resize",l.hitch(this,"resize",a))):b.set(d,{width:"100%",height:"100%"})}};l.extend(d.BackgroundIframe,
{resize:function(a){this.iframe&&b.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),c.push(this.iframe),delete this.iframe)}});return d.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(k,d,g,a){return k("dijit.DropDownMenu",a,{templateString:g,baseClass:"dijitMenu",
_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a);a.stopPropagation();a.preventDefault()},_onLeftArrow:function(a){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else a.stopPropagation(),a.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t){return d("dijit._MenuBase",[n,t,p,q],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){b.toggle(this.domNode,"dijitMenuActive",a);b.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var c=m.byNode(a);return a.parentNode==this.containerNode&&c&&c.focus},postCreate:function(){var a=this,c="string"==typeof this.childSelector?this.childSelector:l.hitch(this,"childSelector");this.own(h(this.containerNode,h.selector(c,f.enter),function(){a.onItemHover(m.byNode(this))}),h(this.containerNode,h.selector(c,f.leave),function(){a.onItemUnhover(m.byNode(this))}),h(this.containerNode,h.selector(c,e),function(c){a.onItemClick(m.byNode(this),c);c.stopPropagation()}),
h(this.containerNode,h.selector(c,"focusin"),function(){a._onItemFocus(m.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,c,b,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,c)},_keyboardSearchCompare:function(a,c){return a.shortcutKey?c==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,c){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),c=/^key/.test(c._origType||
c.type)||0==c.clientX&&0==c.clientY,this._openItemPopup(a,c)):(this.onExecute(),a._onClick?a._onClick(c):a.onClick(c))},_openItemPopup:function(a,c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var b=a.popup;b.parentMenu=this;this.own(this._mouseoverHandle=h.once(b.domNode,"mouseover",l.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&
d.focusChild(a);d._cleanUp()},onExecute:l.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(a.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(k,d,g,a,b,l,f,h,c,e){return d("dijit._KeyNavContainer",[c,e,h],{connectKeyNavHandlers:function(a,c){var d=this._keyNavCodes={},e=l.hitch(this,"focusPrev"),h=l.hitch(this,"focusNext");k.forEach(a,function(a){d[a]=e});k.forEach(c,function(a){d[a]=h});d[b.HOME]=l.hitch(this,"focusFirstChild");d[b.END]=l.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){a.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);k.forEach(this.getChildren(),
l.hitch(this,"_startupChild"))},addChild:function(a,c){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
f.byNode(a))&&a.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(k,d,g,a){return d("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,d){var b=this.containerNode;if(0<d){for(b=b.firstChild;0<d;)1==b.nodeType&&d--,b=b.nextSibling;b?d="before":(b=this.containerNode,d="last")}g.place(a.domNode,b,d);
this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,d){var b=this.getChildren();a=k.indexOf(b,a);return b[a+d]},getIndexOfChild:function(a){return k.indexOf(this.getChildren(),a)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(k,d,g,a,b,l,f,h){return d("dijit._KeyNavMixin",h,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);g.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[a.HOME]=b.hitch(this,"focusFirstChild");c[a.END]=b.hitch(this,"focusLastChild");c[this.isLeftToRight()?a.LEFT_ARROW:a.RIGHT_ARROW]=b.hitch(this,"_onLeftArrow");c[this.isLeftToRight()?a.RIGHT_ARROW:a.LEFT_ARROW]=b.hitch(this,"_onRightArrow");c[a.UP_ARROW]=b.hitch(this,
"_onUpArrow");c[a.DOWN_ARROW]=b.hitch(this,"_onDownArrow")}var d=this;c="string"==typeof this.childSelector?this.childSelector:b.hitch(this,"childSelector");this.own(l(this.domNode,"keypress",b.hitch(this,"_onContainerKeypress")),l(this.domNode,"keydown",b.hitch(this,"_onContainerKeydown")),l(this.domNode,"focus",b.hitch(this,"_onContainerFocus")),l(this.containerNode,l.selector(c,"focusin"),function(a){d._onChildFocus(f.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),
a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){g.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){g.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,d,h){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var c=a.domNode;a=(a.label||(c.focusNode?c.focusNode.label:"")||c.innerText||c.textContent||"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&a==b?-1:0},_onContainerKeydown:function(c){var b=
this._keyNavCodes[c.keyCode];b?(b(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode!=a.SPACE||!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey||(c.stopImmediatePropagation(),c.preventDefault(),this._keyboardSearch(c," "))},_onContainerKeypress:function(c){c.charCode<=a.SPACE||c.ctrlKey||c.altKey||c.metaKey||(c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase()))},_keyboardSearch:function(a,d){var c=
null,e,h=0;b.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=d;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;e=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var b=this.focusedChild||null;if(1==a||!b)if(b=this._getNextFocusableChild(b,1),!b)return;a=b;do{var f=this._keyboardSearchCompare(b,e);f&&0==h++&&(c=b);if(-1==f){h=-1;break}b=this._getNextFocusableChild(b,
1)}while(b&&b!=a)})();this.onKeyboardSearch(c,a,e,h)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var c=a;do{if(a)a=this._getNext(a,b);else if(a=this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=c&&a.isFocusable())return a}while(a!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,b){if(a)for(a=a.domNode;a;)if((a=a[0>b?"previousSibling":"nextSibling"])&&"getAttribute"in a){var c=f.byNode(a);if(c)return c}return null}})})},
"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n){return k("dijit.MenuItem",[h,c,e,m],{templateString:n,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var c="",b=a;"object"===typeof b&&(b=b.label||b.value);if("string"===typeof b){var d=b.search(/{\S}/);
0<=d?(c=b.charAt(d+1),a=b.substr(0,d),b=b.substr(d+3),d=a+c+b,a=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+b):d=b;this.domNode.setAttribute("aria-label",d+" "+this.accelKey)}this.containerNode.innerHTML=a;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);g.set(this.containerNode,
"id",this.id+"_text");this.accelKeyNode&&g.set(this.accelKeyNode,"id",this.id+"_accel");d.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==l("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(q){}},_setSelected:function(c){a.toggle(this.domNode,"dijitMenuItemSelected",c)},setLabel:function(a){b.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){b.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,g.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(k,d,g,a,b,l){return k("dijit.MenuSeparator",[g,a,b],{templateString:l,buildRendering:function(){this.inherited(arguments);d.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y){function x(){}var v=d("dijit._MasterTooltip",[p,t],{duration:n.defaultDuration,templateString:u,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new r(this.domNode);this.fadeIn=g.fadeIn({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onShow")});this.fadeOut=g.fadeOut({node:this.domNode,duration:this.duration,onEnd:h.hitch(this,"_onHide")})},show:function(a,c,b,d,e,m,l){if(!this.aroundNode||this.aroundNode!==
c||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;e&&this.set("textDir",e);this.containerNode.align=d?"right":"left";var n=q.around(this.domNode,c,b&&b.length?b:w.defaultPosition,!d,h.hitch(this,"orient")),g=n.aroundNodePos;"M"==n.corner.charAt(0)&&"M"==n.aroundCorner.charAt(0)?(this.connectorNode.style.top=g.y+(g.h-this.connectorNode.offsetHeight>>1)-n.y+"px",this.connectorNode.style.left=""):"M"==n.corner.charAt(1)&&
"M"==n.aroundCorner.charAt(1)?this.connectorNode.style.left=g.x+(g.w-this.connectorNode.offsetWidth>>1)-n.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");f.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=m||x;this.onMouseLeave=l||x}},orient:function(a,c,b,d,e){this.connectorNode.style.top="";var h=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[c+"-"+b];this.domNode.style.width="auto";var f=l.position(this.domNode);if(m("ie")||m("trident"))f.w+=2;l.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),f.w)});"B"==b.charAt(0)&&"B"==c.charAt(0)?(a=l.position(a),c=this.connectorNode.offsetHeight,
a.h>h?(this.connectorNode.style.top=h-(e.h+c>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-c/2,0),a.h-c)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,f.w-d)},_onShow:function(){m("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=x},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});y.showTooltip=function(a,c,b,d,e,h,f){b&&(b=k.map(b,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));w._masterTT||(y._masterTT=w._masterTT=new v);return w._masterTT.show(a,c,b,d,e,h,f)};y.hideTooltip=function(a){return w._masterTT&&w._masterTT.hide(a)};var w=
d("dijit.Tooltip",p,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){k.forEach(this._connections||[],function(a){k.forEach(a,function(a){a.remove()})},this);this._connectIds=k.filter(h.isArrayLike(b)?b:b?[b]:[],function(c){return a.byId(c,this.ownerDocument)},this);this._connections=k.map(this._connectIds,function(b){b=a.byId(b,this.ownerDocument);var d=this.selector,f=d?function(a){return e.selector(d,a)}:function(a){return a},m=this;return[e(b,
f(c.enter),function(){m._onHover(this)}),e(b,f("focusin"),function(){m._onHover(this)}),e(b,f(c.leave),h.hitch(m,"_onUnHover")),e(b,f("focusout"),h.hitch(m,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(a){a=a.id||a;-1==k.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=k.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);
b.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;k.forEach(h.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);
switch(a){case "DORMANT":this._connectNode&&(w.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case "SHOWING":var c=this.getContent(this._connectNode);if(!c){this.set("state","DORMANT");return}w.show(c,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,h.hitch(this,"set","state","SHOWING"),h.hitch(this,"set","state","HIDE TIMER"));
this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},
onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");k.forEach(this._connections||[],function(a){k.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});w._MasterTooltip=v;w.show=y.showTooltip;w.hide=y.hideTooltip;w.defaultPosition=["after-centered","before-centered"];return w})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(k,d,g,a,b){var l={};k.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),
function(b){l[b]=a[b]});g.mixin(l,{defaultDuration:d.defaultDuration||200});g.mixin(b,l);return b})},"mw-filebrowser/FileBrowser":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/query dojo/dom-style dojo/Evented dojo/has dojo/on dojo/keys dojo/_base/event dojo/text!./filebrowser.html dijit/_TemplatedMixin dijit/_WidgetBase dijit/Tooltip dijit/a11y dijit/focus dgrid/extensions/DnD dgrid/Keyboard dgrid/OnDemandGrid dgrid/Selection dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder mw-filename-utils/FileNameUtil mw-gesture/GestureDetector mw-form/ContextMenu ./actions/contextmenu/ActionsContextMenuBuilder ./actions/keyboard/KeyboardActionsBuilder ./columns/ColumnHiderContextMenuBuilder ./grid/draganddrop/FileBrowserGridDnDSource ./grid/workarounds/ColumnResizer ./grid/FileBrowserSortProperty ./grid/GridHelper dojo/_base/Deferred".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A,z,D,E,B,C,G,I,N,L,J,O,F){var ba=!1,Y=function(c){function b(a){for(var c in a.types)if("Files"===a.types[c])return!0;return!1}var d,e,h;c.fileBrowserContainer.ondragstart=function(a){b(a.dataTransfer)&&a.preventDefault()};c.fileBrowserContainer.ondragenter=function(f){c.grid.clearSelection();var m=c.grid.row(f),l=m&&m.element;h!==l&&(d&&a.remove(d,"highlightDropTargetRow"),b(f.dataTransfer)&&(f.preventDefault(),(m=m&&m.data)&&!m.isDirectory&&(m=
c.grid.store.get(m.parent)),f=f.target.classList,f=m&&m.isDirectory&&D.isWritable(m)&&m!==c.grid.getCurrentFolderInfo()&&(f.contains("dgrid-cell-data")||f.contains("iconOverlay"))?!0:!1,f?(f=c.grid.row(D.pathFromFileInfo(m)),m=f.element,a.add(m,"highlightDropTargetRow"),d=m,e=f,h=l):h=e=d=null))};c.fileBrowserContainer.ondragleave=function(c){c.preventDefault();!c.relatedTarget&&d&&a.remove(d,"highlightDropTargetRow");c.dataTransfer.dropEffect="none"};c.fileBrowserContainer.ondragover=function(a){b(a.dataTransfer)&&
(a.preventDefault(),a.dataTransfer.dropEffect="copy")};c.fileBrowserContainer.ondragend=function(a){a.preventDefault()};c.fileBrowserContainer.ondrop=function(b){b.preventDefault();setTimeout(function(){d&&a.remove(d,"highlightDropTargetRow")},500);var h=e?e.data.path:D.pathFromFileInfo(c.fileService.getCurrentFolderInfo());c.emit("fileBrowserDropEvent",b,h)}};return k([p,q,f],{templateString:n,idAttr:"data-tag",collapseIcon:"collapseIcon",expandIcon:"expandIcon",constructor:function(a){a=a||{};this.fileService=
a.fileService;this._actionManager=a.actionManager;this.columnRegistry=a.columnRegistry;this.allowDnD=a.allowDnD;this.keybindings=a.keybindings;this.contextMenuEnabled=a.contextMenuEnabled;this.contextMenuBuilder=a.contextMenuBuilder;this.layoutConfiguration=a.layoutConfiguration},postCreate:function(){this.inherited(arguments);if(this.layoutConfiguration){var a=this.layoutConfiguration.SortColumn.value;var c=this.layoutConfiguration.SortDescending.value;var e=this.layoutConfiguration.ColumnOrder.value;
var f=this.layoutConfiguration.ColumnSizes.value;var m=this.layoutConfiguration.VisibleColumns.value}this.tooltip=new t({connectId:this.currentFolderNode,position:["above","after"]});if(!J.getFBCompareFunction()){a=this.columnRegistry.getColumn(a)?a:"name";c=c||!1;var l=this.columnRegistry.getCompareFunction(a,c);J.setFBSortProperties(l,a,c)}if(e){var n=e.reduce(function(a,c,b){if(this.columnRegistry.getColumn(c)){var d=this.columnRegistry.getColumn(c);f&&(d.width=f[b]);m&&(d.hidden=-1===m.indexOf(c));
a.push(d)}return a}.bind(this),[]);var q=this.columnRegistry.getColumns().map(function(a){return a.field}),p=n.map(function(a){return a.field});q.reduce(function(a,c,b){-1===p.indexOf(c)&&a.push(b);return a},[]).forEach(function(a){n.splice(a,0,this.columnRegistry.getColumn(q[a]))}.bind(this))}e=function(a,c){a=a.connected;if(a){a=b("\x3e.dgrid-row",a);if(0<a.length)var d=a[0].observerIndex;void 0!==d&&this.grid.observers[d].remove()}}.bind(this);this.own(this.grid=k([v,x,w,y,A,z,L,O])({minRowsPerPage:1E3,
sort:J.getFBCompareFunction(),store:this.fileService.fileStore.store,columns:n||this.columnRegistry.getColumns(),selectionMode:"custom",allowSelectAll:!0,deselectOnRefresh:!1,cellNavigation:!1,dndConstructor:N,allowSelect:this._handleRowSelection,dndParams:{allowNested:!0,skipForm:!0,isSource:this.allowDnD}},this.dgridContainer),g.before(this.grid,"removeRow",e,!0),g.after(this.grid,"expand",d.hitch(this,this.onExpandOrCollapse),!0),g.after(this.grid.dndSource,"onFilesDrop",d.hitch(this,"onFilesDrop"),
!0),g.after(this.grid,"renderRow",d.hitch(this,this.handleScreenReader),!1));this.contextMenuEnabled?(new C).createContextMenu(this):this.contextMenuBuilder&&this.contextMenuBuilder.createContextMenu(this);this.own(this.grid.headerContextMenu=new B({targetNodes:["#"+this.grid.id+" .dgrid-header"]}));I.buildContextMenu(this.grid.headerContextMenu,this.columnRegistry,this.grid,d.hitch(this,this.updateColumnVisible));this.own(g.after(this.fileService,"onMove",d.hitch(this,this._handleMoveFile),!0),g.after(this.fileService,
"onRename",d.hitch(this,this._handleRenameFile),!0));this.grid.on("dgrid-editor-show",d.hitch(this,this._initializeEditor));this.grid.on("dgrid-editor-hide",d.hitch(this,this._hideEditor));this.grid.on(".dgrid-content:mousedown",d.hitch(this,this._handleWhiteSpaceMouseDown));this.grid.on(".dgrid-row:dblclick",d.hitch(this,this._handleRowDoubleClick));this.grid.on("dgrid-select",d.hitch(this,this._handleGridSelectionChange));this.grid.on("dgrid-deselect",d.hitch(this,this._handleGridSelectionChange));
this.grid.on("dgrid-sort",d.hitch(this,this._handleSort));this.grid.on(".dgrid-header-row:focusin",d.hitch(this,this._handleGridHeaderFocus));this.grid.on(".dgrid-header-row:focusout",d.hitch(this,this._handleGridHeaderBlur));this.grid.on(".dgrid-row:focusin",d.hitch(this,this._handleGridRowFocus));this.grid.on(".dgrid-row:focusout",d.hitch(this,this._handleGridRowBlur));this.grid.on(".dgrid-content:focusin",d.hitch(this,this._handleGridContentFocus));if(h("ios")){var r=this;(new E(this.grid.domNode)).events.doubleTap.addEventHandler(function(a){r._handleRowDoubleClick(a)})}Y(this);
this.hiddenFileInputForUpload.onchange=d.hitch(this,this._handleFileInputChange,this.hiddenFileInputForUpload,this.uploadForm);G.setNavigationKeyBindings(this,this._actionManager);this._actionManager.on("actions-updated",d.hitch(this,function(a){G.updateActionsKeyBindings(a,this.keybindings,this)}))},_handleRowSelection:function(a){if(a)return a=a.data&&"group"===a.data.type?!0:!1,!a},updateColumnVisible:function(a,c){this.grid.toggleColumnHiddenState(a,!c);for(var b=this.grid.headerContextMenu.getChildren(),
d=0;d<b.length;d++){var e=b[d];if(e.id===a){e.set("checked",c);break}}this.emit("columnstatechange",{columnId:a,makeVisible:c})},_handleFileInputChange:function(a,c){this.onFileInputChange(a,c)},startupFB:function(){this.grid.startup()},renameFile:function(a){a=D.pathFromFileInfo(a[0]);a=this.grid.row(a);a=this.grid.cell(a,this.columnRegistry.getColumn("name").id);c.emit(a.element,"renameEvent",{});var b=this,d=new F,e=this.grid.on("dgrid-datachange",function(a){a.preventDefault();a={fileInfo:b.grid.row(a).data,
newName:a.value};d.resolve(a);e.remove()}),h=this.grid.on("dgrid-editor-hide",function(a){d.isResolved()||d.reject();e.remove();h.remove()});return d.promise},_initializeEditor:function(a){var b=a.cell.element,e=a.column,h={alreadyHooked:!0};e.renderCell(e.grid.row(b).data,a.grid._activeValue,b,a.grid._activeOptions?d.delegate(h,a.grid._activeOptions):h);h=b.childNodes;var f=h[1].getElementsByClassName("fileIcon")[0],m=h[1].getElementsByClassName("iconOverlay")[0],l=h[1].getElementsByClassName("dgrid-cell-data")[0],
n=window.getComputedStyle(l).paddingLeft;e=a.editor.domNode;e.style.width=b.offsetWidth-f.offsetWidth-m.offsetWidth-parseFloat(n)-parseFloat(h[1].style.marginLeft)+"px";l.parentNode.removeChild(l);a.grid.row(a).element.style.backgroundColor="gray";h[1].style.marginTop=window.getComputedStyle(b).paddingTop;b.style.paddingTop="0px";b.style.paddingBottom="0px";b.style.paddingRight="0px";e.style.height=b.offsetHeight-2+"px";c(e,"click, dblclick, contextmenu",function(a){a.stopPropagation()});b=this.grid.row(a).data;
h=b.name;b=-1===h.lastIndexOf(".")||b.isDirectory?h.length:h.lastIndexOf(".");h=a.editor.textbox;h.style.height=e.style.height;h.createTextRange?(a.preventDefault(),e=h.createTextRange(),e.collapse(),e.moveStart("character",0),e.moveEnd("character",b),e.select()):h.setSelectionRange(0,b);this.emit("filebrowser-editor-show",a)},_handleFileNameChanged:function(a){a.preventDefault();this.onFileNameChanged(this.grid.row(a).data,a.value)},resize:function(a){var c=this.domNode.getElementsByClassName("dijitValidationTextBox");
1===c.length&&(this._resizeHappened=!0,dijit.getEnclosingWidget(c[0]).focusNode.blur());l.set(this.domNode,{height:a.h.toString()+"px",width:a.w.toString()+"px"});l.set(this.dgridContainer,{height:a.h.toString()+"px",width:a.w.toString()+"px"});this.grid.resize()},changeCurrentFolder:function(a){this.grid.setCurrentFolderInfo(a);this.grid.set("query",{parent:D.pathFromFileInfo(a)});this.grid.clearSelection();this.onSelectionChange(this.grid.getSelectedFileInfos(),this.grid.getSelectedFilePaths());
ba&&(this.grid._focusedNode=null,this.grid.focus(),this.setShouldGiveFocusBackToDgrid(!1))},setShouldGiveFocusBackToDgrid:function(a){ba=a},_getColumnSet:function(a){for(var c={},b=0;b<a.length;b++)c[a[b]]=!0;return c},updateCompareFunction:function(a,c){var b=this.columnRegistry.getCompareFunction(a,c);J.setFBSortProperties(b,a,c);this.grid.set("sort",b)},getCurrentSortAttributes:function(){return J.getFBSortArray()[0]},_handleSort:function(a){a.preventDefault();a=a.sort[0];var c=J.getFBSortArray()[0];
this.updateCompareFunction(a.attribute,c.attribute===a.attribute&&!c.descending)},_handleMoveFile:function(a){a=D.pathFromFileInfo(a);var c=D.getParentPath(a);a=this.grid._expanded[c]||c===D.pathFromFileInfo(this.fileService.getCurrentFolderInfo())?a:c;this.grid.clearRemovedFocus();this.grid.focus(this.grid.row(a).element)},_handleRenameFile:function(a){this.grid.clearRemovedFocus();this.grid.focus(this.grid.row(D.pathFromFileInfo(a)).element)},_handleWhiteSpaceMouseDown:function(a){this.grid.row(a)||
a.ctrlKey||a.shiftKey||h("mac")&&a.metaKey||this.grid.clearSelection()},_handleRowDoubleClick:function(c){if(!a.contains(c.target,"dgrid-expando-icon")&&(c=this.grid.row(c))&&!c.data.isGroupHeader)this.onDoubleClick(c.data)},_handleGridSelectionChange:function(){this.onSelectionChange(this.grid.getSelectedFileInfos(),this.grid.getSelectedFilePaths())},onSelectionChange:function(a,c){},onDoubleClick:function(a){},onFilesDrop:function(a,c,b){},onFileNameChanged:function(a,c){},onExpandOrCollapse:function(a){var c=
this.grid.row(a).id,b=this.grid.row(a).data,d=this.grid.row(a).element;if(b&&!b.isGroupHeader&&((b=!!this.grid._expanded[c])?d.setAttribute("aria-expanded","true"):d.setAttribute("aria-expanded","false"),this.fileService.onExpandOrCollapse))this.fileService.onExpandOrCollapse(c,b);a.data&&a.data.isDirectory&&this.columnRegistry.getColumn("name").setNodeClassName(a,this.grid._expanded[a.id])},_hideEditor:function(a){a.grid.row(a).element.style.removeProperty("background-color");var c=a.cell.element;
c.childNodes[1].style.removeProperty("marginTop");var b=a.editor.domNode;b.style.removeProperty("height");b.style.removeProperty("width");c.style.removeProperty("padding-top");c.style.removeProperty("padding-bottom");c.style.removeProperty("padding-right");a.editor.textbox.style.removeProperty("height");this.emit("filebrowser-editor-hide",a)},_handleGridHeaderFocus:function(c){a.add(c.target,"dgrid-header-focus");this.removeFocusAndSelection()},_handleGridHeaderBlur:function(c){this.grid.headerContextMenu.isMenuOpen()||
(a.remove(c.target,"dgrid-header-focus"),this.onFocus(),(c=this.grid._focusedNode)&&c.classList.add("dgrid-focus"))},_handleGridRowFocus:function(a){this.onFocus();(a=this.grid._focusedNode)&&a.classList.add("dgrid-focus")},_handleGridRowBlur:function(a){a.target.classList.contains("dgrid-selected")||this.removeFocusAndSelection()},_handleGridContentFocus:function(){this.onFocus();if(!this.grid._focusedNode){var a=this.grid.domNode.getElementsByClassName("dgrid-row")[0];a&&(this.grid._focusedNode=
a,a.classList.add("dgrid-focus"))}},setFocusAndSelection:function(a){this.grid.clearRemovedFocus();this.grid.focus(a);this.grid.clearSelection();this.grid.select(a)},onFocus:function(){a.remove(this.domNode,"fileBrowser2-blur")},_isAnyDialogOpen:function(){return this._resizeHappened||this._contextMenuVisible||0!==document.getElementsByClassName("calloutContent").length},onBlur:function(){this._isAnyDialogOpen()||(this.removeFocusAndSelection(),this.setShouldGiveFocusBackToDgrid(!1));this._contextMenuVisible=
this._resizeHappened=!1},removeFocusAndSelection:function(){a.add(this.domNode,"fileBrowser2-blur");var c=this.grid._focusedNode;c&&c.classList.remove("dgrid-focus")},getFocusableElements:function(){if(event.keyCode===e.TAB){var a=r._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}return{focusableElements:[this._firstFocusItem,this._lastFocusItem]}},handleScreenReader:function(a,c){var b=this.grid.getCurrentFolderPath();
c=c[0];"\\"===b[b.length-1]&&(b=b.slice(0,b.length-1));var d=c.separator;"\\"===d&&(d="\\\\");d=new RegExp(d,"g");b=(c.path.slice(b.length).match(d)||[]).length;a.setAttribute("aria-level",b);this.grid._expanded[c.path]?a.setAttribute("aria-expanded","true"):a.setAttribute("aria-expanded","false");return a},destroy:function(){this.inherited(arguments);this.emit("destroyed")}})})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection ../util/touch ./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p){var t=k(c,{grid:null,getObject:function(a){var c=this.grid;return c.store.get(a.id.slice(c.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(c,b,d){var e=this,h=this._targetAnchor=this.targetAnchor,f=this.grid,m=f.store;!this.before&&h&&(h=h.nextSibling);h=h&&f.row(h);a.when(h&&m.get(h.id),function(a){if(e!=c)e.onDropExternal(c,b,d,a);else e.onDropInternal(b,d,a)})},onDropInternal:function(c,
b,d){var e=this.grid,h=e.store,f=this,m=f._targetAnchor,l;m&&(l=this.before?m.previousSibling:m.nextSibling);m=e.row(c[0]);(b||l!==c[0]&&(d||!m||e.down(m).element!=c[0]))&&c.forEach(function(c){a.when(f.getObject(c),function(a){var c=h.getIdentity(a);h[b&&h.copy?"copy":"put"](a,{before:d});f._selectedNodes[c]&&(f._selectedNodes[c]=e.row(c).element)})})},onDropExternal:function(c,b,d,e){var h=this.grid.store,f=c.grid;b.forEach(function(b,m){a.when(c.getObject(b),function(l){d||(f?a.when(f.store.getIdentity(l),
function(a){!m&&c.selectNone();c.delItem(b.id);f.store.remove(a)}):c.deleteSelectedNodes());h[h.copy?"copy":"put"](l,{before:e})})})},onDndStart:function(a,c,b){this.inherited(arguments);a==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),e.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){h("touch")&&this.isDragging&&1<p.countCurrentTouches(a,this.grid.touchNode)?(f.publish("/dnd/cancel"),e.manager().stopDrag()):this.inherited(arguments)},
onMouseMove:function(a){(!h("touch")||1>=p.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&c.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new m,c;for(c in this.grid.selection)a.push(this._selectedNodes[c]);return a}});k=k(q,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:t,postMixInProperties:function(){this.inherited(arguments);
this.dndParams=d.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(a){e[a.id]=a.element}function c(a){delete e[a.id];n(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||t)(this.bodyNode,d.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var e=this.dndSource._selectedNodes={};this.on("dgrid-select",function(c){g.forEach(c.rows,a)});this.on("dgrid-deselect",function(a){g.forEach(a.rows,
c)});b.after(this,"destroy",function(){delete this.dndSource._selectedNodes;e=null;this.dndSource.destroy()},!0)},insertRow:function(a){var c=this.inherited(arguments),b="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];n(c,".dojoDndItem");this.dndSource.setItem(c.id,{data:a,type:b instanceof Array?b:[b]});return c},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});k.GridSource=t;return k})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n){g.isAsync||h(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var q=d("dojo.dnd.Source",m,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(d,e){a.mixin(this,a.mixin({},e));d=this.accept;if(d.length)for(this.accept={},e=0;e<d.length;++e)this.accept[d[e]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=
!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&b.add(this.node,"dojoDndSource");this.targetState="";this.accept&&b.add(this.node,"dojoDndTarget");this.horizontal&&b.add(this.node,"dojoDndHorizontal");this.topics=[c.subscribe("/dnd/source/over",a.hitch(this,"onDndSourceOver")),c.subscribe("/dnd/start",a.hitch(this,"onDndStart")),c.subscribe("/dnd/drop",a.hitch(this,"onDndDrop")),c.subscribe("/dnd/cancel",a.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,c){if(this==a)return!this.copyOnly||
this.selfAccept;for(var b=0;b<c.length;++b){for(var d=a.getItem(c[b].id).type,e=!1,h=0;h<d.length;++h)if(d[h]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,c){if(a)return!0;2>arguments.length&&(c=this==n.manager().target);if(c){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){q.superclass.destroy.call(this);k.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=
this.targetState){q.superclass.onMouseMove.call(this,a);var c=n.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var b=this.getSelectedNodes();b.length&&c.startDrag(this,b,this.copyState(e.getCopyKeyState(a),!0))}this.isDragging&&(b=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=l.position(this.current,!0)),b=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/
2==l.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||b!=this.before)&&(this._markTargetAnchor(b),c.canDrop(!this.current||c.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(a){this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&e.isFormElement(a)||(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,q.superclass.onMouseDown.call(this,a))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=
!1,q.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=n.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,c,b){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?b?"Copied":"Moved":"");c=this.accept&&this.checkAcceptance(a,c);this._changeState("Target",c?"":"Disabled");
this==a&&n.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,c,b,d){if(this==d)this.onDrop(a,c,b);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,c,b){if(this!=a)this.onDropExternal(a,c,b);else this.onDropInternal(c,b)},onDropExternal:function(a,c,b){var d=this._normalizedCreator;this._normalizedCreator=
this.creator?function(c,b){return d.call(this,a.getItem(c.id).data,b)}:b?function(c){var b=a.getItem(c.id);c=c.cloneNode(!0);c.id=e.getUniqueId();return{node:c,data:b.data,type:b.type}}:function(c){var b=a.getItem(c.id);a.delItem(c.id);return{node:c,data:b.data,type:b.type}};this.selectNone();b||this.creator||a.selectNone();this.insertNodes(!0,c,this.before,this.current);!b&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,c){var b=this._normalizedCreator;
if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?function(a,c){return b.call(this,this.getItem(a.id).data,c)}:function(a){var c=this.getItem(a.id);a=a.cloneNode(!0);a.id=e.getUniqueId();return{node:a,data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var c=this.getItem(a.id);return{node:a,data:c.data,type:c.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=b}},
onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){q.superclass.onOverEvent.call(this);n.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){q.superclass.onOutEvent.call(this);n.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!f.isLeft(a))return!1;
if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(b.contains(a,"dojoDndHandle"))return!0;if(b.contains(a,"dojoDndItem")||b.contains(a,"dojoDndIgnore"))break}return!1}});return q})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(k,d,g,a){var b=g.getObject("dojo.dnd",!0);b.getCopyKeyState=function(a){return a[k("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){do var l=d._scopeName+"Unique"+ ++b._uniqueId;
while(a.byId(l));return l};b._empty={};b.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};return b})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n){var q=d("dojo.dnd.Selector",n,{constructor:function(b,
d){d||(d={});this.singular=d.singular;this.autoSync=d.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(c(this.node,e.press,a.hitch(this,"onMouseDown")),c(this.node,e.release,a.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new h,c=m._empty,d;for(d in this.selection)d in c||a.push(b.byId(d));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,c){this._addItemClass(b.byId(c),
"Selected");this.selection[c]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=m._empty,c;for(c in this.selection)if(!(c in a)){var d=b.byId(c);this.delItem(c);l.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,c){c=c||g.global;var b=this.selection,d=m._empty,e;for(e in b)e in d||a.call(c,this.getItem(e),e,this)},sync:function(){q.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],c=m._empty,
b;for(b in this.selection)b in c||this.getItem(b)||a.push(b);k.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,c,b,d){var e=this._normalizedCreator;this._normalizedCreator=function(c,b){c=e.call(this,c,b);a?(this.anchor?this.anchor!=c.node&&(this._removeItemClass(c.node,"Anchor"),this._addItemClass(c.node,"Selected")):(this.anchor=c.node,this._removeItemClass(c.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[c.node.id]=1):(this._removeItemClass(c.node,
"Selected"),this._removeItemClass(c.node,"Anchor"));return c};q.superclass.insertNodes.call(this,c,b,d);this._normalizedCreator=e;return this},destroy:function(){q.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!m.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,f.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){m.getCopyKeyState(a)||
this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var b=0,d;b<c.length&&(d=c[b],d!=this.anchor&&d!=this.current);++b);for(++b;b<c.length;++b){d=c[b];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==
this.current?m.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):m.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),
this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},
onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=c(this.node,e.move,a.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=m._empty,c;for(c in this.selection)if(!(c in a)){var d=b.byId(c);d&&this._removeItemClass(d,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),
this.anchor=null);return this}});return q})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n,q,p){d=d("dojo.dnd.Container",c,{skipForm:!1,allowNested:!1,constructor:function(c,b){this.node=l.byId(c);b||(b={});this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&l.byId(b.dropParent);
this.map={};this.current=null;this.containerState="";f.add(this.node,"dojoDndContainer");b&&b._skipStartup||this.startup();this.events=[m(this.node,q.over,a.hitch(this,"onMouseOver")),m(this.node,q.out,a.hitch(this,"onMouseOut")),m(this.node,"dragstart",a.hitch(this,"onSelectStart")),m(this.node,"selectstart",a.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,c){this.map[a]=c},delItem:function(a){delete this.map[a]},forInItems:function(a,
c){c=c||g.global;var b=this.map,d=p._empty,e;for(e in b)e in d||a.call(c,b[e],e,this);return c},clearItems:function(){this.map={}},getAllNodes:function(){return n((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(c){if(c.id){var b=this.getItem(c.id);if(b){a[c.id]=b;return}}else c.id=p.getUniqueId();b=c.getAttribute("dndType");var d=c.getAttribute("dndData");a[c.id]={data:d||c.innerHTML,type:b?b.split(/\s*,\s*/):["text"]}},this);
this.map=a;return this},insertNodes:function(a,c,b){this.parent.firstChild?c?b||(b=this.parent.firstChild):b&&(b=b.nextSibling):b=null;if(b)for(c=0;c<a.length;++c){var d=this._normalizedCreator(a[c]);this.setItem(d.node.id,{data:d.data,type:d.type});b.parentNode.insertBefore(d.node,b)}else for(c=0;c<a.length;++c)d=this._normalizedCreator(a[c]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){k.forEach(this.events,function(a){a.remove()});
this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,c,b){a._skipStartup=!0;return new b(c,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=p._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var c=a.relatedTarget;c&&c!=this.node;)try{c=c.parentNode}catch(u){c=null}c||(this._changeState("Container",
"Over"),this.onOverEvent());c=this._getChildByEvent(a);this.current!=c&&(this.current&&this._removeItemClass(this.current,"Over"),c&&this._addItemClass(c,"Over"),this.current=c)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(r){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.skipForm&&p.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},
onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,c){var b="dojoDnd"+a;a=a.toLowerCase()+"State";f.replace(this.node,b+c,b+this[a]);this[a]=c},_addItemClass:function(a,c){f.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){f.remove(a,"dojoDndItem"+c)},_getChildByEvent:function(a){if(a=a.target)for(var c=a.parentNode;c;a=c,c=a.parentNode)if((c==this.parent||this.allowNested)&&f.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(c,b){c=(this.creator||
this.defaultCreator).call(this,c,b);a.isArray(c.type)||(c.type=["text"]);c.node.id||(c.node.id=p.getUniqueId());f.add(c.node,"dojoDndItem");return c}});p._createNode=function(a){return a?function(c){return h.create(a,{innerHTML:c})}:p._createSpan};p._createTrTd=function(a){var c=h.create("tr");h.create("td",{innerHTML:a},c);return c};p._createSpan=function(a){return h.create("span",{innerHTML:a})};p._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};p._defaultCreator=function(c){c=c.tagName.toLowerCase();
var b="tbody"==c||"thead"==c?p._createTrTd:p._createNode(p._defaultCreatorNodes[c]);return function(c,d){var e=c&&a.isObject(c);if(e&&c.tagName&&c.nodeType&&c.getAttribute){var h=c.getAttribute("dndData")||c.innerHTML;e=(e=c.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"]}else h=e&&c.data?c.data:c,e=e&&c.type?c.type:["text"],c=("avatar"==d?p._createSpan:b)(String(h));c.id||(c.id=p.getUniqueId());return{node:c,data:h,type:e}}};return d})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p){var t=d("dojo.dnd.Manager",[l],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:f("touch")?4:16,OFFSET_Y:f("touch")?4:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=!!this.target,this.avatar.update());e.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=
!1,this.avatar.update(),e.publish("/dnd/source/over",null)):e.publish("/dnd/source/over",null)},startDrag:function(d,h,f){function l(a){a.preventDefault();a.stopPropagation()}q.autoScrollStart(a.doc);this.source=d;this.nodes=h;this.copy=!!f;this.avatar=this.makeAvatar();a.body().appendChild(this.avatar.node);e.publish("/dnd/start",d,h,this.copy);this.events=[c(a.doc,m.move,g.hitch(this,"onMouseMove")),c(a.doc,m.release,g.hitch(this,"onMouseUp")),c(a.doc,"keydown",g.hitch(this,"onKeyDown")),c(a.doc,
"keyup",g.hitch(this,"onKeyUp")),c(a.doc,"dragstart",l),c(a.body(),"selectstart",l)];d="dojoDnd"+(f?"Copy":"Move");b.add(a.body(),d)},canDrop:function(a){a=!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){b.remove(a.body(),["dojoDndCopy","dojoDndMove"]);k.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new p(this)},updateAvatar:function(){this.avatar.update()},
onMouseMove:function(a){var c=this.avatar;c&&(q.autoScrollNodes(a),c=c.node.style,c.left=a.pageX+this.OFFSET_X+"px",c.top=a.pageY+this.OFFSET_Y+"px",c=!!this.source.copyState(n.getCopyKeyState(a)),this.copy!=c&&this._setCopyStatus(c));f("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var c=!!this.source.copyState(n.getCopyKeyState(a));e.publish("/dnd/drop/before",this.source,this.nodes,c,this.target,a);e.publish("/dnd/drop",this.source,this.nodes,
c,this.target,a)}else e.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case h.CTRL:a=!!this.source.copyState(!0);this.copy!=a&&this._setCopyStatus(a);break;case h.ESCAPE:e.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==h.CTRL&&(a=!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(c){this.copy=c;this.source._markDndStatus(this.copy);this.updateAvatar();b.replace(a.body(),"dojoDnd"+
(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});n._manager=null;t.manager=n.manager=function(){n._manager||(n._manager=new t);return n._manager};return t})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(k,d,g,a,b,l){var f={};k.setObject("dojo.dnd.autoscroll",f);f.getViewport=l.getBox;f.V_TRIGGER_AUTOSCROLL=32;f.H_TRIGGER_AUTOSCROLL=32;f.V_AUTOSCROLL_VALUE=16;f.H_AUTOSCROLL_VALUE=16;var h,
c=g.doc,e=Infinity,m=Infinity;f.autoScrollStart=function(a){c=a;h=l.getBox(c);a=g.body(c).parentNode;e=Math.max(a.scrollHeight-h.h,0);m=Math.max(a.scrollWidth-h.w,0)};f.autoScroll=function(a){var b=h||l.getBox(c),d=g.body(c).parentNode,n=0,k=0;a.clientX<f.H_TRIGGER_AUTOSCROLL?n=-f.H_AUTOSCROLL_VALUE:a.clientX>b.w-f.H_TRIGGER_AUTOSCROLL&&(n=Math.min(f.H_AUTOSCROLL_VALUE,m-d.scrollLeft));a.clientY<f.V_TRIGGER_AUTOSCROLL?k=-f.V_AUTOSCROLL_VALUE:a.clientY>b.h-f.V_TRIGGER_AUTOSCROLL&&(k=Math.min(f.V_AUTOSCROLL_VALUE,
e-d.scrollTop));window.scrollBy(n,k)};f._validNodes={div:1,p:1,td:1};f._validOverflow={auto:1,scroll:1};f.autoScrollNodes=function(c){for(var e,h,m,l,n,k,x=0,v=0,w=c.target;w;){if(1==w.nodeType&&w.tagName.toLowerCase()in f._validNodes){m=b.getComputedStyle(w);l=m.overflow.toLowerCase()in f._validOverflow;n=m.overflowX.toLowerCase()in f._validOverflow;k=m.overflowY.toLowerCase()in f._validOverflow;if(l||n||k)e=a.getContentBox(w,m),h=a.position(w,!0);if(l||n){m=Math.min(f.H_TRIGGER_AUTOSCROLL,e.w/2);
n=c.pageX-h.x;if(d("webkit")||d("opera"))n+=g.body().scrollLeft;x=0;0<n&&n<e.w&&(n<m?x=-m:n>e.w-m&&(x=m),w.scrollLeft+=x)}if(l||k){l=Math.min(f.V_TRIGGER_AUTOSCROLL,e.h/2);k=c.pageY-h.y;if(d("webkit")||d("opera"))k+=g.body().scrollTop;v=0;0<k&&k<e.h&&(k<l?v=-l:k>e.h-l&&(v=l),w.scrollTop+=v)}if(x||v)return}try{w=w.parentNode}catch(A){w=null}}f.autoScroll(c)};return f})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(k,d,g,a,b,l,f,h){return k("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var c=l.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,d=l.create("tbody",null,c),h=l.create("tr",null,d),g=l.create("td",null,h),k=Math.min(5,this.manager.nodes.length),t=0;f("highcontrast")&&l.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},g);l.create("span",{innerHTML:b.generateText?
this._generateText():""},g);for(a.set(h,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});t<k;++t){if(b.creator)var r=b._normalizedCreator(b.getItem(this.manager.nodes[t].id).data,"avatar").node;else r=this.manager.nodes[t].cloneNode(!0),"tr"==r.tagName.toLowerCase()&&(h=l.create("table"),l.create("tbody",null,h).appendChild(r),r=h);r.id="";h=l.create("tr",null,d);g=l.create("td",null,h);g.appendChild(r);a.set(h,{"class":"dojoDndAvatarItem",style:{opacity:(9-t)/10}})}this.node=c},destroy:function(){l.destroy(this.node);
this.node=!1},update:function(){b.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(f("highcontrast")){var a=g.byId("a11yIcon"),d="+";this.manager.canDropFlag&&!this.manager.copy?d="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(d="x"):d="o";a.innerHTML=d}h("tr.dojoDndAvatarHeader td span"+(f("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"put-selector/put":function(){(function(k){var d,g=/[-+,> ]/;k([],d=function(a,b){function l(b){function d(){u&&r&&u!=r&&(r==b&&(m||(m=g.test(w)&&a.createDocumentFragment()))?m:r).insertBefore(u,t||null)}for(var m,k,t,r,u,y=arguments,x=y[0],v=0;v<y.length;v++){var w=y[v];if("object"==typeof w){k=!1;if(w instanceof Array){u=a.createDocumentFragment();for(var A=0;A<w.length;A++)u.appendChild(l(w[A]));w=u}if(w.nodeType)u=w,d(),r=w,t=0;else for(A in w)u[A]=w[A]}else if(k)k=!1,u.appendChild(a.createTextNode(w));
else{1>v&&(b=null);k=!0;if(x=w.replace(f,function(f,m,g,n,q,k){m&&(d(),"-"==m||"+"==m?(r=(t=u||r).parentNode,u=null,"+"==m&&(t=t.nextSibling)):("\x3c"==m?r=u=(u||r).parentNode:(","==m?r=b:u&&(r=u),u=null),t=0),u&&(r=u));if((f=!g&&n)||!u&&(g||q))"$"==f?(f=y[++v],r.appendChild(a.createTextNode(f))):(f=f||l.defaultTag,(m=e&&y[v+1]&&y[v+1].name)&&(f="\x3c"+f+' name\x3d"'+m+'"\x3e'),u=c&&~(h=f.indexOf("|"))?a.createElementNS(c[f.slice(0,h)],f.slice(h+1)):a.createElement(f));if(g)if("$"==n&&(n=y[++v]),
"#"==g)u.id=n;else if(m=(f=u.className)&&(" "+f+" ").replace(" "+n+" "," "),"."==g)u.className=f?(m+n).substring(1):n;else if("!"==w){var p;e?l("div",u,"\x3c").innerHTML="":(p=u.parentNode)&&p.removeChild(u)}else m=m.substring(1,m.length-1),m!=f&&(u.className=m);q&&("$"==k&&(k=y[++v]),"style"==q?u.style.cssText=k:(g="!"==q.charAt(0)?(q=q.substring(1))&&"removeAttribute":"setAttribute",k=""===k?q:k,c&&~(h=q.indexOf("|"))?u[g+"NS"](c[q.slice(0,h)],q.slice(h+1),k):u[g](q,k)));return""}))throw new SyntaxError("Unexpected char "+
x+" in "+w);d();r=x=u||r}}b&&m&&b.appendChild(m);return x}g=b||g;var f=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w\u00A0-\uFFFF%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,h,c=!1;a=a||document;var e="object"==typeof a.createElement;l.addNamespace=function(b,d){a.createElementNS?(c||(c={}))[b]=d:a.namespaces.add(b,d)};l.defaultTag="div";l.forDocument=d;return l})})(function(k,d,g){g=g||d;"function"===typeof define?define([],function(){return g()}):"undefined"==typeof window?require("./node-html")(module,
g):put=g()})},"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List ./util/has-pointer ./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(k,d,g,a,b,l,f,h,c,e){function m(a,c){c=a.unselectable=c?"on":"";a=a.getElementsByTagName("*");for(var b=a.length;--b;)"INPUT"!==a[b].tagName&&"TEXTAREA"!==a[b].tagName&&(a[b].unselectable=c)}function n(c,d){var e=c.bodyNode,h=d?"text":21>b("ff")?"-moz-none":"none";
p&&"msUserSelect"!==p?e.style[p]=h:b("dom-selectstart")?d||c._selectstartHandle?d&&c._selectstartHandle&&(c._selectstartHandle.remove(),delete c._selectstartHandle):c._selectstartHandle=a(e,"selectstart",function(a){var c=a.target&&a.target.tagName;"INPUT"!==c&&"TEXTAREA"!==c&&a.preventDefault()}):(m(e,!d),d||c._unselectableHandle)?d&&c._unselectableHandle&&(c._unselectableHandle.remove(),delete c._unselectableHandle):c._unselectableHandle=l.after(c,"renderRow",function(a){m(a,!0);return a})}b.add("dom-comparedocumentposition",
function(a,c,b){return!!b.compareDocumentPosition});b.add("css-user-select",function(a,c,b){a=b.style;c=["Khtml","O","ms","Moz","Webkit"];b=c.length;var d="userSelect";do if("undefined"!==typeof a[d])return d;while(b--&&(d=c[b]+"UserSelect"));return!1});b.add("dom-selectstart","undefined"!==typeof document.onselectstart);var q=b("mac")?"metaKey":"ctrlKey",p=b("css-user-select");f=h.pointer;h=h.MSPointer;var t=f?f+(h?"Down":"down"):"mousedown",r=f?f+(h?"Up":"up"):"mouseup";return d(null,{selectionDelegate:".dgrid-row",
selectionEvents:t+","+r+",dgrid-cellfocusin",selectionTouchEvents:b("touch")?c.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&
this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){k.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",
a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?n(this,a):n(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,c){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(c))&&("dgrid-cellfocusin"!==a.type||a.parentType!==t)&&(a.type!==r||c==this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32==a.keyCode)if(!a.shiftKey&&a.type===t&&this.isSelected(c))this._waitForMouseUp=c;else this[this._selectionHandlerName](a,
c);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,c){a=a.keyCode?a.ctrlKey:a[q];this._lastSelected===c?this.select(c,null,!a||!this.isSelected(c)):(this.clearSelection(),this.select(c),this._lastSelected=c)},_multipleSelectionHandler:function(a,c){var b=this._lastSelected,d=a.keyCode?a.ctrlKey:a[q];if(!a.shiftKey){var e=d?null:!0;b=null}this.select(c,b,e);b||(this._lastSelected=c)},_extendedSelectionHandler:function(a,c){(2===a.button?this.isSelected(c):a.keyCode?a.ctrlKey:
a[q])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,c)},_toggleSelectionHandler:function(a,c){this.select(c,null,null)},_initSelectionEvents:function(){var d=this,e=this.contentNode,h=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};b("touch")&&!b("pointer")&&this.selectionTouchEvents?(a(e,c.selector(h,this.selectionTouchEvents),function(a){d._handleSelect(a,this);d._ignoreMouseSelect=this}),a(e,a.selector(h,this.selectionEvents),function(a){d._ignoreMouseSelect!==
this?d._handleSelect(a,this):a.type===r&&(d._ignoreMouseSelect=null)})):a(e,a.selector(h,this.selectionEvents),function(a){d._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){d._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(a){a[q]&&65==a.keyCode&&!/\bdgrid-input\b/.test(a.target.className)&&(a.preventDefault(),d[d.allSelected?"clearSelection":"selectAll"]())});this._setStore&&l.after(this,"_setStore",function(){d._updateDeselectionAspect()});
this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function a(a,b,d){a=b||a&&a[c.idProperty||"id"];if(null!=a&&(b=(a=c.row(a))&&c.selection[a.id]))c[d](a,null,b)}var c=this,b=this.store;this._removeDeselectSignals&&this._removeDeselectSignals();if(b&&b.notify){var d=l.before(b,"notify",function(c,b){c||a(c,b,"deselect")});var e=l.after(b,"notify",function(c,b){a(c,b,"select")},!0);this._removeDeselectSignals=function(){d.remove();e.remove()}}else d=l.before(this,"removeRow",function(a,
c){c||(a=this.row(a))&&a.id in this.selection&&this.deselect(a)}),this._removeDeselectSignals=function(){d.remove()}},allowSelect:function(a){return!0},_fireSelectionEvent:function(c){var b=this._selectionEventQueues[c],d=this._selectionTriggerEvent;var e={bubbles:!0,grid:this};d&&(e.parentType=d.type);e[this._selectionTargetType]=b;a.emit(this.contentNode,"dgrid-"+c,e);this._selectionEventQueues[c]=[]},_fireSelectionEvents:function(){var a=this._selectionEventQueues,c;for(c in a)a[c].length&&this._fireSelectionEvent(c)},
_select:function(a,c,b){"undefined"===typeof b&&(b=!0);a.element||(a=this.row(a));if(!1===b||this.allowSelect(a)){var d=this.selection;var h=!!d[a.id];null===b&&(b=!h);var f=a.element;b||this.allSelected?d[a.id]=b:delete this.selection[a.id];f&&(b?e(f,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):e(f,"!dgrid-selected!ui-state-active"));b!==h&&f&&this._selectionEventQueues[(b?"":"de")+"select"].push(a);if(c)if(c.element||(c=this.row(c)),c){if(c=c.element)for(d=this._determineSelectionDirection(f,
c),d||(c=document.getElementById(c.id),d=this._determineSelectionDirection(f,c));a.element!=c&&(a=this[d](a));)this._select(a,null,b)}else this._lastSelected=f,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")}},_determineSelectionDirection:b("dom-comparedocumentposition")?function(a,
c){a=c.compareDocumentPosition(a);return a&1?!1:2===a?"down":"up"}:function(a,c){return 1>c.sourceIndex?!1:c.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,c,b){this._select(a,c,b);this._fireSelectionEvents()},deselect:function(a,c){this.select(a,c,!1)},clearSelection:function(a,c){this.allSelected=!1;for(var b in this.selection)a!==b&&this._select(b,null,!1);c||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var c=
this.row(this._rowIdToObject[a]);this._select(c.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this,c=this.inherited(arguments);g.when(c,function(c){var b=a.selection,
d,e;for(d=0;d<c.length;d++){var h=a.row(c[d]);(e=h.id in b?b[h.id]:a.allSelected)&&a._select(h,null,e)}a._fireSelectionEvents()});return c}})})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/dom dojo/on dojo/has ./util/misc ./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(k,d,g,a,b,l,f,h,c){function e(a,b){c(document.body,a,".dgrid-scrollbar-measure");b=a["offset"+b]-a["client"+b];a.className="";document.body.removeChild(a);
return b}function m(a){var b=a?"."+a.replace(y,"."):"";this._class&&(b="!"+this._class.replace(y,"!")+b);c(this.domNode,b);this._class=a}function n(){return this._class}function q(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function p(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}h("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var t,r;b.add("dom-scrollbar-width",function(a,c,b){return e(b,
"Width")});b.add("dom-scrollbar-height",function(a,c,b){return e(b,"Height")});b.add("dom-rtl-scrollbar-left",function(a,d,e){a=c("div");c(document.body,e,".dgrid-scrollbar-measure[dir\x3drtl]");c(e,a);d=!!b("ie")||!!b("trident")||a.offsetLeft>=b("dom-scrollbar-width");e.className="";document.body.removeChild(e);c(a,"!");e.removeAttribute("dir");return d});var u=0,y=/ +/g,x=7>b("ie")&&!b("quirks")?function(){if(this._started){var a=document.documentElement;var c=a.clientWidth;a=a.clientHeight;var b=
this._prevWinDims||[];if(b[0]!==c||b[1]!==a)this.resize(),this._prevWinDims=[c,a]}}:function(){this._started&&this.resize()};return d(b("touch")?f:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:null,addUiClasses:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(a,c){var b=this;(this._Row=function(a,c,b){this.id=a;this.data=c;this.element=b}).prototype.remove=function(){b.removeRow(this.element)};c&&(this.srcNodeRef=c=c.nodeType?
c:document.getElementById(c));this.create(a,c)},listType:"list",create:function(a,e){e=this.domNode=e||c("div");if(a){this.params=a;d.safeMixin(this,a);var h=a["class"]||a.className||e.className;this._sort=a.sort||[];delete this.sort}else this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=e.id=e.id||this.id||"dgrid_"+u++;null===this.useTouchScroll&&(this.useTouchScroll=!b("dom-scrollbar-width"));
this.buildRendering();h&&m.call(this,h);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var d=this.domNode,e=this.addUiClasses,h=this;var f=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();d.className="";c(d,"[role\x3dgrid].dgrid.dgrid-"+this.listType+(e?".ui-widget":""));var m=this.headerNode=c(d,"div.dgrid-header.dgrid-header-row"+(e?".ui-widget-header":"")+(this.showHeader?
"":".dgrid-header-hidden"));(b("quirks")||8>b("ie"))&&c(d,"div.dgrid-spacer");var g=this.bodyNode=c(d,"div.dgrid-scroller");b("ff")&&(g.tabIndex=-1);this.headerScrollNode=c(d,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(e?".ui-widget-header":""));var n=this.footerNode=c("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));c(d,n);f&&(d.className+=" dgrid-rtl"+(b("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));a(g,"scroll",function(c){h.showHeader&&(m.scrollLeft=c.scrollLeft||
g.scrollLeft);c.stopPropagation();a.emit(d,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=c(this.bodyNode,"div.dgrid-content"+(e?".ui-widget-content":""));this._listeners.push(this._resizeHandle=a(window,"resize",l.throttleDelayed(x,this)))},postCreate:b("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",
this._sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,c=this.headerNode,d=this.footerNode,e=c.offsetHeight,h=this.showFooter?d.offsetHeight:0,f=b("quirks")||7>b("ie");this.headerScrollNode.style.height=a.style.marginTop=e+"px";a.style.marginBottom=h+"px";f&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-e-h,0)+"px",h&&(d.style.bottom="1px",setTimeout(function(){d.style.bottom=""},0)));t||(t=b("dom-scrollbar-width"),r=b("dom-scrollbar-height"),b("ie")&&
(t++,r++),l.addCssRule(".dgrid-scrollbar-width","width: "+t+"px"),l.addCssRule(".dgrid-scrollbar-height","height: "+r+"px"),17==t||f||(l.addCssRule(".dgrid-header-row","right: "+t+"px"),l.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+t+"px")));f&&(c.style.width=a.clientWidth+"px",setTimeout(function(){c.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,c){a=l.addCssRule(a,c);this.cleanAddedRules&&this._listeners.push(a);return a},on:function(c,d){c=a(this.domNode,c,d);b("dom-addeventlistener")||
this._listeners.push(c);return c},cleanup:function(){var a=this.observers,c;for(c in this._rowIdToObject)if(this._rowIdToObject[c]!=this.columns){var b=document.getElementById(c);b&&this.removeRow(b,!0)}for(c=0;c<a.length;c++)(b=a[c])&&b.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this._started=!1;this.cleanup();c(this.domNode,"!");this.useTouchScroll&&
this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,d,e,h){if(b){var f=this.insertRow(a,b,d,e,h);c(f,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){c(f,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration);return f}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+
" ").indexOf("dgrid-row ")&&c(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!=b)}},renderArray:function(a,c,b){function d(){var c=arguments;if(-1<p)for(var d=0;d<c.length;d++){var h=c[d],f=u[h?0:u.length-1];if(f=f&&e(f)){var l=f[h?"previousSibling":"nextSibling"];l&&(l=m.row(l));l&&l.element!=f&&(h=h?"unshift":"push",a[h](l.data),u[h](l.element),b.count++)}}}function e(a){return!g.isDescendant(a,m.domNode)&&
document.getElementById(a.id)?m.row(a.id.slice(m.id.length+5)).element:a}function h(a){t=m.insertRow(a,r,null,l++,b);t.observerIndex=p;return t}function f(a){v=a.slice(0);(q=c?c.parentNode:m.contentNode)&&q.parentNode&&(q!==m.contentNode||a.length)?(q.insertBefore(r,c||null),(t=a[a.length-1])&&m.adjustRowIndices(t)):n[p]&&m.cleanEmptyObservers&&"undefined"!==typeof p&&(n[p].cancel(),n[p]=0,m._numObservers--);u=a;k&&(k.rows=u)}b=b||{};var m=this,l=b.start||0,n=this.observers,q;c||(this._lastCollection=
a);if(a.observe){m._numObservers++;var k=a.observe(function(h,f,l){var g;if(-1<f&&u[f]){var n=u.splice(f,1)[0];n.parentNode==q&&((g=n.nextSibling)&&f!=l&&g.rowIndex--,m.removeRow(n));b.count--;m._processScroll&&m._processScroll()}if(-1<l){if(u.length)if(0===l)var k=(k=u[l])&&e(k);else{if(k=u[l-1])k=e(k),k=(k.connected||k).nextSibling}else k=m._getFirstRowSibling&&m._getFirstRowSibling(q);n&&k&&n.id===k.id&&(k=(k.connected||k).nextSibling);k&&!k.parentNode&&(k=document.getElementById(k.id));n=c&&c.parentNode||
k&&k.parentNode||m.contentNode;if(n=m.newRow(h,n,k,b.start+l,b))if(n.observerIndex=p,u.splice(l,0,n),!g||l<f)g=(g=n.previousSibling)&&g.rowIndex+1!=n.rowIndex&&0!=n.rowIndex?g:n;b.count++}0===f?d(1,1):f===a.length-(-1===l?0:1)&&d(0,0);f!=l&&g&&m.adjustRowIndices(g);m._onNotification(u,h,f,l)},!0);var p=n.push(k)-1}var r=document.createDocumentFragment(),t,v;if(a.map){var u=a.map(h,console.error);if(u.then)return a.then(function(c){a=c;return u.then(function(a){f(a);d(1,1,0,0);return v})})}else{u=
[];for(var A=0,w=a.length;A<w;A++)u[A]=h(a[A])}f(u);d(1,1,0,0);return v},_onNotification:function(a,c,b,d){},renderHeader:function(){},_autoId:0,insertRow:function(a,c,b,d,e){var h=e.parentId;h=this.id+"-row-"+(h?h+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++);var f=document.getElementById(h),m=f&&f.previousSibling;f&&(f===b&&(b=(b.connected||b).nextSibling),this.removeRow(f));f=this.renderRow(a,e);f.className=(f.className||"")+" dgrid-row "+(1==d%2?"dgrid-row-odd":
"dgrid-row-even")+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[f.id=h]=a;c.insertBefore(f,b||null);m&&this.adjustRowIndices(m);f.rowIndex=d;return f},renderRow:function(a,b){return c("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||c(a,"!")},row:function(a){var c;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var b=a.id;if(c=this._rowIdToObject[b])return new this._Row(b.substring(this.id.length+
5),c,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?c=this.store.getIdentity(a):(c=a,a=this._rowIdToObject[this.id+"-row-"+c]),new this._Row(c,a,document.getElementById(this.id+"-row-"+c))},cell:function(a){return{row:this.row(a)}},_move:function(a,c,b,d){var e;var h=e=a.element;c=c||1;do if(a=e[0>c?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(b+" ")){h=e;c+=0>c?1:-1;break}while(a=(!d||!e.hidden)&&e[0>c?"lastChild":"firstChild"])}else if(e=
e.parentNode,!e||e===this.bodyNode||e===this.headerNode)break;while(c);return h},up:function(a,c,b){a.element||(a=this.row(a));return this.row(this._move(a,-(c||1),"dgrid-row",b))},down:function(a,c,b){a.element||(a=this.row(a));return this.row(this._move(a,c||1,"dgrid-row",b))},scrollTo:b("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):p.call(this,a)}:p,getScrollPosition:b("touch")?function(){return this.useTouchScroll?this.inherited(arguments):q.call(this)}:q,get:function(a){var c=
"_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,c){if("object"===typeof a)for(var b in a)this.set(b,a[b]);else b="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]=c;return this},_getClass:n,_setClass:m,_getClassName:n,_setClassName:m,_setSort:function(a,c){this._sort="string"!=typeof a?a:[{attribute:a,descending:c}];this.refresh();
this._lastCollection&&(a.length&&("string"!=typeof a&&(c=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(b,d){b=b[a];d=d[a];void 0===b&&(b="");void 0===d&&(d="");return b==d?0:b>d==!c?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,c){k.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",a,c)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;c(b,(a?"!":".")+"dgrid-header-hidden");
this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){k.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;c(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(k,d){k.add("dom-contains",function(a,b,d){return!!d.contains});var g=[],a,b,l,f=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,
h={defaultDelay:15,throttle:function(a,b,d){var c=!1;d=d||h.defaultDelay;return function(){c||(c=!0,a.apply(b,arguments),setTimeout(function(){c=!1},d))}},throttleDelayed:function(a,b,d){var c=!1;d=d||h.defaultDelay;return function(){if(!c){c=!0;var e=arguments;setTimeout(function(){c=!1;a.apply(b,e)},d)}}},debounce:function(a,b,d){var c;d=d||h.defaultDelay;return function(){c&&(clearTimeout(c),c=null);var e=arguments;c=setTimeout(function(){a.apply(b,e)},d)}},each:function(a,b,d){var c;if(a)if("number"===
typeof a.length){var e=0;for(c=a.length;e<c;e++)b.call(d,a[e],e,a)}else for(e in a)b.call(d,a[e],e,a)},contains:function(a,b){return k("dom-contains")?a.contains(b):a.compareDocumentPosition(b)&8},addCssRule:function(c,e){a||(a=d(document.getElementsByTagName("head")[0],"style"),a=a.sheet||a.styleSheet,b=a.deleteRule?"deleteRule":"removeRule",l=a.cssRules?"cssRules":"rules");var h=g.length;g[h]=(a.cssRules||a.rules).length;a.addRule?a.addRule(c,e):a.insertRule(c+"{"+e+"}",g[h]);return{get:function(c){return a[l][g[h]].style[c]},
set:function(c,b){"undefined"!==typeof g[h]&&(a[l][g[h]].style[c]=b)},remove:function(){var c=g[h],d;if(void 0!==c){a[b](c);g[h]=void 0;var e=h+1;for(d=g.length;e<d;e++)g[e]>c&&g[e]--}}}},escapeCssIdentifier:function(a,b){return"string"===typeof a?a.replace(f,b||"\\$1"):a}};return h})},"dgrid/TouchScroll":function(){define("dojo/_base/declare dojo/on ./util/touch ./util/has-css3 put-selector/put xstyle/css!./css/TouchScroll.css".split(" "),function(k,d,g,a,b){function l(a,c,b,e){var h=a.touchNode,
f=p[a.id];if("object"!==typeof c){var m=c;var l=b;c=e;e=b=!0}else e="x"in c,b="y"in c,e&&b||(l=a.getScrollPosition()),m=e?c.x:l.x,l=b?c.y:l.y;h.style[z]=w+-m+"px,"+-l+"px"+A;f&&e&&a._scrollbarXNode&&(a._scrollbarXNode.style[z]=w+m*f.parentWidth/f.scrollWidth+"px,0"+A);f&&b&&a._scrollbarYNode&&(a._scrollbarYNode.style[z]=w+"0,"+l*f.parentHeight/f.scrollHeight+"px"+A);d.emit(a.touchNode.parentNode,"scroll",{scrollLeft:m,scrollTop:l})}function f(a){return p[a.id]?u.exec(window.getComputedStyle(a.touchNode)[z]):
r.exec(a.touchNode.style[z])}function h(a){var c=this.widget;c=[this.node,c._scrollbarXNode,c._scrollbarYNode];var d=c.length;this.timer&&(clearTimeout(this.timer),this.timer=null);for(this.transitionHandler&&this.transitionHandler.remove();d--;)c[d]&&(c[d].style[D+"Duration"]="0");a&&a.preserveScrollbars||b(this.node.parentNode,".touchscroll-fadeout");delete this.resetEffects}function c(a){var c=a.widget,b=c.touchNode,d=c.id,e=0,h=0,m;if(g.countCurrentTouches(a,b)===c.touchesToScroll){if(m=f(c))e=
+m[1],h=+m[2];if(m=p[d])m.resetEffects&&m.resetEffects({preserveScrollbars:!0}),b.style[z]=w+e+"px,"+h+"px"+A,t[d]=m;a=a.targetTouches[0];m=p[d]={widget:c,node:b,startX:e-a.pageX,startY:h-a.pageY,lastX:e,lastY:h,pageX:a.pageX,pageY:a.pageY,tickFunc:function(){var a=p[d],c;if(a){if(c=r.exec(a.node.style[z])){var b=+c[1];c=+c[2];a.velX=b-a.lastX;a.velY=c-a.lastY;a.lastX=b;a.lastY=c}else a.lastX=a.lastY=0;a.timer=setTimeout(a.tickFunc,50)}}};m.timer=setTimeout(m.tickFunc,50)}}function e(a){var c=a.widget,
d=c.id,e=c.touchesToScroll,h=p[d],f,m;if(h&&(f=g.countCurrentTouches(a,c.touchNode))===e){f=a.targetTouches;e=f[0];if(!h.scrollbarsShown&&(t[d]||Math.abs(e.pageX-h.pageX)>c.scrollThreshold||Math.abs(e.pageY-h.pageY)>c.scrollThreshold)){d=c.touchNode;var n=d.parentNode,k=n.offsetWidth-8,q=n.offsetHeight-8,r=h.scrollWidth=d.scrollWidth,u=h.scrollHeight=d.scrollHeight,B=h.parentWidth=n.offsetWidth,v=h.parentHeight=n.offsetHeight;r>B?(c._scrollbarXNode||(m=b(n,"div.touchscroll-x")),m=c._scrollbarXNode=
c._scrollbarXNode||b(m,"div.touchscroll-bar"),m.style.width=k*k/r+"px",m.style.left=d.offsetLeft+"px",b(n,".touchscroll-scrollable-x"),h.scrollableX=!0):b(n,"!touchscroll-scrollable-x");u>v?(c._scrollbarYNode||(m=b(n,"div.touchscroll-y")),m=c._scrollbarYNode=c._scrollbarYNode||b(m,"div.touchscroll-bar"),m.style.height=q*q/u+"px",m.style.top=d.offsetTop+"px",b(n,".touchscroll-scrollable-y"),h.scrollableY=!0):b(n,"!touchscroll-scrollable-y");b(n,"!touchscroll-fadeout");h.scrollbarsShown=!0;for(m=f.length;m--;)f[m].touchScrolled=
!0}h.scrollbarsShown&&(h.scrollableX||h.scrollableY)&&(a.preventDefault(),a=h.scrollableX?h.startX+e.pageX:0,e=h.scrollableY?h.startY+e.pageY:0,m=h.scrollableX?-(h.scrollWidth-h.parentWidth):0,h=h.scrollableY?-(h.scrollHeight-h.parentHeight):0,0<a?a/=2:a<m&&(a=m-(m-a)/2),0<e?e/=2:e<h&&(e=h-(h-e)/2),l(c,-a,-e))}else f>e&&c.cancelTouchScroll()}function m(a){var c=a.widget,b=c.id;p[b]&&g.countCurrentTouches(a,c.touchNode)==c.touchesToScroll-1&&q(b)}function n(a,c,b){function e(){delete h.transitionHandler;
h.resetEffects();delete p[a]}var h=p[a],f=h.widget,m=h.node,l=h.scrollableX?Math.max(Math.min(0,c),-(h.scrollWidth-h.parentWidth)):c,g=h.scrollableY?Math.max(Math.min(0,b),-(h.scrollHeight-h.parentHeight)):b;delete h.timer;l!=c||g!=b?(h.transitionHandler=d.once(m,x,e),m.style[D+"Duration"]=f.bounceDuration+"ms",m.style[z]=w+l+"px,"+g+"px"+A,l!=c&&h.scrollableX&&(m=h.widget._scrollbarXNode,m.style[D+"Duration"]=f.bounceDuration+"ms",m.style[z]=c>l?w+"0,0"+A:w+(m.parentNode.offsetWidth-m.offsetWidth)+
"px,0"+A),g!=b&&h.scrollableY&&(m=h.widget._scrollbarYNode,m.style[D+"Duration"]=f.bounceDuration+"ms",m.style[z]=b>g?w+"0,0"+A:w+"0,"+(m.parentNode.offsetHeight-m.offsetHeight)+"px"+A)):e()}function q(a){var c=p[a],b=t[a],d;delete t[a];c.timer&&clearTimeout(c.timer);c.resetEffects=h;if(d=r.exec(c.node.style[z])){var e=+d[1];d=+d[2]}else e=d=0;!c.velX&&!c.velY||(0<=e||e<=-(c.scrollWidth-c.parentWidth))&&(0<=d||d<=-(c.scrollHeight-c.parentHeight))?n(a,e,d):(b&&(b.velX||b.velY)&&(0>=c.velX&&0>=b.velX||
0<=c.velX&&0<=b.velX)&&(0>=c.velY&&0>=b.velY||0<=c.velY&&0<=b.velY)&&(c.velX=1.15*(c.velX+b.velX),c.velY=1.15*(c.velY+b.velY)),c.lastX=e,c.lastY=d,c.calcFunc=function(){var c=p[a],b;if(c){var d=c.widget;var e=d.glideDecel(c.velX);var h=d.glideDecel(c.velY);if(1<=Math.abs(e)||1<=Math.abs(h)){var f=c.lastX+e;var m=c.lastY+h;if(0<f||f<-(c.scrollWidth-c.parentWidth))for(b=6;b--;)e=d.glideDecel(e);if(0<m||m<-(c.scrollHeight-c.parentHeight))for(b=6;b--;)h=d.glideDecel(h);l(d,-f,-m);c.lastX=f;c.lastY=m;
c.velX=e;c.velY=h;c.timer=setTimeout(c.calcFunc,30)}else n(a,c.lastX,c.lastY)}},c.timer=setTimeout(c.calcFunc,30))}var p={},t={},r=/^translate(?:3d)?\((-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,u=/^matrix\(1, 0, 0, 1, (-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,y=a("css-transitions"),x=a("transitionend"),v=a("css-transforms");a=a("css-transforms3d");if(a){var w="translate3d(";var A=",0)"}else v&&(w="translate(",A=")");if(!y||!w)return console.warn("CSS3 features unavailable for touch scroll effects."),function(){};
var z=a||v;z=!0===z?"transform":z+"Transform";var D=!0===y?"transition":y+"Transition";var E=!0===v?"":"-"+v.toLowerCase()+"-";return k(null,{touchesToScroll:1,touchNode:null,scrollThreshold:10,bounceDuration:300,postCreate:function(){this._initTouch();this.inherited(arguments)},_initTouch:function(){function a(){f.cancelTouchScroll()}function b(c){return function(b){b.widget=f;b.cancelTouchScroll=a;c.call(this,b)}}var h=this.touchNode=this.touchNode||this.containerNode,f=this;if(h&&h.parentNode){var l=
h.parentNode;l.style.overflow="hidden";h.style[D+"Property"]=E+"transform";h.style[D+"TimingFunction"]="cubic-bezier(0.33, 0.66, 0.66, 1)";this._touchScrollListeners=[d(l,"touchstart",b(c)),d(l,"touchmove",b(e)),d(l,"touchend,touchcancel",b(m))]}else console.warn("TouchScroll requires a nested node upon which to operate.")},destroy:function(){for(var a=this._touchScrollListeners.length;a--;)this._touchScrollListeners[a].remove();delete p[this.id];this.inherited(arguments)},scrollTo:function(a){var c=
p[this.id],b=this.touchNode,d=b.parentNode;!a.preserveMomentum&&c&&c.resetEffects&&c.resetEffects();a.x&&(a.x=Math.max(0,Math.min(a.x,b.scrollWidth-d.offsetWidth)));a.y&&(a.y=Math.max(0,Math.min(a.y,b.scrollHeight-d.offsetHeight)));l(this,a)},getScrollPosition:function(){var a=f(this);return a?{x:-a[1],y:-a[2]}:{x:0,y:0}},cancelTouchScroll:function(){var a=p[this.id];a&&(a.resetEffects?a.resetEffects():(a.timer&&clearTimeout(a.timer),b(a.node.parentNode,".touchscroll-fadeout")),delete p[this.id])},
glideDecel:function(a){return.9*a}})})},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(k,d){function g(b,d,f,h){if(!(1<f.targetTouches.length)){var c=f.changedTouches[0],e=c.screenX,m=c.screenY;h&&f.preventDefault();var l=k(b,"touchend",function(c){var b=c.changedTouches[0];c.targetTouches.length||(Math.abs(b.screenX-e)<a.tapRadius&&Math.abs(b.screenY-m)<a.tapRadius&&(h&&c.preventDefault(),d.call(this,c)),l.remove())})}}var a={tapRadius:10,dbltapTime:250,selector:function(a,
l,f){return function(b,c){var e=l.bubble;e?l=e:!1!==f&&(f=!0);return k(b,l,function(e){var h=e.target;3==h.nodeType&&(h=h.parentNode);for(;!d.matches(h,a,b);)if(h==b||!f||!(h=h.parentNode))return;return c.call(h,e)})}},countCurrentTouches:function(a,d){if(!("touches"in a))return-1;var b,h,c;for(h=b=0;c=a.touches[b];++b)d.contains(c.target)&&++h;return h},tap:function(a,d){return k(a,"touchstart",function(b){g(a,d,b)})},dbltap:function(b,d){var f,h;return k(b,"touchstart",function(c){f?g(b,function(c){if(f){var b=
c.changedTouches[0];Math.abs(b.screenX-f.screenX)<a.tapRadius&&Math.abs(b.screenY-f.screenY)<a.tapRadius&&(h&&clearTimeout(h),f=h=null,d.call(this,c))}},c,!0):g(b,function(c){f=c.changedTouches[0];h=setTimeout(function(){f=h=null},a.dbltapTime)},c)})}};return a})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(k){function d(a,b){a=a.style;var d;if(b in a)return!0;b=b.slice(0,1).toUpperCase()+b.slice(1);for(d=g.length;d--;)if(g[d]+b in a)return g[d];return!1}var g=["ms","O","Moz","Webkit"];
k.add("css-transitions",function(a,b,l){return d(l,"transitionProperty")});k.add("css-transforms",function(a,b,l){return d(l,"transform")});k.add("css-transforms3d",function(a,b,l){return d(l,"perspective")});k.add("transitionend",function(){var a=k("css-transitions");return a?!0===a?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[a]:!1});return k})},"xstyle/css":function(){define(["require"],function(k){function d(d,a,b){var l=document.documentElement;
d=l.insertBefore(document.createElement(d),l.firstChild);d.id=a;a=(d.currentStyle||getComputedStyle(d,null))[b];l.removeChild(d);return a}return{load:function(g,a,b,l){function f(c){var e=d("x-parse",null,"content"),h=c&&(c.sheet||c.styleSheet);e&&"none"!=e&&"normal"!=e?a([eval(e)],function(a){c?a.process(c,b):(a.processAll(),b(h))}):b(h)}var h=a.toUrl(g);if(h.match(/!$/)){var c={wait:!1};h=h.slice(0,-1)}var e=a.cache&&a.cache["url:"+h];if(e)e.xCss&&(e=e.cssText),k(["./core/load-css"],function(a){f(a.insertCss(e))});
else{if("none"==d("div",g.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return f();k(["./core/load-css"],function(a){a(h,f,c)})}}}})},"xstyle/has-class":function(){define(["dojo/has"],function(k){var d={};return function(){for(var g,a=arguments,b=0;b<a.length;b++)if(g=a[b],!d[g]){d[g]=!0;var l=g.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),f=k(l[2]),h=-l[4];(0<h?h<=f&&(-l[5]||h)>=f:!!f)==!l[1]&&(document.documentElement.className+=" has-"+g)}}})},"dgrid/util/has-pointer":function(){define(["dojo/has"],
function(k){k.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var d=(k=k("pointer"))&&"MS"===k.slice(0,2),g={};g.pointer=k;g.MSPointer=d;return g})},"dgrid/extensions/_DnD-touch-autoscroll":function(){define(["dojo/aspect","dojo/dom-geometry","dojo/dnd/autoscroll","../List"],function(k,d,g,a){var b=g.autoScrollNodes;var l={};k.after(a.prototype,"postCreate",function(a){var c=this.id;l[c]&&console.warn("dgrid instance registered with duplicate id '"+
c+"'");l[c]=this;return a});k.after(a.prototype,"destroy",function(a){delete l[this.id];return a});var f=function(a){for(var c,b;a;){if((c=a.id)&&(b=l[c]))return b;a=a.parentNode}};g.autoScrollNodes=function(a){var c=a.target,e=f(c),h,l;if(e){c=e.touchNode.parentNode;c=d.position(c,!0);var k=a.pageX-c.x;var p=a.pageY-c.y;var t=Math.min(g.H_TRIGGER_AUTOSCROLL,c.w/2);var r=Math.min(g.V_TRIGGER_AUTOSCROLL,c.h/2);k<t?h=-t:k>c.w-t&&(h=t);p<r?l=-r:p>c.h-r&&(l=r);if(h||l){a=e.getScrollPosition();c={};h&&
(c.x=a.x+h);l&&(c.y=a.y+l);e.scrollTo(c);return}}b.call(this,a)};return g})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put ./util/has-pointer ./util/misc dojo/_base/Deferred dojo/_base/sniff".split(" "),function(k,d,g,a,b,l,f,h,c){function e(a){a.preventDefault()}var m={checkbox:1,radio:1,button:1},n=/\bdgrid-cell\b/,q=/\bdgrid-row\b/,p=f.pointer;f=f.MSPointer;var t=p?p+(f?"Down":"down"):"mousedown",r=k(null,{pageSkip:10,tabIndex:0,
keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=a.mixin({},r.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=a.mixin({},r.defaultHeaderKeyMap))},postCreate:function(){function a(a){var c=a.target;return c.type&&(!m[c.type]||32==a.keyCode)}function b(b){function f(){e._focusedHeaderNode&&(e._focusedHeaderNode.tabIndex=-1);if(e.showHeader){if(m)for(var a=0,c,b=e.headerNode.getElementsByTagName("th");c=b[a];++a){if(l.test(c.className)){e._focusedHeaderNode=
p=c;break}}else e._focusedHeaderNode=p=e.headerNode;p&&(p.tabIndex=e.tabIndex)}}var m=e.cellNavigation,l=m?n:q,k=b===e.headerNode,p=b;k?(f(),d.after(e,"renderHeader",f,!0)):d.after(e,"renderArray",function(a){return c.when(a,function(a){var c=e._focusedNode||p;if(l.test(c.className)&&h.contains(b,c))return a;for(var d=0,f=b.getElementsByTagName("*"),m;m=f[d];++d)if(l.test(m.className)){c=e._focusedNode=m;break}c.tabIndex=e.tabIndex;return a})});e._listeners.push(g(b,t,function(c){a(c)||e._focusOnNode(c.target,
k,c)}));e._listeners.push(g(b,"keydown",function(c){if(!c.metaKey&&!c.altKey){var b=e[k?"headerKeyMap":"keyMap"][c.keyCode];b&&!a(c)&&b.call(e,c)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(b(this.headerNode),g(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})}));b(this.contentNode)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var c=this,b=document.activeElement===this._focusedNode,d=this[this.cellNavigation?"cell":"row"](this._focusedNode),
e=d.row||d,h;a=a.element||a;a===e.element&&((h=this.down(e,!0))&&h.element!==a||(h=this.up(e,!0)),this._removedFocus={active:b,rowId:e.id,columnId:d.column&&d.column.id,siblingId:h&&h.element!==a?h.id:void 0},setTimeout(function(){c._removedFocus&&c._restoreFocus(e.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(a){var c=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(c);return c},_restoreFocus:function(a){var c=this._removedFocus,
b;if((a=(a=a&&this.row(a))&&a.element&&a.id===c.rowId?a:"undefined"!==typeof c.siblingId&&this.row(c.siblingId))&&a.element){if(!a.element.parentNode.parentNode){c.wait=!0;return}"undefined"!==typeof c.columnId&&(b=this.cell(a,c.columnId))&&b.element&&(a=b);c.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(l(a.element,".dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,c,b){return d.after(this[b?"headerKeyMap":
"keyMap"],a,c,!0)},_focusOnNode:function(c,d,e){var h="_focused"+(d?"Header":"")+"Node";d=this[h];var f=this.cellNavigation?"cell":"row",m=this[f](c),k;if(c=m&&m.element){if(this.cellNavigation){var p=c.getElementsByTagName("input");var r=0;for(k=p.length;r<k;r++){var t=p[r];if((-1!=t.tabIndex||"_dgridLastValue"in t)&&!t.disabled){8>b("ie")&&(t.style.position="relative");t.focus();8>b("ie")&&(t.style.position="");var u=!0;break}}}null!==e&&(e=a.mixin({grid:this},e),e.type&&(e.parentType=e.type),e.bubbles||
(e.bubbles=!0));d&&(l(d,"!dgrid-focus[!tabIndex]"),8>b("ie")&&(d.style.position=""),e&&(e[f]=this[f](d),g.emit(d,"dgrid-cellfocusout",e)));d=this[h]=c;e&&(e[f]=m);h=this.cellNavigation?n:q;!u&&h.test(c.className)&&(8>b("ie")&&(c.style.position="relative"),c.tabIndex=this.tabIndex,c.focus());l(c,".dgrid-focus");e&&g.emit(d,"dgrid-cellfocusin",e)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){(a=a||this._focusedNode)?this._focusOnNode(a,!1):this.contentNode.focus()}}),
u=r.moveFocusVertical=function(a,c){var b=this.cellNavigation,d=this[b?"cell":"row"](a);d=b&&d.column.id;c=this.down(this._focusedNode,c,!0);b&&(c=this.cell(c,d));this._focusOnNode(c,!1,a);a.preventDefault()};k=r.moveFocusUp=function(a){u.call(this,a,-1)};p=r.moveFocusDown=function(a){u.call(this,a,1)};f=r.moveFocusPageUp=function(a){u.call(this,a,-this.pageSkip)};var y=r.moveFocusPageDown=function(a){u.call(this,a,this.pageSkip)},x=r.moveFocusHorizontal=function(a,c){if(this.cellNavigation){var b=
!this.row(a);this._focusOnNode(this.right(this["_focused"+(b?"Header":"")+"Node"],c),b,a);a.preventDefault()}},v=r.moveFocusLeft=function(a){x.call(this,a,-1)},w=r.moveFocusRight=function(a){x.call(this,a,1)},A=r.moveHeaderFocusEnd=function(a,c){if(this.cellNavigation){var b=this.headerNode.getElementsByTagName("th");this._focusOnNode(b[c?0:b.length-1],!0,a)}a.preventDefault()},z=r.moveHeaderFocusHome=function(a){A.call(this,a,!0)},D=r.moveFocusEnd=function(e,h){var f=this,m=this.cellNavigation,l=
this.contentNode,g=l.scrollTop+(h?0:l.scrollHeight);l=l[h?"firstChild":"lastChild"];var n=-1<l.className.indexOf("dgrid-preload"),k=n?l[(h?"next":"previous")+"Sibling"]:l,q=k.offsetTop+(h?0:k.offsetHeight);if(n){for(;k&&0>k.className.indexOf("dgrid-row");)k=k[(h?"next":"previous")+"Sibling"];if(!k)return}if(!n||1>l.offsetHeight)m&&(k=this.cell(k,this.cell(e).column.id)),this._focusOnNode(k,!1,e);else{b("dom-addeventlistener")||(e=a.mixin({},e));var p=d.after(this,"renderArray",function(a){p.remove();
return c.when(a,function(a){a=a[h?0:a.length-1];m&&(a=f.cell(a,f.cell(e).column.id));f._focusOnNode(a,!1,e)})})}g===q&&e.preventDefault()},E=r.moveFocusHome=function(a){D.call(this,a,!0)};r.defaultKeyMap={32:e,33:f,34:y,35:D,36:E,37:v,38:k,39:w,40:p};r.defaultHeaderKeyMap={32:e,35:A,36:z,37:v,39:w};return r})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(k,d,g){return k([d,g],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),
function(k,d,g,a,b,l,f){function h(a,c){c&&c.nodeType&&a.appendChild(c)}function c(a,c,b,d){if(this.formatter){d=this.formatter;var e=this.grid.formatterScope;b.innerHTML="string"===typeof d&&e?e[d](c,a):this.formatter(c,a)}else null!=c&&b.appendChild(document.createTextNode(c))}var e=8>a("ie")&&!a("quirks");d=d(l,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!=typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,c){if(a.column&&
a.element)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var b=a.columnId;if(b){c=b;var d=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!d&&"undefined"!=typeof c){var e=this.row(a);if(b=e&&e.element){b=b.getElementsByTagName("td");for(var h=0;h<b.length;h++)if(b[h].columnId==c){d=b[h];break}}}if(null!=a)return{row:e||this.row(a),column:c&&this.column(c),element:d}},createRowCells:function(c,d,h,l){var m=b("table.dgrid-row-table[role\x3dpresentation]"),
g=9>a("ie")||a("quirks")?b(m,"tbody"):m,n,k,q;h=h||this.subRows;var p=0;for(n=h.length;p<n;p++){var w=h[p];var A=b(g,"tr");w.className&&b(A,"."+w.className);var z=0;for(k=w.length;z<k;z++){var D=w[z];var E=D.id;var B=D.field?".field-"+f.escapeCssIdentifier(D.field,"-"):"";(q="function"===typeof D.className?D.className(l):D.className)&&(B+="."+q);B=b(c+(".dgrid-cell.dgrid-cell-padding"+(E?".dgrid-column-"+f.escapeCssIdentifier(E,"-"):"")+B.replace(/ +/g,"."))+"[role\x3d"+("th"===c?"columnheader":"gridcell")+
"]");B.columnId=E;e?(E=b(B,"!dgrid-cell-padding div.dgrid-cell-padding"),B.contents=E):E=B;if(q=D.colSpan)B.colSpan=q;if(q=D.rowSpan)B.rowSpan=q;d(E,D);A.appendChild(B)}}return m},left:function(a,c){a.element||(a=this.cell(a));return this.cell(this._move(a,-(c||1),"dgrid-cell"))},right:function(a,c){a.element||(a=this.cell(a));return this.cell(this._move(a,c||1,"dgrid-cell"))},renderRow:function(a,d){var e=this.createRowCells("td",function(b,e){var f=a;e.get?f=e.get(a):"field"in e&&"_item"!=e.field&&
(f=f[e.field]);e.renderCell?h(b,e.renderCell(a,f,b,d)):c.call(e,a,f,b,d)},d&&d.subRows,a);return b("div[role\x3drow]\x3e",e)},renderHeader:function(){var c=this,d=this.headerNode,f=d.childNodes.length;for(d.setAttribute("role","row");f--;)b(d.childNodes[f],"!");f=this.createRowCells("th",function(a,c){var b=c.headerNode=a;e&&(a=a.parentNode);var d=c.field;d&&(a.field=d);c.renderHeaderCell?h(b,c.renderHeaderCell(b)):("label"in c||c.field)&&b.appendChild(document.createTextNode("label"in c?c.label:
c.field));!1!==c.sortable&&d&&"_item"!=d&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[f.id=this.id+"-header"]=this.columns;d.appendChild(f);this._sortListener&&this._sortListener.remove();this._sortListener=g(f,"click,keydown",function(b){if("click"==b.type||32==b.keyCode||!a("opera")&&13==b.keyCode){var e=b.target,h,f;do if(e.sortable){var m=[{attribute:h=e.field||e.columnId,descending:(f=c._sort[0])&&f.attribute==h&&!f.descending}];
h={bubbles:!0,cancelable:!0,grid:c,parentType:b.type,sort:m};g.emit(b.target,"dgrid-sort",h)&&(c._sortNode=e,c.set("sort",m));break}while((e=e.parentNode)&&e!=d)}})},resize:function(){var c=this.headerNode.firstChild,b=this.contentNode,d;this.inherited(arguments);if(!a("ie")||7<a("ie")&&!a("quirks"))b.style.width="",b&&c&&(d=c.offsetWidth)!=b.offsetWidth&&(b.style.width=d+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(a,
c){this.inherited(arguments);this.updateSortArrow(this._sort)},_findSortArrowParent:function(a){var c=this.columns,b;for(b in c){var d=c[b];if(d.field==a)return d.headerNode}},updateSortArrow:function(a,c){this._lastSortedArrow&&(b(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down"),b(this._lastSortedArrow,"!"),delete this._lastSortedArrow);c&&(this._sort=a);if(a[0]&&(c=a[0].attribute,a=a[0].descending,c=this._sortNode||this._findSortArrowParent(c),delete this._sortNode,c)){c=c.contents||
c;var d=this._lastSortedArrow=b("div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]");d.innerHTML="\x26nbsp;";c.insertBefore(d,c.firstChild);b(c,a?".dgrid-sort-down":".dgrid-sort-up");this.resize()}},styleColumn:function(a,c){return this.addCssRule("#"+f.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+f.escapeCssIdentifier(a,"-"),c)},_configColumns:function(a,c){var b=[],d=c instanceof Array;f.each(c,function(e,h){"string"==typeof e&&(c[h]=e={label:e});d||e.field||(e.field=h);h=e.id=e.id||
(isNaN(h)?h:a+h);this._configColumn&&(this._configColumn(e,h,c,a),h=e.id);d&&(this.columns[h]=e);e.grid=this;"function"===typeof e.init&&e.init();b.push(e)},this);return d?c:b},_destroyColumns:function(){var a=this.subRows,c=a&&a.length,b,d;this.cleanup();for(b=0;b<c;b++){var e=0;for(d=a[b].length;e<d;e++){var h=a[b][e];"function"===typeof h.destroy&&h.destroy()}}},configStructure:function(){var a=this.subRows,c=this._columns=this.columns;this.columns=!c||c instanceof Array?{}:c;if(a)for(c=0;c<a.length;c++)a[c]=
this._configColumns(c+"-",a[c]);else this.subRows=[this._configColumns("",c)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},setColumns:function(a){k.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",a)},setSubRows:function(a){k.deprecated("setSubRows(...)",
'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",a)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});d.appendIfNode=h;d.defaultRenderCell=c;return d})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/dom dojo/on ./util/misc put-selector/put".split(" "),
function(k,d,g,a,b,l,f,h,c){return g([k,d],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:h.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var a=this;f(this.bodyNode,"scroll",h[this.pagingMethod](function(c){a._processScroll(c)},null,this.pagingDelay))},renderQuery:function(d,h){function e(a){c(v,"!");if(a)throw f._refreshDeferred&&(f._refreshDeferred.reject(a),
delete f._refreshDeferred),a;}var f=this,l=h&&h.container||this.contentNode,m={query:d,count:0,options:h},g,k=this.preload,y,x={node:c(l,"div.dgrid-preload",{rowIndex:0}),count:0,query:d,next:m,options:h};x.node.style.height="0";m.node=g=c(l,"div.dgrid-preload");m.previous=x;g.rowIndex=this.minRowsPerPage;k?((m.next=k.next)&&g.offsetTop>=k.node.offsetTop?m.previous=k:(m.next=k,m.previous=k.previous),m.previous.next=m,m.next.previous=m):this.preload=m;var v=c(g,"-div.dgrid-loading");c(v,"div.dgrid-below").innerHTML=
this.loadingMessage;h=a.mixin(this.get("queryOptions"),h,{start:0,count:this.minRowsPerPage},"level"in d?{queryLevel:d.level}:null);this._trackError(function(){return y=d(h)});if("undefined"===typeof y)e();else return b.when(f.renderArray(y,g,h),function(a){return b.when("undefined"===typeof y.total?y.length:y.total,function(b){var d=a.length,e=g.parentNode,l=f.noDataNode;c(v,"!");"queryLevel"in h||(f._total=b);0===b&&(l&&(c(l,"!"),delete f.noDataNode),f.noDataNode=l=c("div.dgrid-no-data"),e.insertBefore(l,
f._getFirstRowSibling(e)),l.innerHTML=f.noDataMessage);for(l=e=0;l<d;l++)e+=f._calcRowHeight(a[l]);d&&e&&(f.rowHeight=e/d);b-=d;m.count=b;g.rowIndex=d;b?g.style.height=Math.min(b*f.rowHeight,f.maxEmptySpace)+"px":(g.style.display="none",h.count++);f._previousScrollPosition&&(f.scrollTo(f._previousScrollPosition),delete f._previousScrollPosition);f._processScroll();f._refreshDeferred&&(f._refreshDeferred.resolve(y),delete f._refreshDeferred);return a},e)},e),y},refresh:function(a){var c=this,d=a&&
a.keepScrollPosition;"undefined"===typeof d&&(d=this.keepScrollPosition);d&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store){d=this._refreshDeferred=new b;var e=c.renderQuery(function(a){return c.store.query(c.query,a)});"undefined"===typeof e&&d.reject();return d.then(function(a){setTimeout(function(){f.emit(c.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c,results:a})},0);delete c._refreshDeferred;return a},function(a){delete c._refreshDeferred;
throw a;})}},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var c=a.nextSibling;return c&&!/\bdgrid-preload\b/.test(c.className)?c.offsetTop-a.offsetTop:a.offsetHeight},lastScrollTop:0,_processScroll:function(d){function e(a,b,d,e){var f=l.farOffRemoval,m=a.node;if(b>2*f){for(var g,n=m[d],k=0,q=0,p=[];g=n;){var r=l._calcRowHeight(g);if(k+r+f>b||0>n.className.indexOf("dgrid-row")&&0>n.className.indexOf("dgrid-loading"))break;
n=g[d];k+=r;q+=g.count||1;l.removeRow(g,!0);p.push(g)}a.count+=q;e?(m.rowIndex-=q,h(a)):m.style.height=m.offsetHeight+k+"px";var t=c("div",p);setTimeout(function(){c(t,"!")},1)}}function h(a,c){a.node.style.height=Math.min(a.count*l.rowHeight,c?Infinity:l.maxEmptySpace)+"px"}function f(a,c){do a=c?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var l=this,g=l.bodyNode;d=d&&d.scrollTop||this.getScrollPosition().y;g=g.offsetHeight+d;var k=l.preload,u=l.lastScrollTop,y=l.bufferRows*l.rowHeight,
x=y-l.rowHeight,v,w,A,z=!0;for(l.lastScrollTop=d;k&&!k.node.offsetWidth;)k=k.previous;for(;k&&k!=D;){var D=l.preload;l.preload=k;var E=k.node;var B=E.offsetTop;if(g+1+x<B)k=f(k,z=!1);else if(d-1-x>B+E.offsetHeight)k=f(k,z=!0);else{var C=((E.rowIndex?d-y:g)-B)/l.rowHeight;B=(g-d+2*y)/l.rowHeight;B+=Math.min(Math.abs(Math.max(Math.min((d-u)*l.rowHeight,l.maxRowsPerPage/2),l.maxRowsPerPage/-2)),10);0==E.rowIndex&&(C-=B);C=Math.max(C,0);10>C&&0<C&&B+C<l.maxRowsPerPage&&(B+=Math.max(0,C),C=0);B=Math.min(Math.max(B,
l.minRowsPerPage),l.maxRowsPerPage,k.count);if(0==B)k=f(k,z);else{B=Math.ceil(B);C=Math.min(Math.floor(C),k.count-B);var G=a.mixin(l.get("queryOptions"),k.options);k.count-=B;var I=E,N=l.queryRowsOverlap,L=(0<E.rowIndex||E.offsetTop>d)&&k;if(L){var J=k.previous;J&&(e(J,d-(J.node.offsetTop+J.node.offsetHeight),"nextSibling"),0<C&&J.node==E.previousSibling?(C=Math.min(k.count,C),k.previous.count+=C,h(k.previous,!0),E.rowIndex+=C,N=0):B+=C,k.count-=C);G.start=E.rowIndex-N;G.count=Math.min(B+N,l.maxRowsPerPage);
E.rowIndex=G.start+G.count}else{if(k.next)if(e(k.next,k.next.node.offsetTop-g,"previousSibling",!0),I=E.nextSibling,I==k.next.node)k.next.count+=k.count-C,k.next.node.rowIndex=C+B,h(k.next),k.count=C,N=0;else var O=!0;G.start=k.count;G.count=Math.min(B+N,l.maxRowsPerPage)}O&&I&&I.offsetWidth&&(O=I.offsetTop);h(k);"level"in k.query&&(G.queryLevel=k.query.level);if("queryLevel"in G||!(G.start>l._total||0>G.count)){E=c(I,"-div.dgrid-loading[style\x3dheight:"+B*l.rowHeight+"px]");c(E,"div.dgrid-"+(L?
"below":"above")).innerHTML=l.loadingMessage;E.count=B;var F=k.query(G);if(void 0===l._trackError(function(){return F})){c(E,"!");return}(function(a,d,e,f){A=b.when(l.renderArray(f,a,G),function(m){w=f;I=a.nextSibling;c(a,"!");if(e&&I&&I.offsetWidth){var g=l.getScrollPosition();l.scrollTo({x:g.x,y:g.y+I.offsetTop-e,preserveMomentum:!0})}b.when(f.total||f.length,function(a){"queryLevel"in G||(l._total=a);d&&(d.count=a-d.node.rowIndex,0===d.count&&G.count++,h(d))});l._processScroll();return m},function(b){c(a,
"!");throw b;})}).call(this,E,L,O,F);k=k.previous}}}}A&&(v=this._refreshDeferred)&&(delete this._refreshDeferred,b.when(A,function(){v.resolve(w)}))},removeRow:function(a,c){if(a){var b=a.previousSibling,d=a.nextSibling,e;if(e=b)e=b.observerIndex,e=null!=e?e:b.previousObserverIndex;b=e;if(e=d)e=d.observerIndex,e=null!=e?e:d.nextObserverIndex;d=a.observerIndex;a.observerIndex=void 0;c&&(a.nextObserverIndex=e,a.previousObserverIndex=b);if(this.cleanEmptyObservers&&-1<d&&d!==b&&d!==e&&(b=this.observers,
e=b[d])){if(!c)for(var h=e.rows,f=0;f<h.length;f++)if(h[f]!=a&&l.isDescendant(h[f],this.domNode))return this.inherited(arguments);e.cancel();this._numObservers--;b[d]=0}}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(k,d,g,a,b,l,f){function h(a){return a}function c(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;a.grid=
this;b.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return d(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};l.before(this,"configStructure",g.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},
destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},_updateNotifyHandle:function(a){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);a&&"function"===typeof a.notify&&(this._notifyHandle=l.after(a,"notify",g.hitch(this,"_onNotify"),!0),(a=this.get("sort"))&&a.length||console.warn("Observable store detected, but no sort order specified. You may experience quirks when adding/updating items.  These can be resolved by setting a sort order on the list or grid."))},
_setStore:function(a,c,b){this._updateNotifyHandle(a);this.store=a;this.dirty={};this.set("query",c,b)},_setQuery:function(a,c){var b=c&&c.sort;this.query=void 0!==a?a:this.query;this.queryOptions=c||this.queryOptions;b?this.set("sort",b):this.refresh()},setStore:function(a,c,b){k.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",a,c,b)},setQuery:function(a,c){k.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",a,c)},_getQueryOptions:function(){var a=
g.delegate(this.queryOptions,{});if("function"===typeof this._sort||this._sort.length)a.sort=this._sort;return a},_getQuery:function(){var a=this.query;return"object"==typeof a&&null!=a?g.delegate(a,{}):a},_setSort:function(a,c){this.store&&(this._lastCollection=null);this.inherited(arguments)},_onNotify:function(a,c){this.inherited(arguments);a&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},refresh:function(){var a=this.inherited(arguments);this.store||(this.noDataNode=f(this.contentNode,
"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return a},renderArray:function(){var c=this,b=this.inherited(arguments);this.store||a.when(b,function(a){a.length&&c.noDataNode&&f(c.noDataNode,"!")});return b},insertRow:function(a,c,b,d,h){var e=this.store,f=this.dirty;e=e&&e.getIdentity(a);var l;e in f&&!(e in this._updating)&&(l=f[e]);l&&(a=g.delegate(a,l));return this.inherited(arguments)},updateDirty:function(a,c,b){var d=this.dirty,e=d[a];e||(e=d[a]={});e[c]=b},setDirty:function(a,
c,b){k.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(a,c,b)},save:function(){function c(c,e){return function(f){var l=b._columnsWithSet,m=b._updating,g;if("function"===typeof f.set)f.set(e);else for(g in e)f[g]=e[g];for(g in l){var n=l[g].set(f);void 0!==n&&(f[g]=n)}m[c]=!0;return a.when(d.put(f),function(){delete h[c];delete m[c]})}}var b=this,d=this.store,h=this.dirty,f=new a,l=f.promise,g=function(a){var c;return b.getBeforePut||!(c=b.row(a).data)?function(){return d.get(a)}:
function(){return c}},k;for(k in h){var y=c(k,h[k]);l=l.then(g(k)).then(y)}f.resolve();return l},revert:function(){this.dirty={};this.refresh()},_trackError:function(b){"string"==typeof b&&(b=g.hitch(this,b));try{var d=b()}catch(n){c.call(this,n)}return a.when(d,h,g.hitch(this,c))},newRow:function(){var a=this.inherited(arguments);this.noDataNode&&(f(this.noDataNode,"!"),delete this.noDataNode);return a},removeRow:function(a,c){var b={element:a};!c&&this.noDataMessage&&this.up(b).element===a&&this.down(b).element===
a&&(this.noDataNode=f(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},"dgrid/extensions/ColumnHider":function(){define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(k,d,g,a,b,l){var f,h,c=d("ie"),e=c&&d("quirks"),m=8>c||e?"htmlFor":"for";return k(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:l,
_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var a=this.subRows,c=!0,b,d;delete this._columnHiderFirstCheckbox;var e=0;for(b=a.length;e<b;e++){var h=0;for(d=a[e].length;h<d;h++)this._renderHiderMenuEntry(a[e][h]),c&&(c=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[a[e][h].id])}},_renderHiderMenuEntry:function(c){var d=c.id,e=a.escapeCssIdentifier(d,"-");c.hidden&&(c.hidden=!1,this._hideColumn(d),c.hidden=!0);if(!c.unhidable){var h=
b("div.dgrid-hider-menu-row");var f=this.domNode.id+"-hider-menu-check-"+e;d=this._columnHiderCheckboxes[d]=b(h,"input.dgrid-hider-menu-check.hider-menu-check-"+e+"[type\x3dcheckbox]");d.id=f;b(h,"label.dgrid-hider-menu-label.hider-menu-label-"+e+"["+m+"\x3d"+f+"]",c.label||c.field||"");b(this.hiderMenuNode,h);c.hidden||(d.checked=!0)}},renderHeader:function(){function a(a){a.stopPropagation()}var d=this,l=this.hiderMenuNode,m=this.hiderToggleNode,k;this.inherited(arguments);if(l){for(k in this._columnHiderRules)this._columnHiderRules[k].remove();
l.innerHTML=""}else m=this.hiderToggleNode=b(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(g(m,"click",function(a){d._toggleColumnHiderMenu(a)})),l=this.hiderMenuNode=b("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),l.id=this.id+"-hider-menu",this._listeners.push(g(l,"keyup",function(a){27===(a.charCode||a.keyCode)&&(d._toggleColumnHiderMenu(a),m.focus())})),
l.style.display="none",b(this.domNode,l),this._listeners.push(g(l,".dgrid-hider-menu-check:"+(9>c||e?"click":"change"),function(a){d._updateColumnHiddenState(a.target.id.substr(d.id.length+18),!a.target.checked)})),this._listeners.push(g(l,"mousedown",a),g(m,"mousedown",a)),h||(h=g.pausable(document,"mousedown",function(a){f&&f._toggleColumnHiderMenu(a)}),h.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);
for(var a in this._columnHiderRules)this._columnHiderRules[a].remove()},left:function(a,c){return this.right(a,-c)},right:function(a,c){a.element||(a=this.cell(a));for(var b=this.inherited(arguments),d=a;b.column.hidden;){b=this.inherited(arguments,[b,0<c?1:-1]);if(d.element===b.element)return a;d=b}return b},isColumnHidden:function(a){return!!this._columnHiderRules[a]},_toggleColumnHiderMenu:function(){var a=this._hiderMenuOpened,c=this.hiderMenuNode,b=this.domNode,d;c.style.display=a?"none":"";
a?c.style.height="":(c.offsetHeight>b.offsetHeight-12&&(c.style.height=b.offsetHeight-12+"px"),(d=this._columnHiderFirstCheckbox)&&d.focus());h[a?"pause":"resume"]();f=a?null:this;this._hiderMenuOpened=!a},_hideColumn:function(c){var b=this,e="#"+a.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";if(!(this._columnHiderRules[c]||(this._columnHiderRules[c]=a.addCssRule(e+a.escapeCssIdentifier(c,"-"),"display: none;"),8!==d("ie")&&10!==d("ie")||d("quirks")))){var h=a.addCssRule(".dgrid-row-table",
"display: inline-table;");window.setTimeout(function(){h.remove();b.resize()},0)}},_showColumn:function(a){this._columnHiderRules[a]&&(this._columnHiderRules[a].remove(),delete this._columnHiderRules[a])},_updateColumnHiddenState:function(a,c){this[c?"_hideColumn":"_showColumn"](a);this.columns[a].hidden=c;g.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[a],hidden:c,bubbles:!0});this.resize()},toggleColumnHiddenState:function(a,c){"undefined"===typeof c&&(c=!this._columnHiderRules[a]);
this._updateColumnHiddenState(a,c);this._columnHiderCheckboxes[a].checked=!c}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(k,d,g,a,b,l,f){function h(a,c){var b=c[2];a=a[b?"columnSets":"subRows"][c[1]];return b?a[c[2]]:a}function c(a,c,b){c[2]?a.columnSets[c[1]][c[2]]=b:a.subRows[c[1]]=b}function e(a,c){return c.slice(("dgrid-"+
a+"-").length)}var m=/(\d+)(?:-(\d+))?$/;k=d(l,{copyState:function(){return!1},checkAcceptance:function(a,c){return a==this},_legalMouseDown:function(a){return-1<a.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var d=this.grid,f=m.exec(e(d.id,b[0].getAttribute("dndType"))),l=f[2]?"columnSets":"subRows",n=h(d,f),k=d.columns;this.inherited(arguments);f&&setTimeout(function(){var e=g.map(b[0].parentNode.childNodes,function(a){return k[a.columnId]});
c(d,f,e);e={grid:d,subRow:e,column:k[b[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};e[l]=d[l];a.emit(d.domNode,"dgrid-columnreorder",e)?d.set(l,d[l]):(c(d,f,n),d.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});d=d(null,{columnDndConstructor:k,_initSubRowDnd:function(a,c){var b;var d=0;for(b=a.length;d<b;d++){var e=a[d];if(!1!==e.reorderable&&(e=e.headerNode,"TH"!=e.tagName&&(e=e.parentNode),f(e,".dojoDndItem[dndType\x3d"+c+"]"),!h))var h=e.parentNode}h&&
this._columnDndSources.push(new this.columnDndConstructor(h,{horizontal:!0,grid:this}))},renderHeader:function(){var a="dgrid-"+this.id+"-",c;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets){var b=0;for(c=this.columnSets.length;b<c;b++)g.forEach(this.columnSets[b],function(c,d){this._initSubRowDnd(c,a+b+"-"+d)},this)}else g.forEach(this.subRows,function(c,b){this._initSubRowDnd(c,a+b)},this)},_destroyColumns:function(){this._columnDndSources&&g.forEach(this._columnDndSources,
function(a){a.destroy()});this.inherited(arguments)}});d.ColumnDndSource=k;return d})},"mw-gesture/GestureDetector":function(){define(["dojo/_base/declare","./input/PointerInput","./input/WheelInput"],function(k,d,g){return function(a,b){var l=[],f=d.fromNode(a),h=g.fromNode(a);a=function(a){Array.isArray(a)||(a=[a]);a.forEach(function(a){a.attachInputStream(f);a.attachInputStream(h)});l=l.concat(a)};b&&a(b);return{add:a,remove:function(a){},getAttachedRecognizers:function(){return l},destroy:function(){f.destroy();
h.destroy();l.forEach(function(a){return a.destroy()})},preventFocus:function(){f.preventFocus()},allowFocus:function(){f.allowFocus()},stopPropagation:function(){f.stopPropagation();h.stopPropagation()},allowPropagation:function(){f.allowPropagation();h.allowPropagation()},preventDefault:function(){f.preventDefault();h.preventDefault()},allowDefault:function(){f.allowDefault();h.allowDefault()},addHoverListeners:function(){return f.addHoverListeners()},resetAll:function(){f.clearInput();l&&l.forEach(function(a){return a.reset()})}}}})},
"mw-gesture/input/PointerInput":function(){define(["../util/DomUtils","../util/InputDataUtil","../events/Observable","../events/RemovableGroup","./PointerInputUtil"],function(k,d,g,a,b){var l=k.addDomListener,f=k.preventDefault,h=k.stopPropagation;k=b.getActiveImplementations;var c=b.getImplementationForEvent,e=b.addListenersToRemovable,m=b.updateLastTouch,n=b.isCompatibilityEvent,q=k(),p=null;return{fromNode:function(b,k){var r=a(),t=a(),x=a(),v=a(),w=a(),A=a(),z=b.ownerDocument,D=[],E=[],B=g(),
C=function(a){var c=a;p=m(a,p);n(a,p)&&(c=null);return c},G=function(a){B.emit(d.createFromPointers(D,a,b))},I=function(a){if(a=C(a))c(a).addEventToPointers(D,a),G(a)},N=function(a){if(a=C(a)){var b=c(a);b.addEventToPointers(D,a);G(a);b.removeEventFromPointers(D,a);0===D.length&&t.remove()}},L=function(a){if(a=C(a)){var b=c(a);b&&b.addEventToPointers(D,a);t.remove();G(a);D=[]}},J=function(a){(a=C(a))&&0===a.buttons&&(E=[a],B.emit(d.createFromPointers(E,a,b)))};r=e(q,r,b,{down:function(a){if(a=C(a))c(a).addEventToPointers(D,
a),t=e(q,t,z,{move:I,up:N,cancel:L},!0),r.own(l(b,"dragstart",L,!1)),r.own(l(b,"drag",L,!1)),r.own(l(b,"dragend",L,!1)),G(a)}},!1);return{EVENT_SET:"pointers",subscribe:B.subscribe,preventFocus:function(){x.remove();x=e(q,x,b,{down:f},!1)},allowFocus:function(){x.remove()},stopPropagation:function(){v.remove();v=e(q,v,b,{down:h,move:h,up:h},!1)},allowPropagation:function(){v.remove()},preventDefault:function(){w.remove();w=e(q,w,b,{down:f,move:f,up:f},!1)},allowDefault:function(){w.remove()},clearInput:function(){t.remove();
D=[]},addHoverListeners:function(){A.remove();return A=e(q,A,b,{move:J},!1)},destroy:function(){r.remove();t.remove();x.remove();v.remove();w.remove();A.remove()}}}}})},"mw-gesture/util/DomUtils":function(){define([],function(){return{isAncestorNode:function(k,d){for(var g=!1;d;){if(d===k){g=!0;break}d=d.parentNode}return g},addDomListener:function(k,d,g,a){k.addEventListener(d,g,a);return{remove:function(){k.removeEventListener(d,g,a)}}},preventDefault:function(k){k.preventDefault()},stopPropagation:function(k){k.stopPropagation()}}})},
"mw-gesture/util/InputDataUtil":function(){define(["./InputTypes","./PointerUtil","../util/PointerProperties","../input/PointerInputUtil"],function(k,d,g){var a=d.isPrimary,b=d.getXY,l=g.calculateProperties,f={pointerdown:k.DOWN,pointermove:k.MOVE,pointerup:k.UP,pointercancel:k.CANCEL,touchstart:k.DOWN,touchmove:k.MOVE,touchend:k.UP,touchcancel:k.CANCEL,mousedown:k.DOWN,mousemove:k.MOVE,mouseup:k.UP,"":k.CANCEL},h=function(a){var c=null;a&&a.srcEvent&&(c=f[a.srcEvent.type]);return c};return{createFromPointers:function(a,
b,d){b._softTimestamp=Date.now()+(b.detail?b.detail:0);a=a.slice();var c=l(a,b),e=b?b.target:null;e||(b.touches&&b.touches[0]?e=b.touches[0].target:b.changedTouches&&b.changedTouches[0]&&(e=b.changedTouches[0].target));return{type:"inputData",pointers:a,properties:c,changedPointers:[b],srcEvent:b,target:e,srcNode:d}},createTimeout:function(){return{type:"inputData",isTimeout:!0}},isSinglePrimary:function(c){return c.pointers&&1===c.pointers.length&&a(c.pointers[0])},isDown:function(a){return h(a)===
k.DOWN},isMove:function(a){return h(a)===k.MOVE},isUp:function(a){return h(a)===k.UP},isCancel:function(a){return h(a)===k.CANCEL},isTimeout:function(a){return!!a.isTimeout},isWheel:function(a){return(a=a.srcEvent)&&"wheel"===a.type},getInputType:h,getCenterPoint:function(a){var c={x:NaN,y:NaN};a&&a.properties&&(c=a.properties.center);return c},getPointerLocations:function(a){return a.pointers.map(b)},getTimestamp:function(a){return a&&a.srcEvent?a.srcEvent._softTimestamp:NaN}}})},"mw-gesture/util/InputTypes":function(){define([],
function(){return{DOWN:"down",MOVE:"move",UP:"up",CANCEL:"cancel"}})},"mw-gesture/util/PointerUtil":function(){define([],function(){return{isPrimary:function(k){return k.isPrimary||1===k.pointerId||0===k.button||"Touch"===k.constructor.name},getXY:function(k){return{x:k.clientX,y:k.clientY}}}})},"mw-gesture/util/PointerProperties":function(){define(["./GeomUtil","./TimeUtils","./PointerUtil"],function(k,d,g){var a=g.getXY,b=d.getTimestamp,l=k.getCenter,f=k.getAngle,h=k.getSpread,c=k.computeDistance,
e=k.computeDirection;return{calculateProperties:function(c,d){c=c.map(a);return{center:l(c),angle:f(c),spread:h(c),timestamp:b(d)}},compareProperties:function(a,b,d){b||(b=a);d||(d=b);var h=a.timestamp-d.timestamp,f=c(d.center,a.center);return{center:{current:a.center,initial:b.center,previous:d.center,delta:c(b.center,a.center),velocity:{x:f.x/h,y:f.y/h},direction:e(d.center,a.center)},angle:{current:a.angle,initial:b.angle,previous:d.angle,delta:a.angle-b.angle,velocity:(a.angle-d.angle)/h},spread:{current:a.spread,
initial:b.spread,previous:d.spread,delta:a.spread-b.spread,velocity:(a.spread-d.spread)/h},timestamp:{current:a.timestamp,initial:b.timestamp,previous:d.timestamp,delta:a.timestamp-b.timestamp}}}}})},"mw-gesture/util/GeomUtil":function(){define(["./Directions"],function(k){var d=k.DIRECTION_UP,g=k.DIRECTION_RIGHT,a=k.DIRECTION_DOWN,b=k.DIRECTION_LEFT,l=k.DIRECTION_NONE,f=function(a){return a.x},h=function(a){return a.y},c=function(a){return{max:{x:Math.max.apply(null,a.map(f)),y:Math.max.apply(null,
a.map(h))},min:{x:Math.min.apply(null,a.map(f)),y:Math.min.apply(null,a.map(h))}}},e=function(a,c){return{x:c.x-a.x,y:c.y-a.y}},m=function(a,c){return n(e(a,c))},n=function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))};return{arePointsWithinRadius:function(a,c,b){var d=void 0,e=void 0;d=void 0;if(!a||!c)return!1;d=a.x-c.x;e=a.y-c.y;d=Math.sqrt(d*d+e*e);return d<b},getCenter:function(a){var b=c(a);a=b.max;b=b.min;return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getAngle:function(a){var b=c(a);a=b.max;
b=b.min;return 180/Math.PI*Math.atan2(a.y-b.y,a.x-b.x)},getSpread:function(a){a=c(a);return m(a.max,a.min)},computeDistance:e,computeMagnitude:n,computeDistanceMagnitude:m,computeDirection:function(c,e){var h=l,f=e.x-c.x;c=e.y-c.y;if(0!==f||0!==c)h=Math.abs(f)>Math.abs(c)?0>f?b:g:0>c?d:a;return h}}})},"mw-gesture/util/Directions":function(){define([],function(){return{DIRECTION_UP:"up",DIRECTION_RIGHT:"right",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_NONE:"none"}})},"mw-gesture/util/TimeUtils":function(){define([],
function(){return{isWithinTimeout:function(k,d,g){return Math.abs(k-d)<g},getTimestamp:function(k){return k._softTimestamp?k._softTimestamp:k.timestamp}}})},"mw-gesture/input/PointerInputUtil":function(){define(["../util/DomUtils","./impl/pointer","./impl/touch","./impl/mouse"],function(k,d,g,a){var b=k.addDomListener;k=!!window.PointerEvent;var l="ontouchstart"in window,f=k?[d]:l?[g,a]:[a],h=!k&&l,c={mousedown:!0,mousemove:!0,mouseup:!0},e={pointerdown:!0,pointermove:!0,pointerup:!0},m={touchstart:!0,
touchmove:!0,touchend:!0,touchcancel:!0},n=function(a){return a&&a.type&&c[a.type]},q=function(a){return a&&a.type&&e[a.type]},p=function(a){return a&&a.type&&m[a.type]};return{isTouchEvent:p,isPointerEvent:q,isMouseEvent:n,getActiveImplementations:function(){return f},getImplementationForEvent:function(c){var b=null;n(c)&&(b=a);q(c)&&(b=d);p(c)&&(b=g);return b},addListenersToRemovable:function(a,c,d,e,h){a.forEach(function(a){for(var f in e)e.hasOwnProperty(f)&&c.own(b(d,a[f],e[f],h))});return c},
updateLastTouch:function(a,c){p(a)&&(a._softTimestamp=Date.now(),c=a);return c},isCompatibilityEvent:function(a,c){var b=!1;if(c&&n(a)&&h)a:{b=a.clientX;a=a.clientY;var d=Date.now();if(!(c._softTimestamp+1E3<=d)){c=c.changedTouches;for(var e in c)if(c.hasOwnProperty(e)&&"length"!==e){d=c[e];var f=Math.abs(a-d.clientY);if(25>=Math.abs(b-d.clientX)&&25>=f){b=!0;break a}}}b=!1}return b}}})},"mw-gesture/input/impl/pointer":function(){define([],function(){var k=function(d,g){var a=void 0,b=-1;for(a=0;a<
d.length;a++)d[a].pointerId===g.pointerId&&(b=a);-1===b&&(b=d.length);return b};return{type:"pointer",down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel",addEventToPointers:function(d,g){var a=k(d,g);d[a]=g;g.pointerType||(g.pointerType="mouse")},removeEventFromPointers:function(d,g){g=k(d,g);d.splice(g,1)}}})},"mw-gesture/input/impl/touch":function(){define([],function(){var k=function(d,g){var a=void 0,b=-1;for(a=0;a<d.length;a++)d[a].identifier===g.identifier&&(b=a);-1===
b&&(b=d.length);return b};return{type:"touch",down:"touchstart",move:"touchmove",up:"touchend",cancel:"touchcancel",addEventToPointers:function(d,g){var a=g.touches,b=g.changedTouches[0],l;for(l in a)if(a.hasOwnProperty(l)&&"length"!==l){var f=k(d,a[l]);a[l].pointerId=f+1;d[f]=a[l]}g.pointerType="touch";"pageX pageY screenX screenY clientX clientY target".split(" ").forEach(function(a){try{a in g||(g[a]=b[a])}catch(c){}})},removeEventFromPointers:function(d,g){d.splice(0,d.length)}}})},"mw-gesture/input/impl/mouse":function(){define([],
function(){return{type:"mouse",down:"mousedown",move:"mousemove",up:"mouseup",cancel:"",addEventToPointers:function(k,d){if(0===d.button||2===d.button)d.pointerId=1,k[0]=d,d.pointerType="mouse"},removeEventFromPointers:function(k,d){var g=void 0,a=-1;for(g=0;g<k.length;g++)k[g].pointerId===d.pointerId&&(a=g);-1===a&&(a=k.length);k.splice(a,1)}}})},"mw-gesture/events/Observable":function(){define(["dojo/aspect"],function(k){return function(){var d={emit:function(d){}};return{subscribe:function(g){var a=
k.after(d,"emit",g,!0);return{unsubscribe:function(){a.remove()}}},emit:function(g){d.emit(g)}}}})},"mw-gesture/events/RemovableGroup":function(){define([],function(){return function(){var k=[];return{own:function(d,g){var a=d;g&&(a={remove:function(){d[g].call(d)}});k.push(a)},remove:function(){k.forEach(function(d){d.remove()});k=[]}}}})},"mw-gesture/input/WheelInput":function(){define(["../util/DomUtils","../util/InputDataUtil","../events/Observable","../events/RemovableGroup"],function(k,d,g,
a){var b=k.addDomListener,l=k.preventDefault,f=k.stopPropagation;return{fromNode:function(h,c){var e=a(),m=a(),k=a(),q=g();e.own(b(h,"wheel",function(a){q.emit(d.createFromPointers([],a,h))},!1));return{EVENT_SET:"wheel",subscribe:q.subscribe,stopPropagation:function(){m.remove();m.own(b(h,"wheel",f,!1))},allowPropagation:function(){m.remove()},preventDefault:function(){k.remove();k.own(b(h,"wheel",l,!1))},allowDefault:function(){k.remove()},destroy:function(){e.remove()}}}}})},"mw-form/ContextMenu":function(){define("dojo/_base/declare dojo/_base/lang dijit/focus dojo/keys dojo/on dojo/query dijit/registry dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-form/mixins/MenuKeyNavMixin mw-form/mixins/OnOpenMixin mw-form/mixins/OnCloseMixin mw-form/mixins/ContainerFocusMixin mw-form/mixins/MenuFocusMixin mw-form/mixins/property/MaxHeightMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w){return k(v.validate([c,n,e,m,q,p,t,r,u,y,x]),{baseClass:"mwWidget mwContextMenu",disabled:!1,templateString:w,postCreate:function(){this.inherited(arguments);this._activeEventListeners=[];this._onOpenEventListenersInfo=[{event:"blur",target:window,callback:d.hitch(this,function(a){this._destroyed?this._removeOnOpenEventListeners():a.target===window&&this.closeMenu()}),useCapture:!0},{event:"resize",target:window,callback:d.hitch(this,function(a){this._destroyed?
this._removeOnOpenEventListeners():(a.target===window||this._shouldCloseMenu(a.target))&&this.closeMenu()}),useCapture:!0},{event:"wheel",target:document.body,callback:d.hitch(this,"_onWheel")},{event:"mousewheel",target:document.body,callback:d.hitch(this,"_onWheel")},{event:"mousedown",target:document.body,callback:d.hitch(this,function(a){this._destroyed?this._removeOnOpenEventListeners():this._shouldCloseMenu(a.target)&&this.closeMenu()}),useCapture:!0},{event:"pointerdown",target:document.body,
callback:d.hitch(this,function(a){this._destroyed?this._removeOnOpenEventListeners():this._shouldCloseMenu(a.target)&&this.closeMenu()}),useCapture:!0},{event:"mouseenter",target:document.body,callback:d.hitch(this,this._onMouseMovement),useCapture:!0},{event:"mouseover",target:document.body,callback:d.hitch(this,this._onMouseMovement),useCapture:!0},{event:"contextmenu",target:this.domNode,callback:function(a){this._destroyed?this._removeOnOpenEventListeners():a.preventDefault()},useCapture:!0},
{event:"keydown",target:this.domNode,callback:d.hitch(this,function(c){this._destroyed?this._removeOnOpenEventListeners():c.keyCode===a.ESCAPE&&(this.closeMenu(),document.body.classList.contains("mwHasFocusManager")||g.focus(this._previousFocusNode))})},{event:"change",target:this.domNode,callback:d.hitch(this,function(a){this._destroyed?this._removeOnOpenEventListeners():(a=f.getEnclosingWidget(a.target),a.domNode.hasAttribute("data-composite-child")&&(a=f.byNode(document.getElementById(a.domNode.getAttribute("data-composite-primary-id")))),
(a.get("closeMenuOnClick")||void 0===a.get("closeMenuOnClick"))&&this.closeMenu())})},{event:"close",target:this.domNode,callback:d.hitch(this,this._cleanupOnClose)}];this.own(b(this.domNode,"open",d.hitch(this,this._handleOpen)));this.set("disabled",this.disabled)},_setDisabledAttr:function(a){if("boolean"===typeof value)throw Error("Expected 'disabled' property to be a boolean");a?this._removeRightClickEventListener():this._addRightClickEventListener();this._set("disabled",a)},_addRightClickEventListener:function(){this._rightClickListener||
(this._rightClickListener=b(document.body,"contextmenu",this._onContextMenu.bind(this)),this.own(this._rightClickListener))},_removeRightClickEventListener:function(){this._rightClickListener&&(this._rightClickListener.remove(),delete this._rightClickListener)},_addOnOpenEventListeners:function(){setTimeout(function(){if(this._activeEventListeners.length<this._onOpenEventListenersInfo.length)for(var a=0;a<this._onOpenEventListenersInfo.length;a++)if(this._onOpenEventListenersInfo[a].useCapture)this._onOpenEventListenersInfo[a].target.addEventListener(this._onOpenEventListenersInfo[a].event,
this._onOpenEventListenersInfo[a].callback,!0),this._activeEventListeners.push({target:this._onOpenEventListenersInfo[a].target,event:this._onOpenEventListenersInfo[a].event,callback:this._onOpenEventListenersInfo[a].callback,useCapture:!0});else{var c=b(this._onOpenEventListenersInfo[a].target,this._onOpenEventListenersInfo[a].event,this._onOpenEventListenersInfo[a].callback);this.own(c);this._activeEventListeners.push(c)}}.bind(this),0)},_removeOnOpenEventListeners:function(){if(0<this._activeEventListeners.length)for(;0<
this._activeEventListeners.length;){var a=this._activeEventListeners.pop();a.useCapture?a.target.removeEventListener(a.event,a.callback,!0):a.remove()}},_onWheel:function(a){this._destroyed?this._removeOnOpenEventListeners():this.isDescendant(a.target)||this.closeMenu()},isMenuOpen:function(){return this.domNode&&this.domNode.parentElement&&"none"!==this.domNode.parentElement.style.display},open:function(a){this.openMenu(a)},openMenu:function(a){if(!this.get("disabled")&&!this._destroyed){this._computeTargetNodes(a);
a.doNotClose=this._nodeMatchesSelector(a.target,".galleryPopup, .galleryPopup  *, .mwSectionPopup, .mwSectionPopup *, [data-type\x3d'PopupList'], [data-type\x3d'PopupList'] *");if(a.target){var c=f.getEnclosingWidget(a.target);c&&c.id&&this.domNode.setAttribute("data-target-id",c.id)}if("contextmenu"===a.type)a.mwEventData&&a.mwEventData.around?this._handleOpenWithDomNode(a):this._handleRightClick(a);else if(a.target instanceof HTMLElement&&isNaN(a.x)&&isNaN(a.y))this._handleOpenWithDomNode(a);else{if(a.target||
isNaN(a.x)||isNaN(a.y))throw Error("Invalid parameters passed");this._handleOpenWithXY(a)}}},_onMouseMovement:function(a){this._destroyed?this._removeOnOpenEventListeners():this.isDescendant(a.target)||(a.stopImmediatePropagation(),a.preventDefault())},_nodeMatchesSelector:function(a,c){var b=!1;a&&c&&(a.matches?b=a.matches(c):a.matchesSelector?b=a.matchesSelector(c):a.webkitMatchesSelector?b=a.webkitMatchesSelector(c):a.mozMatchesSelector?b=a.mozMatchesSelector(c):a.msMatchesSelector?b=a.msMatchesSelector(c):
a.oMatchesSelector&&(b=a.oMatchesSelector(c)));return b},_handleRightClick:function(a){var c;if(0<=this._contextMenuNodes.indexOf(a.target)){this._previousFocusNode=document.activeElement;if(this.willOpenCallback&&(c=this.willOpenCallback({target:a.target,x:a.clientX,y:a.clientY})))return;1>a.pageX&&1>a.pageY?this._showMenu({around:a.target,popup:this,doNotClose:a.doNotClose}):this._showMenu({x:a.pageX,y:a.pageY,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithDomNode:function(a){var c,b=a.mwEventData||
{};if(0<=this._contextMenuNodes.indexOf(a.target)){this._previousFocusNode=a.target;if(this.willOpenCallback&&(c=this.willOpenCallback({target:a.target})))return;c=b.around||a.target;this._showMenu({target:a.target,around:c,popup:this,doNotClose:a.doNotClose})}},_handleOpenWithXY:function(a){var c;if(this.willOpenCallback&&(c=this.willOpenCallback({x:a.x,y:a.y,target:a.target||document.elementFromPoint(a.x,a.y)})))return;this._showMenu({x:a.x,y:a.y,popup:this})},_showMenu:function(a){this._destroyed||
0===this.domNode.childElementCount||(this._closeEventData?this._closeEventData.mwFocusData?this._closeEventData.mwFocusData.previousFocusNode=document.activeElement:this._closeEventData.mwFocusData={previousFocusNode:document.activeElement}:this._closeEventData={mwFocusData:{previousFocusNode:document.activeElement}},this._lastKnownInvokingNode=a.target||document.elementFromPoint(a.x,a.y),h.open(a))},_handleOpen:function(){this._addOnOpenEventListeners()},close:function(){this.closeMenu()},closeMenu:function(){h.close(this)},
_cleanupOnClose:function(){this._removeOnOpenEventListeners();this.domNode&&(this.domNode.removeAttribute("data-target-id"),this.domNode.parentNode&&(this.domNode.parentNode.style.overflowX="visible",this.domNode.parentNode.style.overflowY="visible"))},_shouldCloseMenu:function(a){var c=!0;if(!this.isMenuOpen())return!1;a&&(this.isDescendant(a)||a.classList.contains("dijitPopup")&&this.isDescendant(this,a)||this.targetNodes&&0<=this.targetNodes.indexOf(a))&&(c=!1);return c},_setTargetNodesAttr:function(a){if(null===
a||void 0===a)a=[];this._set("targetNodes",a)},_computeTargetNodes:function(a){this._contextMenuNodes=[];this.targetNodes&&this.targetNodes.forEach(function(c){"string"===typeof c?l(c).forEach(function(a){var c=a.querySelectorAll("*");Object.keys(c).forEach(function(a){this._contextMenuNodes.push(c[a])},this);this._contextMenuNodes.push(a)},this):"function"===typeof c?(c=c(a))&&(1<c.length?c.forEach(function(a){this._contextMenuNodes.push(a)}.bind(this)):this._contextMenuNodes.push(c)):this._contextMenuNodes.push(c)},
this);return this._contextMenuNodes},_onContextMenu:function(a){a.preventDefault();setTimeout(function(){this.openMenu(a)}.bind(this),0)},_getTargetNode:function(a){null!==a&&a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));return a},_createCallback:function(a,c,b,d){var e=0,h;void 0===b&&(b=200);return function(f){!0===d&&-0<=this._computeTargetNodes(f).indexOf(f.target)&&f.preventDefault();e+=1;1===e?h=setTimeout(function(){e=0;a(f)},
b):2===e&&(clearTimeout(h),e=0,c(f))}},destroyRecursive:function(){this._removeOnOpenEventListeners();this.inherited(arguments)},destroy:function(){this._removeOnOpenEventListeners();this.inherited(arguments)}})})},"mw-form/mixins/MenuKeyNavMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dijit/registry mw-form/mixins/ContainerFocusMixin".split(" "),function(k,d,g,a,b,l){k=k(null,{_lastDirection:null,postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,
"keydown",d.hitch(this,"_onKeyDown")),g(this.domNode,"synkeydown",d.hitch(this,"_onKeyDown")),g(this.domNode,"focusin",this._onFocusIn.bind(this)))},_onFocusIn:function(a){(a=b.getEnclosingWidget(a.target))&&a.get("id")&&this.focusNode.setAttribute("aria-activedescendant",a.get("id"));setTimeout(function(){this._lastDirection&&(this._lastDirection=null)},0)},_onKeyDown:function(b){b.keyCode===a.DOWN_ARROW?(this._lastDirection="down",this._handleFocusNext(b.target),b.preventDefault()):b.keyCode===
a.UP_ARROW?(this._lastDirection="up",this._handleFocusPrevious(b.target),b.preventDefault()):b.keyCode===a.PAGE_UP||b.keyCode===a.HOME?(this._lastDirection="top",this._moveToFirstChild(b.target),b.preventDefault()):b.keyCode===a.PAGE_DOWN||b.keyCode===a.END?(this._lastDirection="bottom",this._moveToLastChild(b.target),b.preventDefault()):b.keyCode===a.TAB&&(b.shiftKey?(this._lastDirection="up",this._handleFocusPrevious(b.target)):(this._lastDirection="down",this._handleFocusNext(b.target)),b.preventDefault())},
_handleFocusNext:function(a){(null===a||this._isActiveElement(a))&&this.focusNext(this._getTargetNode(a))},_handleFocusPrevious:function(a){(null===a||this._isActiveElement(a))&&this.focusPrevious(this._getTargetNode(a))},_moveToFirstChild:function(){this.focusFirst()},_moveToLastChild:function(){this.focusLast()},_getTargetNode:function(a){return a},_isActiveElement:function(a){return a.hasAttribute("data-composite-primary")?a.contains(document.activeElement):a===document.activeElement}});k._dependencies=
[{mixin:l,orderDependent:!1}];return k})},"mw-form/mixins/ContainerFocusMixin":function(){define(["dojo/_base/declare","mw-dom-utils/domUtils","dijit/focus"],function(k,d,g){return k(null,{isCyclic:!0,_setIsCyclicAttr:function(a){if("boolean"!==typeof a)throw Error("'isCyclic' property expects a boolean value.");this._set("isCyclic",a)},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwContainerFocusMixin");this.focusNode=this.focusNode||this.domNode},focus:function(a){this.inherited(arguments);
a?this._focusNearestFocusableNode(a,!0,"next"):this.focusNode&&d.isFocusable(this.focusNode)&&g.focus(this.focusNode)},focusNext:function(a){this.inherited(arguments);a||(a=document.activeElement&&d.isDescendant(document.activeElement,this.domNode)?document.activeElement:this.domNode);this._focusNearestFocusableNode(a,!1,"next")},focusPrevious:function(a){this.inherited(arguments);a||(a=document.activeElement&&d.isDescendant(document.activeElement,this.domNode)?document.activeElement:this.domNode);
this._focusNearestFocusableNode(a,!1,"previous")},focusFirst:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"next")},focusLast:function(){this.inherited(arguments);this._focusNearestFocusableNode(null,!1,"previous")},_focusNearestFocusableNode:function(a,b,l){a=this._getAppropriateNodeFromInput(a);0<d.getChildren(this.domNode).length&&(null==a||d.isDescendant(a,this.domNode,!0))&&(a=this._findFocusableChild(a,b,l),null!==a&&(d.isElementInViewport(a)||a.scrollIntoView(!0),
g.focus(a)))},_findFocusableChild:function(a,b,l){var f=!1,h,c=!1;a=this._getAppropriateNodeFromInput(a);null==b&&(b=!0);if(!l||0>["next","previous"].indexOf(l))l="next";if(a===this.domNode)f=!0;else for((h=a)&&!b&&(h=d.getAdjacentElement(h,l));h&&!d.isFocusable(h);){if(h===a){if(c)return null;c=!0}h=d.getAdjacentElement(h,l)}if(f||!h&&this.isCyclic||null==a){switch(l){case "next":h=d.getFirstChild(this.domNode);break;case "previous":h=d.getLastChild(this.domNode)}b=this.isCyclic;this.isCyclic=!1;
h=this._findFocusableChild(h,!0,l);this.isCyclic=b}h&&(a=this._getAppropriateNodeFromInput(h));return a&&d.isFocusable(a)?a:null},_getAppropriateNodeFromInput:function(a){if(null==a)return null;a=a.focusNode||a.domNode||a;if(!(a instanceof Element))throw Error("Input argument expects a Widget or DOM node.");return a}})})},"mw-dom-utils/domUtils":function(){define(["dojo/sniff"],function(k){var d={},g={INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",INVALID_STRING:"The input parameter must be of type 'string'.",
INVALID_BOOLEAN:"The input parameter must be of type 'boolean'.",INVALID_OBJECT:"The input parameter must be of type 'object'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},a=function(a){if(!(a instanceof
Element))throw Error(g.INVALID_ELEMENT);},b=function(a){if(-1===["String","string"].indexOf(typeof a))throw Error(g.INVALID_STRING);},l=function(a){if(-1===["Boolean","boolean"].indexOf(typeof a))throw Error(g.INVALID_BOOLEAN);},f=function(a){if(-1===["Object","object"].indexOf(typeof a))throw Error(g.INVALID_OBJECT);};d._qeSetup=function(){d._qeTools={};d._qeTools.errorMessages=g;d._qeTools.validateElement=a;d._qeTools.validateString=b;d._qeTools.validateBoolean=l;d._qeTools.validateObject=f;d._qeTools.overrideErrorMessaged=
function(a){g=a};d._qeTools.overrideValidateElement=function(b){a=b};d._qeTools.overrideValidateString=function(a){b=a};d._qeTools.overrideValidateBoolean=function(a){l=a};d._qeTools.overrideValidateObject=function(a){f=a}};d.isLeftMouseButton=function(a){return!0===a.synthetic&&k("trident")?1===a.button:0===a.button};d.parseFocusEvent=function(a){if(!(a instanceof FocusEvent))throw Error(g.INVALID_FOCUS_EVENT);var c={};c.lostFocusNode=a.target;c.gainedFocusNode=k("chrome")||k("safari")?a.relatedTarget:
document.activeElement;c.type=a.type;c.eventdata=a;return c};d.getParent=function(b){a(b);return b.parentNode};d.findParentNode=function(a,c,b){var d=null,e;a.domNode&&(a=a.domNode);for(;a&&a!==window.document;){if(b){if(a.hasAttribute(c)&&a.getAttribute(c)===b){d=a;break}}else{if(a.hasAttribute(c)){d=a;break}if(a.classList.contains(c)){d=a;break}}a=(e=a.getAttribute("dijitpopupparent"))?document.getElementById(e):a.parentNode}return d};d.getNodeType=function(b){a(b);return{1:"Element",3:"Text",7:"Processing Instruction",
8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[b.nodeType]};d.getById=function(a){b(a);return window.document.getElementById(a)};d.getByClass=function(a){b(a);return window.document.getElementsByClassName(a)};d.getByAttr=function(a){b(a);return window.document.querySelectorAll("["+a+"]")};d.getByAttrValue=function(a,c){b(a);b(c);return window.document.querySelectorAll("["+a+"\x3d"+c.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")};d.getByName=function(a){b(a);return window.document.getElementById("[name\x3d"+
a+"]")};d.getByTag=function(a){b(a);return window.document.getElementsByTagName(a)};d.matchesSelector=function(d,c){if(!d||!c)return!1;a(d);b(c);return d[d.msMatchesSelector?"msMatchesSelector":"matches"](c)};d.getComputedStyle=function(d,c){a(d);return c?(b(c),window.getComputedStyle(d,null)[c]):window.getComputedStyle(d,null)};d.getStyle=function(d,c){a(d);b(c);if(void 0===d.style[c])throw Error(g.INVALID_STYLE);return d.style[c]};d.setStyle=function(d,c,e){a(d);b(c);b(e);d.style[c]=e;if(d.style[c]!==
e)throw Error(g.INVALID_VALUE);};d.hasAttr=function(d,c){a(d);b(c);return d.hasAttribute(c)};d.hasAttrValue=function(d,c,e){a(d);b(c);b(e);return d.hasAttribute(c)&&d.getAttribute(c)===e};d.getAttr=function(d,c){a(d);b(c);return d.getAttribute(c)};d.setAttr=function(d,c,e){a(d);b(c);b(e);d.setAttribute(c,e)};d.addAttr=function(d,c){a(d);b(c);d.setAttribute(c,"")};d.removeAttr=function(d,c){a(d);b(c);d.removeAttribute(c)};d.getClasses=function(b){a(b);return b.classList?b.classList:{_element:b,_getClassArray:function(){return this._element.className.split(" ")},
_updateClassName:function(a){this._element.className=a.join(" ");this.length=a.length},length:b.className.split(" ").length,item:function(a){return this._getClassArray()[a]},contains:function(a){for(var c=this._getClassArray(),b=0;b<c.length;b++)if(c[b]===a)return!0;return!1},add:function(a){var c=this._getClassArray();c.push(a);this._updateClassName(c)},remove:function(a){var c=this._getClassArray();a=c.indexOf(a);0<=a&&(c.splice(a,1),this._updateClassName(c))},toggle:function(a){if(this.contains(a))return this.remove(a),
!1;this.add(a);return!0}}};d.getClass=function(a,c){if(null==c||"number"!==typeof c||0>c||0!==c%1)throw Error(g.INTEGER_INDEX);return d.getClasses(a).item(c)};d.addClass=function(a,c){if(null==c||"string"!==typeof c)throw Error(g.STRING_INDEX);return d.getClasses(a).add(c)};d.removeClass=function(a,c){if(null==c||"string"!==typeof c)throw Error(g.STRING_INDEX);return d.getClasses(a).remove(c)};d.toggleClass=function(a,c,b){if(null==c||"string"!==typeof c)throw Error(g.STRING_INDEX);return b?d.getClasses(a).toggle(c,
b):d.getClasses(a).toggle(c)};d.containsClass=function(a,c){if(null==c||"string"!==typeof c)throw Error(g.STRING_INDEX);return d.getClasses(a).contains(c)};d.classCount=function(a){return d.getClasses(a).length};d.getChildCount=function(b){a(b);return b.childElementCount};d.getChildren=function(b){a(b);return b.children};d.isDescendant=function(b,c,e){a(b);a(c);if(e&&b===c)return!0;for(;b&&b!==window.document;)if(b=d.getParent(b),b===c)return!0;return!1};d.isDescendantOrInLaw=function(a,c,b,f){if("function"!==
typeof b)throw Error(g.SPOUSE_NODE);var e=d.isDescendant(a,c,f);!1===e&&(a=b(a)||a.parentNode)&&a!==window.document&&(e=d.isDescendantOrInLaw(a,c,b,f));return e};d.getFirstChild=function(b){a(b);return!d.isContainer(b)||1>d.getChildCount(b)?null:d.getChildren(b)[0]};d.getLastChild=function(b){a(b);var c=d.getChildCount(b);return!d.isContainer(b)||1>c?null:d.getChildren(b)[c-1]};d.isContainer=function(b){a(b);return 0<d.getChildCount(b)};d.getAdjacentElement=function(b,c){a(b);if(!c||0>["next","previous"].indexOf(c))c=
"next";return b=b[c+"Sibling"]};d.getElementPositionInViewPort=function(b){a(b);b=b.getBoundingClientRect();return{x:b.left,y:b.top,w:b.right-b.left,h:b.bottom-b.top}};d.getElementPositionOnPage=function(b){a(b);b=d.getElementPositionInViewPort(b);b.x+=window.pageXOffset;b.y+=window.pageYOffset;return b};d.setPositionExtents=function(a,c){f(c);var b={};b.top=c.t?c.t:c.top?c.top:"auto";b.right=c.r?c.r:c.right?c.right:"auto";b.bottom=c.b?c.b:c.bottom?c.bottom:"auto";b.left=c.l?c.l:c.left?c.left:"auto";
["top","right","bottom","left"].forEach(function(c){d.setStyle(a,c,b[c])})};d.isFocusable=function(b){a(b);return b&&!b.hasAttribute("disabled")&&(!b.hasAttribute("aria-disabled")||"true"!==b.getAttribute("aria-disabled"))&&"none"!==b.style.display&&!b.hasAttribute("data-refuse-key-nav")};d.isElementInViewport=function(b,c){a(b);var d=b.getBoundingClientRect();var f=window.innerWidth||document.documentElement.clientWidth;var h=window.innerHeight||document.documentElement.clientHeight;var l=function(a,
c){return document.elementFromPoint(a,c)};return 0>=d.width||0>=d.height||0>d.right||0>d.bottom||d.left>f||d.top>h?!1:2>d.width&&2>d.height?(f=d.left+(d.right-d.left)/2,h=d.top+(d.bottom-d.top)/2,b.contains(l(f,h))):2>d.width?(f=d.left+(d.right-d.left)/2,c?b.contains(l(f,d.top+1))&&b.contains(l(f,d.bottom-1)):b.contains(l(f,d.top+1))||b.contains(l(f,d.bottom-1))):2>d.height?(h=d.top+(d.bottom-d.top)/2,c?b.contains(l(d.left+1,h))&&b.contains(l(d.right-1,h)):b.contains(l(d.left+1,h))||b.contains(l(d.right-
1,h))):c?b.contains(l(d.left+1,d.top+1))&&b.contains(l(d.right-1,d.top+1))&&b.contains(l(d.right-1,d.bottom-1))&&b.contains(l(d.left+1,d.bottom-1)):b.contains(l(d.left+1,d.top+1))||b.contains(l(d.right-1,d.top+1))||b.contains(l(d.right-1,d.bottom-1))||b.contains(l(d.left+1,d.bottom-1))};d._obscuredProps={};d._obscuredProps.sawPosAbsolute=!1;d._obscuredProps.elementPosition=null;d.isElementObscuredByParent=function(b,c){var e;a(b);var f=!1;if(e=d.getParent(b))if(c||(d._obscuredProps.elementPosition=
d.getElementPositionOnPage(b),d._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(b,null).position),b=d._obscuredProps.elementPosition,c=d._obscuredProps.sawPosAbsolute,e&&"Element"===d.getNodeType(e)&&"BODY"!==e.nodeName){var h=d.getElementPositionOnPage(e);e=window.getComputedStyle(e,null);/relative|absolute/.test(e.position)&&(c=d._sawPosAbsolute=!1);!c&&/hidden|auto|scroll/.test(e.overflow)&&(f=b.y<h.y||b.y+b.h>h.y+h.h||b.x<h.x||b.x+b.w>h.x+h.w)}return f};d.isElementObscuredByAncestor=
function(b){var c;a(b);var e=!1;d._obscuredProps.elementPosition=d.getElementPositionOnPage(b);for(d._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(b,null).position;(c=d.getParent(b))&&"Element"===d.getNodeType(c)&&"BODY"!==c.nodeName;)e=d.isElementObscuredByParent(b,!0),b=c;return e};return d})},"mw-form/mixins/OnOpenMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry"],function(k,d,g){return k(null,{_focusOnOpen:!0,_matchMinWidthToInvokingWidget:!0,
onOpen:function(a){this._defaultContextMenuBlocker&&this.domNode.addEventListener("contextmenu",this._defaultContextMenuBlocker,!0);this._correctWrapperBorder();setTimeout(d.hitch(this,function(){if(this._focusOnOpen&&this.focus){var a=window.pageXOffset,d=window.pageYOffset;this.focus();window.scrollTo(a,d)}}),0);this._emitOpenEvent();this._updateLayout(a)},_correctWrapperBorder:function(){var a=this.domNode.parentElement;a&&(a.style.border="")},_updateLayout:function(a){this._removeAllWidths();
this._matchMinWidthToInvokingWidget&&this._updateWidth();this._updateHeight(a);this._updatePosition(a)},_removeAllWidths:function(){this.domNode.style.width="";this.getChildren().forEach(function(a){a.domNode.style.width=""})},_updateWidth:function(){var a=this.domNode.offsetWidth,b=0;this.domNode.parentElement&&(b=g.getMarginBox(this.domNode.parentElement).w-g.getMarginBox(this.domNode).w,a=this.domNode.parentElement.offsetWidth);this._invokingWidget&&a<this._invokingWidget.domNode.offsetWidth&&
(this.domNode.style.width=this._invokingWidget.domNode.offsetWidth-b+"px")},_updateHeight:function(a){if(this.domNode&&this.domNode.parentElement&&this.domNode.parentElement.classList&&this.domNode.parentElement.classList.contains("dijitPopup")){var b=this.domNode;var d=b.parentElement;var f=window.getComputedStyle(b);a&&parseInt(f.height)>a.h&&(b.style.height=a.h+"px");d.style.overflow="hidden";d.style.overflowX="hidden";d.style.overflowY="hidden"}},_updatePosition:function(a){a&&"L"===a.corner.charAt(1)&&
"R"===a.aroundCorner.charAt(1)&&a.overflow&&(a=parseInt(this.domNode.parentElement.style.left)-a.overflow,this.domNode.parentElement.style.left=(0>a?0:a)+"px")},_setFocusOnOpenAttr:function(a){if("boolean"!==typeof a)throw Error("'focusOnOpen' property expects a boolean value.");this._set("_focusOnOpen",a)},_emitOpenEvent:function(){this.emit("open",{})}})})},"mw-form/mixins/OnCloseMixin":function(){define(["dojo/_base/declare","mw-form/mixins/OnOpenMixin"],function(k,d){k=k(null,{_closeEventData:{},
onClose:function(){this._defaultContextMenuBlocker&&this.domNode&&this.domNode.removeEventListener("contextmenu",this._defaultContextMenuBlocker,!0);this.domNode&&(this.domNode.style.height="");this._emitCloseEvent();this._closeEventData={}},_emitCloseEvent:function(){this.emit("close",this._closeEventData)}});k._dependencies=[{mixin:d,orderDependent:!1}];return k})},"mw-form/mixins/MenuFocusMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/has dojo/touch dojo/keys dijit/popup dijit/registry mw-dom-utils/domUtils mw-utils/widgetUtils mw-form/mixins/ContainerFocusMixin".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m){var n=a("touch")&&!window.PointerEvent;k=k(null,{postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwMenuFocusMixin");this.focusNode=this.focusNode||this.domNode;this.own(g(this.domNode,"open",this._handleOpen.bind(this)));this.own(g(this.domNode,"close",this._handleClose.bind(this)))},_handleOpen:function(){this._addFocusListeners()},_handleClose:function(){this._removeFocusListeners()},_addFocusListeners:function(){if(this.focusNode){this._focusNodeBlurListener=
g(this.focusNode,"blur",this._handleBlur.bind(this));this.own(this._focusNodeBlurListener);this._windowBlurListener=g(window,"blur",this._handleBlur.bind(this));this.own(this._windowBlurListener);var a=window.PointerEvent?"pointerdown":"mousedown";this._documentClickListener=g(document.body,n?b.press:a,this._handleMouseEvent.bind(this));this.own(this._documentClickListener);this._escapeKeydownListener=g(document.body,"keydown",this._handleKeydown.bind(this));this.own(this._escapeKeydownListener)}},
_removeFocusListeners:function(){this._focusNodeBlurListener&&(this._focusNodeBlurListener.remove(),delete this._focusNodeBlurListener);this._windowBlurListener&&(this._windowBlurListener.remove(),delete this._windowBlurListener);this._documentClickListener&&(this._documentClickListener.remove(),delete this._documentClickListener);this._escapeKeydownListener&&(this._escapeKeydownListener.remove(),delete this._escapeKeydownListener)},_handleBlur:function(a){var c=this;setTimeout(function(){c._handlePossibleFocusChange(a)},
0)},_handleMouseEvent:function(a){this._handlePossibleFocusChange(a)},_handleKeydown:function(a){a.keyCode===l.ESCAPE&&this._handlePossibleFocusChange(a)},_handlePossibleFocusChange:function(a){if(e.isMenuOpen(this)){a=this._getGainedFocusWidgetFromEvent(a);var c=this.isDescendant(a,this);var b=this._isChildContextMenu(a);var d=this._invokingWidget&&a===this._invokingWidget;a&&(c||b||d)||this._focusChange(a)}},_getGainedFocusWidgetFromEvent:function(a){var b=null;b=a instanceof FocusEvent?h.getEnclosingWidget(c.parseFocusEvent(a).gainedFocusNode):
h.getEnclosingWidget(a.target)||(document.activeElement.contains(a.target)?h.getEnclosingWidget(document.activeElement):null);a=null;b&&(a=b.focusNode&&b.focusNode instanceof Element?b.focusNode:b.domNode);a&&a.hasAttribute("data-composite-child")&&(b=h.getEnclosingWidget(document.getElementById(a.getAttribute("data-composite-primary-id"))));return b},_isChildContextMenu:function(a){return a&&a.domNode&&-1<[].slice.call(document.querySelectorAll(".mwToolstripPopupContextMenu, .mwToolstripPopupContextMenu *")).indexOf(a.domNode)},
_focusChange:function(a){this._closeEventData?this._closeEventData.mwEventData?this._closeEventData.mwEventData.gainedFocusWidget=a:this._closeEventData.mwEventData={gainedFocusWidget:a}:this._closeEventData={mwEventData:{gainedFocusWidget:a}};if(null==a)this.closeRequest(!1);else if(!this.isInvokingWidget(a)&&!this.isDescendant(a,this)){var c=a;a&&a.domNode&&a.getParent&&a.getParent()&&(c=a.getParent());c.invokedFromListItemTypeWidget||this.closeRequest(!1)}},closeRequest:function(a){if(null==a||
0>[!0,!1].indexOf(a))a=!0;this.close&&this.close();this._invokingWidget&&this._invokingWidget.isMenuOpen()&&this._invokingWidget.closeMenu(a);e.isMenuOpen(this)&&f.close(this)},isInvokingWidget:function(a){if(null==a)return!1;a instanceof HTMLElement&&(a=h.getEnclosingWidget(a));return a===this._invokingWidget},isDescendant:function(a,b){if(null==a)return!1;a.domNode&&(a=a.domNode);null==b?b=this.domNode:b.domNode&&(b=b.domNode);var d=function(a){return a.hasAttribute("dijitpopupparent")?document.getElementById(a.getAttribute("dijitpopupparent")):
null};return a instanceof HTMLElement&&b instanceof HTMLElement?c.isDescendantOrInLaw(a,b,d,!0):!1}});k._dependencies=[{mixin:m,orderDependent:!0}];return k})},"mw-utils/widgetUtils":function(){define(["dijit/registry","mw-utils/domUtils"],function(k,d){var g={findParentWidget:function(a,b){var l=null,f;for(a instanceof HTMLElement&&(a=k.getEnclosingWidget(a));a;){if(a.get("type")===b){l=a;break}if(d.containsClass(a.domNode,b)){l=a;break}a=(f=d.getAttr(a.domNode.parentNode,"dijitpopupparent"))?k.byId(f):
a.getParent()}return l},isMenuChild:function(a){return null!=d.findParentNode(a,"dijitPopup")},getParentMenu:function(a){return(a=d.findParentNode(a,"dijitPopup"))?k.getEnclosingWidget(a.children[0]):null},isInvokingWidget:function(a,b){return b?g.getMenuWidget(a)===b:null!=g.getMenuWidget(a)},getInvokingWidget:function(a){return a._invokingWidget?a._invokingWidget:(a=d.findParentNode(a,"dijitPopup"))?k.getEnclosingWidget(document.getElementById(a.getAttribute("dijitpopupparent"))):null},getMenuWidget:function(a){return a.menu||
a.dropDown},isMenuOpen:function(a){if(null==a)return!1;var b=a;a.domNode&&a.domNode.hasAttribute("data-composite-child")&&(a=document.getElementById(a.domNode.getAttribute("data-composite-primary-id")),b=k.getEnclosingWidget(a));return b&&b.dropDown&&(d.containsClass(b.domNode,"dijitOpened")||d.containsClass(b.domNode,"dijitHasDropDownOpen"))||b&&b.isMenuOpen&&b.isMenuOpen()||b&&b.domNode&&d.findParentNode(b,"dijitPopup")&&(b.getParent&&b.getParent()&&b.getParent().isMenuOpen&&b.getParent().isMenuOpen()||
"none"!==d.getStyle(d.findParentNode(b,"dijitPopup"),"display"))},isDescendant:function(a,b){if(null==a)return!1;a.domNode&&(a=a.domNode);if(null==b)return!1;b.domNode&&(b=b.domNode);return d.isDescendantOrInLaw(a,b,function(a){return(a=k.getEnclosingWidget(a))&&g.isMenuChild(a)&&g.isMenuOpen(a)&&(a=g.getInvokingWidget(a))&&a.domNode?a.domNode:null},!0)},getPrimaryWidget:function(a){if(a.domNode)var b=a.domNode;else if(a instanceof HTMLElement)b=a;else throw Error("The input value must be a widget or HTML Element.");
return b&&b.hasAttribute("data-composite-child")?k.getEnclosingWidget(d.getById(b.getAttribute("data-composite-primary-id"))):a}};return g})},"mw-utils/domUtils":function(){define(["dojo/sniff"],function(k){var d={messages:{INVALID_ELEMENT:"The input parameter must be an instance of an Element object.",INVALID_STRING:"The input parameter must be of type 'string'.",INVALID_FOCUS_EVENT:"The input parameter must be a 'FocusEvent' object.",INVALID_STYLE:"The style specified is invalid.",INVALID_VALUE:"The value specified is invalid.",
INTEGER_INDEX:"index argument expects an integer.",STRING_INDEX:"index argument expects an string.",SPOUSE_NODE:"A function which returns a spouse node if it exists must be provided."},_validateElement:function(g){if(!(g instanceof Element))throw Error(d.messages.INVALID_ELEMENT);},_validateString:function(g){if("String"===typeof g)throw Error(d.messages.INVALID_STRING);},isLeftMouseButton:function(d){return!0===d.synthetic&&k("ie")?1===d.button:0===d.button},parseFocusEvent:function(g){if(!(g instanceof
FocusEvent))throw Error(d.messages.INVALID_FOCUS_EVENT);var a={};a.lostFocusNode=g.target;a.gainedFocusNode=k("chrome")||k("safari")?g.relatedTarget:document.activeElement;a.type=g.type;a.eventdata=g;return a},getParent:function(g){d._validateElement(g);return g.parentNode},findParentNode:function(g,a,b){var l=null,f;g.domNode&&(g=g.domNode);for(;g&&g!==window.document;){if(d.hasAttr(g,a)){l=g;break}if(d.hasAttrValue(g,a,b)){l=g;break}if(d.containsClass(g,a)){l=g;break}g=(f=d.getAttr(g,"dijitpopupparent"))?
d.getById(f):g.parentNode}return l},getNodeType:function(g){d._validateElement(g);return{1:"Element",3:"Text",7:"Processing Instruction",8:"Comment",9:"Document",10:"Document Type",11:"Document Fragment"}[g.nodeType]},getById:function(g){d._validateString(g);return window.document.getElementById(g)},getByClass:function(g){d._validateString(g);return window.document.getElementsByClassName(g)},getByAttr:function(g){d._validateString(g);return window.document.querySelectorAll("["+g+"]")},getByAttrValue:function(g,
a){d._validateString(g);d._validateString(a);return window.document.querySelectorAll("["+g+"\x3d"+a.replace(/['".\\]/g,"\\$\x26").replace(/[\\]/g,"\\$\x26")+"]")},getByName:function(g){d._validateString(g);return window.document.getElementById("[name\x3d"+g+"]")},getByTag:function(g){d._validateString(g);return window.document.getElementsByTagName(g)},getComputedStyle:function(g,a){d._validateElement(g);return a?(d._validateString(a),window.getComputedStyle(g,null)[a]):window.getComputedStyle(g,null)},
getStyle:function(g,a){d._validateElement(g);d._validateString(a);if(void 0===g.style[a])throw Error(d.messages.INVALID_STYLE);return g.style[a]},setStyle:function(g,a,b){d._validateElement(g);d._validateString(a);d._validateString(b);g.style[a]=b;if(g.style[a]!==b)throw Error(d.messages.INVALID_VALUE);},hasAttr:function(g,a){d._validateElement(g);d._validateString(a);return g.hasAttribute(a)},hasAttrValue:function(g,a,b){d._validateElement(g);d._validateString(a);d._validateString(b);return g.hasAttribute(a)&&
g.getAttribute(a)===b},getAttr:function(g,a){d._validateElement(g);d._validateString(a);return g.getAttribute(a)},setAttr:function(g,a,b){d._validateElement(g);d._validateString(a);d._validateString(b);g.setAttribute(a,b)},addAttr:function(g,a){d._validateElement(g);d._validateString(a);g.setAttribute(a,"")},removeAttr:function(g,a){d._validateElement(g);d._validateString(a);g.removeAttribute(a)},getClasses:function(g){d._validateElement(g);return g.classList?g.classList:{_element:g,_getClassArray:function(){return this._element.className.split(" ")},
_updateClassName:function(a){this._element.className=a.join(" ");this.length=a.length},length:g.className.split(" ").length,item:function(a){return this._getClassArray()[a]},contains:function(a){for(var b=this._getClassArray(),d=0;d<b.length;d++)if(b[d]===a)return!0;return!1},add:function(a){var b=this._getClassArray();b.push(a);this._updateClassName(b)},remove:function(a){var b=this._getClassArray();a=b.indexOf(a);0<=a&&(b.splice(a,1),this._updateClassName(b))},toggle:function(a){if(this.contains(a))return this.remove(a),
!1;this.add(a);return!0}}},getClass:function(g,a){if(null==a||"number"!==typeof a||0>a||0!==a%1)throw Error(d.messages.INTEGER_INDEX);return d.getClasses(g).item(a)},addClass:function(g,a){if(null==a||"string"!==typeof a)throw Error(d.messages.STRING_INDEX);return d.getClasses(g).add(a)},removeClass:function(g,a){if(null==a||"string"!==typeof a)throw Error(d.messages.STRING_INDEX);return d.getClasses(g).remove(a)},toggleClass:function(g,a){if(null==a||"string"!==typeof a)throw Error(d.messages.STRING_INDEX);
return d.getClasses(g).toggle(a)},containsClass:function(g,a){if(null==a||"string"!==typeof a)throw Error(d.messages.STRING_INDEX);return d.getClasses(g).contains(a)},classCount:function(g){return d.getClasses(g).length},getChildCount:function(g){d._validateElement(g);return g.childElementCount},getChildren:function(g){d._validateElement(g);return g.children},isDescendant:function(g,a,b){d._validateElement(g);d._validateElement(a);if(b&&g===a)return!0;for(;g&&g!==window.document;)if(g=d.getParent(g),
g===a)return!0;return!1},isDescendantOrInLaw:function(g,a,b,l){if("function"!==typeof b)throw Error(d.messages.SPOUSE_NODE);var f=d.isDescendant(g,a,l);!1===f&&(g=b(g)||g.parentNode)&&g!==window.document&&(f=d.isDescendantOrInLaw(g,a,b,l));return f},getFirstChild:function(g){d._validateElement(g);return!d.isContainer(g)||1>d.getChildCount(g)?null:d.getChildren(g)[0]},getLastChild:function(g){d._validateElement(g);var a=d.getChildCount(g);return!d.isContainer(g)||1>a?null:d.getChildren(g)[a-1]},isContainer:function(g){d._validateElement(g);
return 0<d.getChildCount(g)},getAdjacentElement:function(g,a){d._validateElement(g);if(!a||0>["next","previous"].indexOf(a))a="next";return g=g[a+"Sibling"]},getElementPositionInViewPort:function(g){d._validateElement(g);g=g.getBoundingClientRect();return{x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top}},getElementPositionOnPage:function(g){d._validateElement(g);g=d.getElementPositionInViewPort(g);g.x+=window.pageXOffset;g.y+=window.pageYOffset;return g},isFocusable:function(g){d._validateElement(g);
return g&&!g.hasAttribute("disabled")&&(!g.hasAttribute("aria-disabled")||"true"!==g.getAttribute("aria-disabled"))&&"none"!==g.style.display&&!g.hasAttribute("data-refuse-key-nav")},isElementInViewport:function(g){d._validateElement(g);var a=g.getBoundingClientRect();var b=window.innerWidth||doc.documentElement.clientWidth;var l=window.innerHeight||doc.documentElement.clientHeight;var f=function(a,c){return document.elementFromPoint(a,c)};return 0>a.right||0>a.bottom||a.left>b||a.top>l?!1:g.contains(f(a.left,
a.top))||g.contains(f(a.right,a.top))||g.contains(f(a.right,a.bottom))||g.contains(f(a.left,a.bottom))},_obscuredProps:{}};d._obscuredProps.sawPosAbsolute=!1;d._obscuredProps.elementPosition=null;d.isElementObscuredByParent=function(g,a){var b;d._validateElement(g);var l=!1;if(b=d.getParent(g))if(a||(d._obscuredProps.elementPosition=d.getElementPositionOnPage(g),d._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,null).position),g=d._obscuredProps.elementPosition,a=d._obscuredProps.sawPosAbsolute,
b&&"Element"===d.getNodeType(b)&&"BODY"!==b.nodeName){var f=d.getElementPositionOnPage(b);b=window.getComputedStyle(b,null);/relative|absolute/.test(b.position)&&(a=d._sawPosAbsolute=!1);!a&&/hidden|auto|scroll/.test(b.overflow)&&(l=g.y<f.y||g.y+g.h>f.y+f.h||g.x<f.x||g.x+g.w>f.x+f.w)}return l};d.isElementObscuredByAncestor=function(g){var a;d._validateElement(g);var b=!1;d._obscuredProps.elementPosition=d.getElementPositionOnPage(g);for(d._obscuredProps.sawPosAbsolute="absolute"===window.getComputedStyle(g,
null).position;(a=d.getParent(g))&&"Element"===d.getNodeType(a)&&"BODY"!==a.nodeName;)b=d.isElementObscuredByParent(g,!0),g=a;return b};return d})},"mw-form/mixins/property/MaxHeightMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{maxHeight:800,_setMaxHeightAttr:function(d){if("number"!==typeof d)throw Error("'MaxHeight' property expects a Number!");this.domNode.style.maxHeight=d+"px";this._set("maxHeight",d)}})})},"mw-filebrowser/actions/contextmenu/ActionsContextMenuBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/has mw-keybindings/BindingUtils mw-keybindings/KeyBindings mw-form/CheckBoxMenuItem mw-form/Menu mw-form/MenuItem mw-form/MenuSeparator mw-form/PopupMenuItem mw-form/ContextMenu mw-utils/Utils".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n){function q(a){var c=new f({});a.forEach(function(a){p(c,a)});return c}function p(d,f){var m={id:f.id+n.generateUuid(),text:f.label,tag:f.id,disabled:"function"===typeof f.enabled?!f.enabled():!f.enabled},k;(k=f.shortcut)||(k=f.supportsKeyBinding?x[f.id]?a.getKeyBindingData(x[f.id]).shortcut:"":"");m.shortcut=k;f.icon&&(m.icon=f.icon);f.contentSeparator&&d.addChild(new c);Array.isArray(f.childrenActions)?(k=q(f.childrenActions),m.disabled=!1,m.menu=k,m=new e(m),m.own(k)):
f.needsCheckBox?(m.closeMenuOnClick=!0,m.checked="function"===typeof f.checked?f.checked():f.checked,m=new l(m)):m=new h(m);k=g("mac")?[b.Keys.COMMAND,b.Keys.DOWN_ARROW]:[b.Keys.ENTER];x[f.id]&&x[f.id].length===k.length&&JSON.stringify(x[f.id])===JSON.stringify(k)&&m.domNode.classList.add("defaultActionItem");d.addChild(m);if(f.callback)m.on("click",function(){f.callback(f)})}function t(a){function c(a,c){c=c.filter(function(c){return c.id===a});if(1===c.length)return c[0]}function b(a,b){-1===e.indexOf(a)&&
(d[a]={info:b.section,actions:[]},e.push(a));a=d[a].actions;void 0===c(b.id,a)&&a.push(b)}var d={},e=[];a.forEach(function(a){var e=a.section.id;if(void 0===a.section.parent)b(e,a);else{e=a.section;e.label=e.name;var f=e.parent.id,h=d[f]&&c(e.id,d[f].actions);h?h.childrenActions.push(a):(e.childrenActions=[a],b(f,e))}});return{sections:d,sectionIds:e}}function r(a,b,d){d.forEach(function(d){-1!==b.sectionIds.indexOf(d)&&(d=b.sections[d].actions,a.hasChildren()&&a.addChild(new c),d.forEach(function(c){p(a,
c)}))})}function u(a,c,b,d,e){x=c;a.destroyDescendants();b.getActions().then(function(c){c=t(c);r(a,c,b.getActionGroupIdsOrder());a._showMenu({x:d,y:e,popup:a})})}function y(a){this._contextMenuVisible=!0;this.setShouldGiveFocusBackToDgrid(!0);u(this.grid.contextMenu,this.keybindings,this._actionManager,a.x,a.y);this.grid.contextMenu.domNode.classList.add("fileBrowserContextMenu");return!0}var x;return k([],{createContextMenu:function(a){a.own(a.grid.contextMenu=new m({willOpenCallback:d.hitch(a,
y),targetNodes:["#"+a.grid.id+" .dgrid-row","#"+a.grid.id+" .dgrid-row *:not(.dgrid-input)","#"+a.grid.id+" .dgrid-scroller"]}))}})})},"mw-keybindings/BindingUtils":function(){define("dojo/_base/lang dojo/sniff mw-keybindings/DefaultKeys mw-keybindings/ModifierKeys mw-keybindings/Platforms mw-keybindings/shortcutStringGenerator dojo/text!./browserconflicts.json".split(" "),function(k,d,g,a,b,l,f){var h=[],c;for(c in g)h.push(g[c]);var e=[];for(c in b)e.push(b[c]);var m=function(c,f){var m=c;if(void 0===
m)throw Error("Invalid key sequence for a binding: cannot be null");Array.isArray(m)||(m=[m]);if(0===m.length)throw Error("Invalid key sequence for a binding: cannot be empty");for(var p=0;p<m.length;p++){var r=m[p];if(void 0===r||-1===h.indexOf(r))throw Error("Invalid keyCode for a binding : "+m[p]);}Array.isArray(c)||(c=[c]);m=b.Unspecified;if(void 0!==f&&!k.isObject(f))throw Error("Optional platform must be an object with a Platform property");if(k.isObject(f)){if(!f.hasOwnProperty("platform"))throw Error("No platform property specified in optional platform object");
if(-1===e.indexOf(f.platform))throw Error("Invalid platform for a binding : "+f.platform);m=f.platform;if(m!==b.Mac&&q(g.COMMAND,c))throw Error("Can not create a binding with the COMMAND key and specify platform other than mac");}p=[];f=[];for(r=0;r<c.length;r++){var u=c[r];if(-1!==a.indexOf(u)){if(0!==f.length)throw Error(" modifier keys must come before keycode");p.push(u)}else f.push(u)}c=q(g.CTRL,p);r=q(g.SHIFT,p);u=q(g.ALT,p);var t=q(g.COMMAND,p);q(g.SYSCTRL,p)&&(d("mac")?t=!0:c=!0);p=l.getString(p.concat(f));
if(0===f.length)throw Error("Invalid key sequence: "+p+". Excluding modifiers, there must be one key for the binding");if(1!==f.length)throw Error("Invalid key sequence: "+p+". Excluding modifiers, there can only be one key for the binding");var z=n([c,r,u,t],f[0],m);return{hasCtrlKey:c,hasShiftKey:r,hasAltKey:u,hasMetaKey:t,keyCode:f[0],shortcut:p,platform:m,keySequenceIdentifier:z}},n=function(a,c,b){return JSON.stringify({modifierKeys:a,keyCode:c,platform:b})},q=function(a,c){var b=!1;-1!==c.indexOf(a)&&
(b=!0);return b},p=JSON.parse(f),t=function(){var a={};Object.keys(p).forEach(function(c){var d=p[c];c=d.keys;var e=[],f=Object.keys(d.platform);f.push(b.Unspecified);c.forEach(function(a){if(g.hasOwnProperty(a))e.push(g[a]);else throw Error("Invalid key entry in the json file for the conflicting Key Binding");});f.forEach(function(c){c=m(e,{platform:b[c]}).keySequenceIdentifier;a[c]=d})});return a}();return{generateKeySequenceIdentifier:n,getKeyBindingData:m,validateNoBrowserConflicts:function(a){var c=
a.keySequenceIdentifier;t[c]&&console.warn("The requested key binding "+a.shortcut+" is a known browser conflict which is not supported in \n"+JSON.stringify(t[c].platform))}}})},"mw-keybindings/DefaultKeys":function(){define(["dojo/_base/lang","mw-keybindings/KeyboardKeys"],function(k,d){return k.mixin(d,{SYSCTRL:9E3,COMMAND:9001})})},"mw-keybindings/KeyboardKeys":function(){define(["dojo/_base/lang","mw-keybindings/Platforms"],function(){return{BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,
ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOWS:91,RIGHT_WINDOWS:92,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,
NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,DASH:189,EQUALS:187,OPEN_BRACKET:219,CLOSE_BRACKET:221,COMMA:188,PERIOD:190,FORWARD_SLASH:191,BACKWARD_SLASH:220,SINGLE_QUOTE:222,SEMI_COLON:186,BACK_TICK:192}})},"mw-keybindings/Platforms":function(){define([],function(){return{Windows:"Windows",Mac:"Mac",Linux:"Linux",Unspecified:"Unspecified"}})},
"mw-keybindings/ModifierKeys":function(){define(["mw-keybindings/DefaultKeys"],function(k){return[k.CTRL,k.ALT,k.SHIFT,k.COMMAND,k.SYSCTRL,k.LEFT_WINDOWS,k.RIGHT_WINDOWS]})},"mw-keybindings/shortcutStringGenerator":function(){define(["dojo/sniff","mw-keybindings/DefaultKeys","dojo/i18n!./l10n/nls/keyBindings"],function(k,d,g){var a={};a[d.SYSCTRL]={macString:"\u2318",otherPlatformsString:"Ctrl"};a[d.COMMAND]={macString:"\u2318",otherPlatformsString:""};a[d.BACKSPACE]={macString:"\u232b",otherPlatformsString:g.BACKSPACE};
a[d.TAB]={macString:"\u21e5",otherPlatformsString:g.TAB};a[d.CLEAR]={macString:"\u2327",otherPlatformsString:g.CLEAR};a[d.ENTER]={macString:"\u23ce",otherPlatformsString:g.ENTER};a[d.SHIFT]={macString:"\u21e7",otherPlatformsString:g.SHIFT};a[d.CTRL]={macString:"\u2303",otherPlatformsString:g.CTRL};a[d.ALT]={macString:"\u2325",otherPlatformsString:g.ALT};a[d.PAUSE_BREAK]={macString:g.PAUSE_BREAK,otherPlatformsString:g.PAUSE_BREAK};a[d.CAPS_LOCK]={macString:"\u21ea",otherPlatformsString:g.CAPS_LOCK};
a[d.ESCAPE]={macString:"\u238b",otherPlatformsString:g.ESCAPE};a[d.SPACE]={macString:"\u2423",otherPlatformsString:g.SPACE};a[d.PAGE_UP]={macString:"\u23ce",otherPlatformsString:g.PAGE_UP};a[d.PAGE_DOWN]={macString:"\u2191",otherPlatformsString:g.PAGE_DOWN};a[d.END]={macString:"\u2198",otherPlatformsString:g.END};a[d.HOME]={macString:"\u2196",otherPlatformsString:g.HOME};a[d.LEFT_ARROW]={macString:"\u2190",otherPlatformsString:g.LEFT};a[d.UP_ARROW]={macString:"\u2191",otherPlatformsString:g.UP};a[d.RIGHT_ARROW]=
{macString:"\u2192",otherPlatformsString:g.RIGHT};a[d.DOWN_ARROW]={macString:"\u2193",otherPlatformsString:g.DOWN};a[d.INSERT]={macString:g.INSERT,otherPlatformsString:g.INSERT};a[d.DELETE]={macString:"\u2326",otherPlatformsString:g.DELETE};a[d.LEFT_WINDOWS]={macString:"",otherPlatformsString:g.LEFT+" "+g.WINDOWS};a[d.RIGHT_WINDOWS]={macString:"",otherPlatformsString:g.RIGHT+" "+g.WINDOWS};a[d.NUMPAD_MULTIPLY]={macString:"\u2328 *",otherPlatformsString:g.NUM_PAD+" *"};a[d.NUMPAD_PLUS]={macString:"\u2328 +",
otherPlatformsString:g.NUM_PAD+" +"};a[d.NUMPAD_MINUS]={macString:"\u2328 -",otherPlatformsString:g.NUM_PAD+" -"};a[d.NUMPAD_PERIOD]={macString:"\u2328 .",otherPlatformsString:g.NUM_PAD+" ."};a[d.NUMPAD_DIVIDE]={macString:"\u2328 /",otherPlatformsString:g.NUM_PAD+" /"};a[d.NUM_LOCK]={macString:g.NUM_LOCK,otherPlatformsString:g.NUM_LOCK};a[d.SCROLL_LOCK]={macString:g.SCROLL_LOCK,otherPlatformsString:g.SCROLL_LOCK};a[d.DASH]={macString:"-",otherPlatformsString:"-"};a[d.EQUALS]={macString:"\x3d",otherPlatformsString:"\x3d"};
a[d.OPEN_BRACKET]={macString:"[",otherPlatformsString:"["};a[d.CLOSE_BRACKET]={macString:"]",otherPlatformsString:"]"};a[d.COMMA]={macString:",",otherPlatformsString:","};a[d.PERIOD]={macString:".",otherPlatformsString:"."};a[d.FORWARD_SLASH]={macString:"/",otherPlatformsString:"/"};a[d.BACKWARD_SLASH]={macString:"\\",otherPlatformsString:"\\"};a[d.SINGLE_QUOTE]={macString:"'",otherPlatformsString:"'"};a[d.SEMI_COLON]={macString:";",otherPlatformsString:";"};a[d.BACK_TICK]={macString:"`",otherPlatformsString:"`"};
return{getString:function(b){b=b.map(function(b){var d=a[b],h="";48<=b&&57>=b||65<=b&&90>=b?h=String.fromCharCode(b):96<=b&&105>=b?(h=k("mac")?"\u2328":"NumPad",h=[h,b-96].join(" ")):112<=b&&126>=b?h="F"+(b-111):(d?(d.macString||(console.warn("This keyCode "+b+" doesn't have a corresponding 'macString' defined!"),d.macString=""),d.otherPlatformsString||(console.warn("This keyCode "+b+" doesn't have a corresponding 'otherPlatformsString' defined!"),d.otherPlatformsString="")):(console.warn("This keyCode "+
b+" doesn't have a corresponding shortcutString map entry defined!"),d={macString:"",otherPlatformsString:""}),h=k("mac")?d.macString:d.otherPlatformsString);return h});return k("mac")?b.join(""):b.join("+")}}})},"mw-keybindings/KeyBindings":function(){define("dojo/_base/declare dojo/_base/lang mw-keybindings/DefaultKeys mw-keybindings/StandardKeySequences mw-keybindings/BindingUtils mw-keybindings/Binding mw-keybindings/KeyHandler mw-keybindings/Platforms mw-actiondataservice/ActionDataService".split(" "),
function(k,d,g,a,b,l,f,h,c){k=k([],{constructor:function(a){if(!d.isObject(a)||!a.isInstanceOf(c))throw Error("actionDataService passed into KeyBindings constructor must be an instance of mw-actiondataservice/ActionDataService ");this._actionDataService=a;this._bindingMap={};this._keyHandler=new f(this)},getBinding:function(a,c){var d=b.getKeyBindingData(a,c).keySequenceIdentifier;void 0===this._bindingMap[d]&&(a=new l(a,c,this._actionDataService),this._bindingMap[d]=a);b.validateNoBrowserConflicts(this._bindingMap[d]);
return this._bindingMap[d]},getBindingFromKeySequenceIdentifier:function(a){return this._bindingMap[a]},removeBinding:function(a){if(!d.isObject(a)||!a.isInstanceOf(l))throw Error("Binding must be an instance of mw-keybindings/Binding ");var c=a.getKeySequenceIdentifier();if(void 0===this._bindingMap[c])throw Error("Error removing the binding: "+a.getShortcut()+". No such binding exists in the map.");a.cleanup();delete this._bindingMap[c]},cleanup:function(){this._bindingMap=null;this._keyHandler.destroy()}});
k.Keys=g;k.StandardKeySequences=a;k.Platform=h;return k})},"mw-keybindings/StandardKeySequences":function(){define(["mw-keybindings/DefaultKeys"],function(k){return{Cut:[k.SYSCTRL,k.X],Copy:[k.SYSCTRL,k.C],Paste:[k.SYSCTRL,k.V],Undo:[k.SYSCTRL,k.Z],Redo:[k.SYSCTRL,k.Y]}})},"mw-keybindings/Binding":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-keybindings/BindingUtils"],function(k,d,g){return k(null,{constructor:function(a,b,d){this._actionDataService=d;this._keyBindingData=g.getKeyBindingData(a,
b);this._selectorActionMap={}},setAction:function(a,b,d){try{document.querySelector(a)}catch(h){throw Error("Invalid selector for key binding: "+a);}if(void 0!==this._selectorActionMap[a])throw Error("An action already exists on this binding for the following selector: "+a);var f=this._actionDataService.getAction(b);if(null===f)throw Error("Cannot assign the action to the binding.  No action exists in the ActionDataService with the following id: "+b);this._selectorActionMap[a]={actionId:b,preventDefault:d&&
d.hasOwnProperty("preventDefault")?d.preventDefault:!0,stopPropagation:d&&d.hasOwnProperty("stopPropagation")?d.stopPropagation:!0};a=(f.shortcut||"").concat(","+this.getShortcut());","===a[0]&&(a=a.slice(1,a.length));this._actionDataService.updateAction(b,{shortcut:a})},removeAction:function(a){if(void 0===this._selectorActionMap[a])throw Error("No such action exists on this binding for the following selector: "+a);var b=this._selectorActionMap[a],d=this._actionDataService.getAction(b.actionId).shortcut,
f=this.getShortcut();d=d.replace(","+f,"");d=d.replace(f+",","");d=d.replace(f,"");this._actionDataService.updateAction(b.actionId,{shortcut:d.toString()});delete this._selectorActionMap[a]},cleanup:function(){var a=this.getShortcut(),b;for(b in this._selectorActionMap){var d=this._selectorActionMap[b].actionId,f=this._actionDataService.getAction(d).shortcut.replace(","+a,"");f=f.replace(a+",","");f=f.replace(a,"");this._actionDataService.updateAction(d,{shortcut:f.toString()})}},getShortcut:function(){return this._keyBindingData.shortcut},
getKeySequenceIdentifier:function(){return this._keyBindingData.keySequenceIdentifier},executeAction:function(a){this._actionDataService.executeAction(a)},getActionInfoForNode:function(a){var b;Object.keys(this._selectorActionMap).some(d.hitch(this,function(d){this._matches(a,d)&&(b=d)}));return this._selectorActionMap[b]},_matches:function(a,b){b=(a.document||a.ownerDocument).querySelectorAll(b);for(var d=b.length;0<=--d&&b.item(d)!==a;);return-1<d}})})},"mw-keybindings/KeyHandler":function(){define("dojo/_base/declare dojo/sniff dojo/_base/event dojo/query dojo/_base/lang dojo/on dijit/Destroyable mw-keybindings/BindingUtils mw-keybindings/Platforms".split(" "),
function(k,d,g,a,b,l,f,h,c){return k(f,{constructor:function(a){this._listeners=[];this._keyBindings=a;this._attachListeners();this.BINDING_EXECUTION_STATUS={BINDING_NOT_FOUND:0,BINDING_EXECUTION_SUCCESSFUL:1,EXECUTION_INVALID_FOR_BINDING:2}},_attachListeners:function(){this.own(l(document,"keydown",b.hitch(this,"onKeyDown")))},_removeListeners:function(){this._listeners.forEach(function(a){a.remove()})},onKeyDown:function(a){var c=this._lookupBinding(a);return c?this._executeBindingForDomNode(c,
a.target,a)?this.BINDING_EXECUTION_STATUS.BINDING_EXECUTION_SUCCESSFUL:this.BINDING_EXECUTION_STATUS.EXECUTION_INVALID_FOR_BINDING:this.BINDING_EXECUTION_STATUS.BINDING_NOT_FOUND},_lookupBinding:function(a){var b=[a.ctrlKey,a.shiftKey,a.altKey,a.metaKey],e=void 0;e=navigator.userAgent.toLowerCase();e=d("mac")?c.Mac:-1<e.indexOf("windows")?c.Windows:-1<e.indexOf("linux")?c.Linux:c.Unspecified;e=h.generateKeySequenceIdentifier(b,a.keyCode,e);e=this._keyBindings.getBindingFromKeySequenceIdentifier(e);
void 0===e&&(e=h.generateKeySequenceIdentifier(b,a.keyCode,c.Unspecified),e=this._keyBindings.getBindingFromKeySequenceIdentifier(e));return void 0===e?null:e},_executeBindingForDomNode:function(a,c,b){if(!c)return!1;var d=a.getActionInfoForNode(c);if(d)return a.executeAction(d.actionId),d.preventDefault&&b.preventDefault(),d.stopPropagation||this._executeBindingForDomNode(a,c.parentElement,b),!0;this._executeBindingForDomNode(a,c.parentElement,b);return!1},getMatchingSelector:function(a,c){var b;
a.some(function(a){c.matches(a)&&(b=a)});return b}})})},"mw-actiondataservice/ActionDataService":function(){define(["dojo/_base/declare","mw-peermodel/PeerModelManager","mw-peermodel/_PeerModelListenerMixin","mw-peermodel/_PropertyIndexerMixin","mw-utils/Utils"],function(k,d,g,a,b){return k([g,a],{constructor:function(a){a=a||{};this._mode=a.mode||"StandAlone";this._nameSpace=a.nameSpace||"/actions/"+b.generateUuid();this._setupPeerModel();this._callbacks={};this._actionChangeCallbacks={};this._propertyToIndex=
"id"},_setupPeerModel:function(){switch(this._mode){case "StandAlone":this._peerModelManager=d.getClientInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsServer":this._peerModelManager=d.getServerInstance(this._nameSpace);this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);this._peerModelManager.setRoot("Root");break;case "ActAsClient":this._peerModelManager=d.getClientInstance(this._nameSpace);
this.addManagerListeners(this._peerModelManager);this.start(this._peerModelManager);break;default:throw Error("The mode provided is not valid! Please use one of the following: StandAlone, ActAsServer or ActAsClient");}},onPropertySet:function(a){this.onActionChange({id:a.target.getProperty("id"),key:a.data.key,oldValue:a.data.oldValue,newValue:a.data.newValue,originator:a.originator})},onChildAdd:function(a){a.data.child.getProperty("id")||a.data.child.setProperty("id",a.data.child.getId());this.onActionAdd({id:a.data.child.getProperty("id")})},
loadActions:function(a){Array.isArray(a)&&a.forEach(function(a){this.addAction(a)},this)},addAction:function(a){if("ActAsClient"===this._mode)throw Error("Actions cannot be added while in ActAsClient Mode!");a=a||{};if(a.id&&this._getPeerNodeIdForIndexedProperty(a.id))throw Error("Action id must be unique!");var b=this._peerModelManager.getRoot().addChild("Action",a);a.id||b.setProperty("id",b.getId());a.callback&&this.addActionCallback(b.getProperty("id"),a.callback);return b.getId()},getAction:function(a){return(a=
this._actionById(a))?a.getProperties():null},getAllActions:function(){return this._peerModelManager.getRoot().getChildren().map(function(a){return a.getProperties()})},removeAction:function(a){if("ActAsClient"===this._mode)throw Error("Actions cannot be removed while in ActAsClient Mode!");var b=this._getPeerNodeIdForIndexedProperty(a);if(b&&this._peerModelManager.hasById(b))this._peerModelManager.getById(b).destroy(),delete this._callbacks[a];else throw Error("This is not a valid action id!");},
enableAction:function(a){this.updateAction(a,{enabled:!0})},disableAction:function(a){this.updateAction(a,{enabled:!1})},updateAction:function(a,b,d){var c=this._actionById(a);c&&(b.callback&&this.addActionCallback(a,b.callback),c.setProperties(b,d))},actionHasProperty:function(a,b){return this._actionById(a).hasProperty(b)},executeAction:function(a,b){b=b||{};a=this._actionById(a);!0===a.getProperty("enabled")&&a.dispatchEvent("peerEvent",a,b)},addActionCallback:function(a,b,d){var c=this._actionById(a);
this.removeActionCallback(a);var e=function(a){b.call(d||c.getProperties(),a.data)};this._callbacks[a]={callback:e,scope:d};c.addEventListener("peerEvent",e,d)},removeActionCallback:function(a){var b=this._actionById(a),d;if(d=this._callbacks[a])b.removeEventListener("peerEvent",d.callback,d.scope),delete this._callbacks[a]},addActionChangeCallback:function(a,b,d){var c=this._actionById(a);this.removeActionChangeCallback(a);var e=function(a){b.call(d,{property:a.data.key,oldValue:a.data.oldValue,
newValue:a.data.newValue},a.originator)};this._actionChangeCallbacks[a]={callback:e,scope:d};c.addEventListener("propertySet",e,d)},removeActionChangeCallback:function(a){var b=this._actionById(a);this._actionChangeCallbacks[a]&&(b.removeEventListener("propertySet",this._actionChangeCallbacks[a].callback,this._actionChangeCallbacks[a].scope),delete this._actionChangeCallbacks[a])},onActionChange:function(a){},onActionAdd:function(a){},_actionById:function(a){var b;(a=this._getPeerNodeIdForIndexedProperty(a))&&
this._peerModelManager.hasById(a)&&(b=this._peerModelManager.getById(a));return b},destroy:function(){var a=this;if(this._peerModelManager){if("ActAsClient"!==this._mode){var b=this.getAllActions();b&&0<b.length&&b.forEach(function(b){a.removeAction(b.id)})}this.removeManagerListeners(this._peerModelManager)}d.cleanup(this._nameSpace);this._peerModelManager=null}})})},"mw-peermodel/PeerModelManager":function(){define(["dojo/_base/declare","./PropSetPeerSynchronizer","./PeerNode","./PeerSynchronizer",
"./Observable"],function(k,d,g,a,b){var l=k([b],{getNamespace:function(){},move:function(a,b,d,f){},setRoot:function(a,b,d){},getRoot:function(){},hasRoot:function(){},hasById:function(a){},getById:function(a){},setSyncEnabled:function(a,b){},isSyncEnabled:function(){},getByType:function(a,b){},getByProperty:function(a,b,d){}}),f=k([l,b.Syncable],{setRootWithId:function(a,b,d,f){}}),h=k([f,b.Impl],{constructor:function(){this._root=null;this._sync=!1;this._idCache={}},setRootWithId:function(a,b,d,
f){if(this.hasRoot())throw Error("Root node already exists.");a=new g.Impl(a,b,d,this._idCache);this._setRoot(a,f);return a},setRoot:function(a,b,d){if(this.hasRoot())throw Error("Root node already exists.");a=g.Impl.createNode(a,b,this._idCache);this._setRoot(a,d);return a},_setRoot:function(a,b){this._root=a;var c=this;this._root.destroy=function(a){c.dispatchEvent("rootDestroyed",this,void 0,a);g.Impl.prototype.destroy.call(this,a);c._root=null;c.dispatchEvent("rootUnset",this,void 0,a)};this.dispatchEvent("rootSet",
this._root,void 0,b);return this._root},getRoot:function(){return this._root},hasRoot:function(){return!!this._root},hasById:function(a){return this._idCache.hasOwnProperty(a)},getById:function(a){if(this._idCache.hasOwnProperty(a))return this._idCache[a];throw Error("No root node exists");},move:function(a,b,d,f){if(a.getRoot()!==b.getRoot())throw Error("Can not move a node to a different peer model");if(a===b||a.hasDescendant(a.getId()))throw Error("Can not move a node to be a child or descendant of itself");
if(a.hasParent()){var c=a.getParent();var e=c.getChildIndex(a)}else throw Error("Only un-orphaned nodes can be moved.");if(e!==d||c!==b)c._removeChild(a),d=b._addChild(a,d),this.dispatchEvent("childMoved",a,{oldParent:c,oldIndex:e,newParent:b,newIndex:d},f)},setSyncEnabled:function(a,b){this._sync!==a&&(this._sync=a,this.dispatchEvent("syncChanged",this,{syncEnabled:this._sync},b))},isSyncEnabled:function(){return this._sync},getByType:function(a,b){var c=[];b||(b=this.getRoot());b&&b.accept(function(b){b.getType()===
a&&c.push(b)});return c},getByProperty:function(a,b,d){var c=[];d||(d=this.getRoot());d&&d.accept(function(d){d.hasProperty(a)&&d.getProperty(a)===b&&c.push(d)});return c}});l._clientPropSet=!0;l.setClientPropSetEnabled=function(a){l._clientPropSet=a};l.clearInstances=function(){l._instances={};l._serverInstances={}};l.clearInstances();l.getInstance=l.getClientInstance=function(c,b){if(!this._instances[c]){var e=new h;b=l._clientPropSet?new d(c,e,b):new a(c,e,b);this._instances[c]={manager:e,synchronizer:b}}return this._instances[c].manager};
l.getServerInstance=function(c,b){if(!this._serverInstances[c]){var e=new h;b=l._clientPropSet?new d(c,e,b,!1):new a(c,e,b,!1);this._serverInstances[c]={manager:e,synchronizer:b}}return this._serverInstances[c].manager};l.cleanup=function(a){l._instances[a]&&(l._instances[a].manager.setSyncEnabled(!1),l._instances[a].manager.hasRoot()&&l._instances[a].manager.getRoot().destroy(),l._instances[a].synchronizer.remove(),delete l._instances[a])};l.Impl=h;return l})},"mw-peermodel/PropSetPeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./PeerSynchronizer".split(" "),
function(k,d,g,a,b,l){return k([l],{propertiesSetObserver:function(b){if(b.originator!==this._originator&&(Object.keys(b.data.newValues).forEach(function(a){this.updateVersionVector(a,b.target)},this),this.shouldSync()&&this.isReady())){var f=this.createNewMessage();f.targetId=b.target.getId();var c=b.data.newValues,e=b.data.oldValues;Object.keys(c).forEach(function(d){if(a.isImageData(c[d])){var h=e[d];delete b.data.newValues[d];if(!this.isClient&&a.isImageData(h)){var l=this.createNewMessage();
l.targetId=b.target.getId();l.key=d;l.newValue=this.imageDifferencer.computeImageDataDifferences(h,c[d]);this.publish(this.getChannel("imageUpdate"),f)}}else null!==c[d]&&void 0!==c[d]||delete b.data.newValues[d]},this);0<Object.keys(c).length&&(f.properties=b.data.newValues,f.versionVector=d.clone(b.target._versionVector),this.publish(this.getChannel(b.type),f))}},propertiesSetSubscriber:function(a){this.log("propertiesSetSubscriber",a);var b=a.data,c=b.targetId;if(this.manager.hasById(c))try{var d=
this.manager.getById(c),f;for(f in b.properties)b.properties.hasOwnProperty(f)&&(b.properties[f]instanceof Image?(this.imageDifferencer.updatePropertyWithImage(d,f,b.properties[f]),delete b.properties[f]):this.shouldUpdateProperties(f,d,a.data.versionVector)||delete b.properties[f],a.data.versionVector&&this.mergeVersionVectors(f,d,a.data.versionVector));d.setProperties(b.properties,this._originator);this._updateNodePagedData(d)}catch(n){this._error("Error while trying set properties.",a,n)}},shouldUpdateProperties:function(a,
b,c){return this.isClient?!(b._versionVector&&b._versionVector[a]&&(!c||!c[a])):!c||!c[a]||!b._versionVector||!b._versionVector[a]||b._versionVector[a][this.clientId]<=c[a][this.clientId]},updateVersionVector:function(a,b){!this.isClient||b._versionVector&&b._versionVector[a]?b._versionVector&&b._versionVector[a]&&(b._versionVector[a][this.clientId]+=1):(b._versionVector=b._versionVector||{},b._versionVector[a]={},Object.keys(this.syncEnabled).forEach(function(c){b._versionVector[a][c]=1}))},mergeVersionVectors:function(a,
b,c){c&&c[a]&&(b._versionVector&&b._versionVector[a]||(b._versionVector=b._versionVector||{},b._versionVector[a]={}),Object.keys(c[a]).forEach(function(d){b._versionVector[a][d]=Math.max(c[a][d],b._versionVector[a][d]||1)}))},convertNode:function(a){var b=this.inherited(arguments);b.versionVectors=a._versionVector;return b},updateNodeRecursive:function(a,b){b.versionVectors&&Object.keys(b.versionVectors).forEach(function(c){this.mergeVersionVectors(c,a,b.versionVectors)},this);this.inherited(arguments)}})})},
"mw-log/Log":function(){var k=function(){function d(d,a){for(var b=0;b<a.length;b++){var l=a[b];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(d,l.key,l)}}return function(g,a,b){a&&d(g.prototype,a);b&&d(g,b);return g}}();define(["mw-log/impl/Modes","mw-log/impl/Levels","mw-log/impl/Backlog","mw-log/util/LogUtils"],function(d,g,a,b){var l=a.create(100),f={},h=0,c=g.DEBUG,e=d.DEVELOPMENT,m=[],n={};return new (function(){function a(c){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");null!=n[c]?n.DEFAULT.error("a logger with the name '"+c+"' already exists - change the name to prevent interference"):(b.makeReadOnlyProperty(this,"name",c),n[this.name]=this,this._timers={},this._threshold=g.DEBUG,this._showTimestamp=!0,b.makeReadOnlyProperty(this,"modes",d),b.makeReadOnlyProperty(this,"levels",g))}k(a,[{key:"_shouldLog",value:function(a){return c>a&&this._threshold>a}},{key:"_nameAndTime",value:function(){var a=[];"DEFAULT"!==
this.name&&a.push(this.name);this._showTimestamp&&a.push(b.currentTimeString());return a}},{key:"table",value:function(a){if(this._shouldLog(3)){var c={namespace:this.name,type:"table",message:[a],time:new Date};l.add(c);b.printToConsole("log",this._nameAndTime(),e);b.printToConsole("table",[a],e);b.execCallbacks(f,c)}}},{key:"trace",value:function(){if(this._shouldLog(3)){var a={namespace:this.name,type:"trace",message:null,time:new Date},c=Error().stack.split("\n");for("Error"===c[0]&&c.shift();c[0].includes("Log.js")||
c[0].includes("logger.trace")||"trace"===c[0];)c.shift();c=c.join("\n");a.message=[c];l.add(a);b.printToConsole("log",this._nameAndTime(),e);b.printToConsole("trace",[],e);b.execCallbacks(f,a)}}},{key:"time",value:function(a){this._shouldLog(3)&&(null==this._timers[a]?this._timers[a]=(new Date).getTime():this.warn('timer "'+a+'" already exists.'))}},{key:"timeEnd",value:function(a){if(this._shouldLog(3)){var c={namespace:this.name,type:"timeEnd",message:null,time:new Date};if(null!=this._timers[a]){var d=
(new Date).getTime()-this._timers[a];c.message=[a+": "+d+"ms - timer ended"];l.add(c);b.printToConsole("log",this._nameAndTime().concat(c.message),e);b.execCallbacks(f,c);this._timers[a]=null}else this.warn('timer "'+a+"\" doesn't exist.")}}},{key:"_group",value:function(a,c){if(this._shouldLog(3)){c=c?"groupCollapsed":"group";var d={namespace:this.name,type:c,message:[a],time:new Date};m.push(a);l.add(d);b.printToConsole(c,[a],e);b.execCallbacks(f,d)}}},{key:"groupCollapsed",value:function(a){this._group(a,
!0)}},{key:"group",value:function(a){this._group(a,!1)}},{key:"groupEnd",value:function(){if(this._shouldLog(3)){var a=m.pop();a={namespace:this.name,type:"groupEnd",message:[a],time:new Date};l.add(a);b.printToConsole("groupEnd",[],e);b.execCallbacks(f,a)}}},{key:"assert",value:function(a,c){this._shouldLog(0)&&!a&&(a={namespace:this.name,type:"assert",message:["Assertion failed:",c],time:new Date},l.add(a),b.printToConsole("assert",this._nameAndTime().concat(a.message),e),b.execCallbacks(f,a))}},
{key:"_basicLogMethod",value:function(a,c,d){this._shouldLog(c)&&(c={namespace:this.name,type:a,message:d,time:new Date},d=this._nameAndTime().concat(d),l.add(c),b.printToConsole(a,d,e),b.execCallbacks(f,c))}},{key:"debug",value:function(a){var c=Array.prototype.slice.call(arguments);this._basicLogMethod("debug",4,c)}},{key:"log",value:function(a){var c=Array.prototype.slice.call(arguments);this._basicLogMethod("log",3,c)}},{key:"dir",value:function(a){var c=Array.prototype.slice.call(arguments);
this._basicLogMethod("dir",3,c)}},{key:"info",value:function(a){var c=Array.prototype.slice.call(arguments);this._basicLogMethod("info",2,c)}},{key:"warn",value:function(a){var c=Array.prototype.slice.call(arguments);this._basicLogMethod("warn",1,c)}},{key:"error",value:function(a){var c=Array.prototype.slice.call(arguments);this._basicLogMethod("error",0,c)}},{key:"addCallback",value:function(a,c){f[h]=a;c&&l.applyCallback(a);a={};var b=h;a.remove=function(){delete f[b]};h++;return a}},{key:"createLogger",
value:function(c){var b=new a(c);return b.name?b:n[c]}},{key:"threshold",get:function(){return this._threshold},set:function(c){this._threshold=a._sanitizeLevel(c)}},{key:"showTimestamp",get:function(){return this._showTimestamp},set:function(a){this._showTimestamp=!!a}},{key:"globalThreshold",get:function(){return c},set:function(b){c=a._sanitizeLevel(b)}},{key:"mode",get:function(){return e},set:function(c){e=a._sanitizeMode(c)}}],[{key:"_sanitizeLevel",value:function(a){return"number"===typeof a?
a:g.DEBUG}},{key:"_sanitizeMode",value:function(a){return-1<b.objectValues(d).indexOf(a)?a:d.development}}]);return a}())("DEFAULT")})},"mw-log/impl/Modes":function(){define([],function(){var k={DEVELOPMENT:"DEVELOPMENT",PRODUCTION:"PRODUCTION"};Object.freeze(k);return k})},"mw-log/impl/Levels":function(){define([],function(){var k={DEBUG:5,LOG:4,TABLE:4,TIME:4,DIR:4,INFO:3,WARN:2,ASSERT:1,ERROR:1};Object.freeze(k);return k})},"mw-log/impl/Backlog":function(){define(["mw-log/util/LogUtils"],function(k){return{create:function(d){var g=
{},a=[];k.makeReadOnlyProperty(g,"size",d);var b=0;g.add=function(d){a[b]=d;b=(b+1)%g.size};g.applyCallback=function(l){var f=b+1;void 0===a[f]&&(f=0);for(var h=0;h<g.size&&void 0!==a[f];)l(a[f]),f=(f+1)%d,h++};return g}}})},"mw-log/util/LogUtils":function(){define(["mw-log/impl/Modes"],function(k){var d={objectValues:function(d){var a=[],b;for(b in d)a.push(d[b]);return a},makeReadOnlyProperty:function(d,a,b){Object.defineProperty(d,a,{value:b,writable:!1})},execCallbacks:function(g,a){g=d.objectValues(g);
for(var b in g)g[b](a)},currentTimeString:function(){var d=new Date;return d.toLocaleTimeString("en-US",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric"})+"."+d.getTime()%1E3},printToConsole:function(d,a,b){b===k.PRODUCTION&&"error"!==d||console[d].apply(console,a)}};return d})},"mw-utils/Utils":function(){define(["dojo/_base/lang","dojo/_base/window","mw-utils/deprecation"],function(k,d,g){return{generateUuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|
0;return("x"===a?b:b&3|8).toString(16)}).toUpperCase()},isImageData:function(a){return!!a&&(d.global.ImageData&&a instanceof d.global.ImageData||a.hasOwnProperty("width")&&a.hasOwnProperty("height")&&a.hasOwnProperty("data"))},isArray:function(a){g.deprecated({deprecated:{module:"MW/utils/Utils",method:"isArray"},geckNumber:1444368});return Array.isArray(a)},getArrayLength:function(a){var b=0;if(!k.isArray(a))return!1;a.forEach(function(a){a&&(b+=1)});return b},isWhitespace:function(a){return/^\s+$/.test(a)},
removeSurroundingNewLines:function(a){for(;"\n"===a.charAt(0);)a=a.substring(1);for(;"\n"===a.charAt(a.length-1);)a=a.substring(0,a.length-1);return a},getFirstUniqueElement:function(a,b){var d=null;b.some(function(b){if(-1===a.indexOf(b))return d=b,!0});return d},unionOfWordSets:function(a,b,d){a=this._stringToArray(a);b=this._stringToArray(b);a=this.unionOfArrays(a,b);return d?a.join(" "):a},intersectionOfWordSets:function(a,b,d){a=this._stringToArray(a);b=this._stringToArray(b);a=this.intersectionOfArrays(a,
b);return d?a.join(" "):a},differenceOfWordSets:function(a,b,d){a=this._stringToArray(a);b=this._stringToArray(b);a=this.unique(this.differenceOfArrays(a,b));return d?a.join(" "):a},unionOfArrays:function(a,b){return this.unique(a.concat(b))},intersectionOfArrays:function(a,b){return this.nonunique(a.concat(b))},differenceOfArrays:function(a,b){if(void 0===window.Map)return this._legacyDifferenceOfArrays(a,b);var d,f=new Map,h=[];for(d=0;d<b.length;d++)f.set(b[d],null);for(d=0;d<a.length;d++){var c=
a[d];(b=f.has(c))||h.push(c)}return h},_legacyDifferenceOfArrays:function(a,b){return this.unique(a.filter(function(a){return-1===b.indexOf(a)}))},unique:function(a){return a.filter(function(b,d){return a.indexOf(b)===d})},nonunique:function(a){return this.unique(a.filter(function(b,d){return a.indexOf(b)!==d}))},arrayEquals:function(a,b,d){if(a===b)return!0;if(a.length!==b.length)return!1;d||(d=function(a,b){return a===b});for(var f=0,h=a.length;f<h;f++)if(!d(a[f],b[f]))return!1;return!0},removeEmptyElements:function(a){return a.filter(function(a){return!(""===
a||null===a||void 0===a)})},_stringToArray:function(a){return this._isString(a)?this.removeEmptyElements(a.split(" ")):a},_isString:function(a){return"string"===typeof a||a instanceof String}}})},"mw-utils/deprecation":function(){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return d&&"function"===typeof Symbol&&
d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};define(["dojo/_base/config","mw-log/Log"],function(d,g){var a={deprecated:function(a){if((d.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(a)){var b=window.showDeprecationsAsErrors||a.deprecationLevel===this.ERROR?this.ERROR:this.WARN;var f="DEPRECATED: ";a.deprecated&&(f+=a.deprecated.module,a.deprecated.method&&(f+="."+a.deprecated.method+"()"),f+=".");a.replacement&&(f+=" Use "+a.replacement.module,a.replacement.method&&
(f+="."+a.replacement.method+"()"),f+=" instead.");a.removalVersion&&(f+=" Will be removed in version: "+a.removalVersion+".");a.geckNumber&&(f+=" Please use g"+a.geckNumber+" to track latest information regarding this deprecation");a.additionalInformation&&(f+=" "+a.additionalInformation);g[b](f)}},_isConfigValid:function(a){var b=!!a.deprecated&&"object"===k(a.deprecated)&&a.deprecated.hasOwnProperty("module");a.replacement&&(b=b&&"object"===k(a.replacement)&&a.replacement.hasOwnProperty("module"));
a.geckNumber&&(b=b&&"number"===typeof a.geckNumber);b||g.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return b}};Object.defineProperties(a,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return a})},"mw-messageservice/MessageService":function(){define("dojo/_base/lang dojo/aspect dojo/on ./messageserviceimpl/MessageServiceAsync ./messageserviceimpl/MessageServiceBase ./messageserviceimpl/MessageServiceReqResp mw-remote/Remote".split(" "),
function(k,d,g,a,b,l,f){var h=new b;b={messageService:h,subscribe:k.hitch(h,"subscribe"),unsubscribe:k.hitch(h,"unsubscribe"),publish:k.hitch(h,"publish"),start:k.hitch(h,"start"),stop:k.hitch(h,"stop"),isRunning:k.hitch(h,"isStarted"),isStarted:k.hitch(h,"isStarted"),isConnected:k.hitch(h,"isConnected"),isFatallyDisconnected:k.hitch(h,"isFatallyDisconnected"),isDisconnected:k.hitch(h,"isDisconnected"),setLatency:k.hitch(h,"setLatency"),setErrorRate:k.hitch(h,"setErrorRate"),onConnected:function(){},
onDisconnected:function(){},onReconnected:function(){},onFatallyDisconnected:function(){},onNotConnected:function(){},on:function(a,c){return g(this.messageService,a,c)},handleMessage:k.hitch(h,"handleMessage"),internalMotwDisableStart:function(){this._startFunction=this.start;this.start=function(){}},internalMotwEnableStart:function(){this._startFunction&&(this.start=this._startFunction,this._startFunction=null)}};d.after(h,"onConnected",k.hitch(b,"onConnected"),!0);d.after(h,"onDisconnected",k.hitch(b,
"onDisconnected"),!0);d.after(h,"onReconnected",k.hitch(b,"onReconnected"),!0);d.after(h,"onFatallyDisconnected",k.hitch(b,"onFatallyDisconnected"),!0);d.after(h,"onNotConnected",k.hitch(b,"onNotConnected"),!0);var c=f.enableServerOnWorkerAsync;f.enableServerOnWorkerAsync=function(){c();h.setDelegate(new a(f))};var e=f.disableServerOnWorkerAsync;f.disableServerOnWorkerAsync=function(){e();h.setDelegate(new l(f,h))};f.isServerOnWorkerAsyncEnabled()?f.enableServerOnWorkerAsync():f.disableServerOnWorkerAsync();
return b})},"mw-messageservice/messageserviceimpl/MessageServiceAsync":function(){define("dojo/_base/declare dojo/_base/config dojo/aspect dojo/json dojo/Deferred dojox/cometd/cometd dojox/cometd/AckExtension mw-log/Log mw-remote/iframeproxy/IframeProxyClient".split(" "),function(k,d,g,a,b,l,f,h,c){var e=l.Utils.setTimeout;l.JSON.toJSON=a.stringify;l.JSON.fromJSON=a.parse;var m=0,n=0,q={};setInterval(function(){m+=200;Object.keys(q).forEach(function(a){var c=q[a];c.execTime<=m&&(c.func(),delete q[a])})},
200);var p=function(a,b,d,h,g){var k=new l.LongPollingTransport;k=l.Transport.derive(k);k.xhrSend=function(a){if(h.remoteSupportsSendPayload){a.headers=a.headers||{};a.headers.computeToken=h.computeToken;var c=g.sendPayload(a.body,h.endPointName,{headers:a.headers})}else c=b.sendMessage(a.body,h.url,{headers:a.headers});c.then(a.onSuccess,function(c){a.onError(c,c)});return{abort:function(){c.cancel()}}};var p=new l.Cometd(a);l.Utils.setTimeout=function(a,c,b){if(0===b)return e(a,c,b);n+=1;q[n]={func:function(){try{c()}catch(B){p._debug("Exception invoking timed function",
c,B)}},execTime:m+b};return n};l.Utils.clearTimeout=function(a){delete q[a]};h.remoteSupportsSendPayload?h.endPointAllowsDirectXhr.then(function(a){"ENABLED"!==a.status&&(l.WebSocket=c.WebSocket,c.WebSocket.proxyClient=b)}):(l.WebSocket=c.WebSocket,c.WebSocket.proxyClient=b);p.registerExtension("ack",new f);d.websocket&&p.registerTransport("websocket",new l.WebSocketTransport,0);p.registerTransport("long-polling",k,1);return p};var t=k([],{BASE_PREFIX:"/matlab",BASE_END_POINT:"messageservice/async",
logCometdLifecycle:!1,logCometdSubscriptions:!1,constructor:function(a,b,e,f){this.remote=a;this.constructCometD=b||p;this.cometdProperties=f||{connectTimeout:5E3,maxBackoff:1E4,logLevel:"info",maxNetworkDelay:2E4,appendMessageTypeToURL:!1,autoBatch:!0};this._webSocket={try:!0,connectedAtLeastOnce:!1};a=["maxNetworkDelay","connectTimeout","logLevel"];if(b=d.cometdProperties)for(f=0;f<a.length;f+=1){var l=a[f];void 0!==b[l]&&(this.cometdProperties[l]=b[l])}this.workerProxyAsyncClient=e||new c("remoteWorkerAsyncProducer");
var m=this;g.after(this.workerProxyAsyncClient,"onError",function(a){m.cometd&&(m.logCometdLifecycle&&h.info("MessageServiceAsync disconnecting cometd due to IFrame error."),m.cometd.disconnect());m.onConnectionError(a)},!0);this.subscriptions={};this.recentMessages=[];this._deferredCleanupFunction=function(){m._deferredCleanup=!1;m.recentMessages=[]}},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.routingHost=t.workerHostOverride||this.remote.getWorkerRoutingHost();
this.routingKey=this.remote.getWorkerRoutingKey();this.computeToken=this.remote.getComputeSessionId();var a=this._setUpEndPoint();this.computeToken&&(a.computeToken=this.computeToken);a.remoteSupportsSendPayload||this.workerProxyAsyncClient.setRemotePageHost(this.routingHost,this.routingKey,this.computeToken);var c={};t.enableWebsocket&&this._webSocket.try?c.websocket=!0:(c.websocket=!1,this._webSocket.try=!1);var d=this.constructCometD("messageService",this.workerProxyAsyncClient,c,a,this.remote);
this.cometd=d;this.logCometdLifecycle&&h.info("MessageServiceAsync constructing new cometd instance.");c=this._createOneShotMessagePromise("/meta/handshake");this._createListenerForUnknownClient();var e=this,f=new b;c.then(function(a){e.logCometdLifecycle&&h.info("MessageServiceAsync cometd handshake successful.",a,d.getClientId(),d);d.isDisconnected()?(h.error("MessageServiceAsync cometd handshake successful but still disconnected!"),d.disconnect(),f.reject(a)):("websocket"===d.getTransport().getType()&&
(e._webSocket.connectedAtLeastOnce=!0),f.resolve(a))},function(a){e.logCometdLifecycle&&h.info("MessageServiceAsync disconnecting cometd due to handshake failure.",a,d.getClientId(),d);d.disconnect();if(a.request&&a.request.supportedConnectionTypes){var c=a.request.supportedConnectionTypes;1<c.length&&"websocket"===c[0]&&!e._webSocket.connectedAtLeastOnce&&(e._webSocket.try=!1)}f.reject(a)});this.cometdProperties.url=a.url;d.init(this.cometdProperties);return f.promise},disconnect:function(){this.logCometdLifecycle&&
h.info("MessageServiceAsync disconnecting cometd due to disconnect call.",this.cometd.getClientId());var a=this._createOneShotMessagePromise("/meta/disconnect");this.cometd.disconnect();return a},cleanup:function(){this.cometd&&(this.logCometdLifecycle&&h.info("MessageServiceAsync disconnecting cometd due to cleanup call.",this.cometd,this.cometd&&this.cometd.getClientId()),this.cometd.disconnect(),this.cometd=null)},delegateConnected:function(){return this.cometd?!this.cometd.isDisconnected():!1},
doPublish:function(a,c){var b=this._createOneShotMessagePromise("/meta/publish");this.cometd.publish(this._getRequestChannel(a),c);return b},doSubscribe:function(a){this.logCometdSubscriptions&&h.info("MessageServiceAsync subscribing cometd to channel: "+a);var c=this._createOneShotMessagePromise("/meta/subscribe");this.subscriptions[a]=this.cometd.subscribe(this._getRequestChannel(a),this,this._handleCometResponse);return c},doUnsubscribe:function(a){if(this.subscriptions[a]){this.logCometdSubscriptions&&
h.info("MessageServiceAsync unsubscribing cometd from channel: "+a);var c=this._createOneShotMessagePromise("/meta/unsubscribe");this.cometd.unsubscribe(this.subscriptions[a]);delete this.subscriptions[a];return c}return(new b).resolve({successful:!0})},doStartBatch:function(){this.cometd.startBatch()},doEndBatch:function(){this.cometd.endBatch()},doSetLatency:function(a){this.workerProxyAsyncClient.setLatency(a)},doSetErrorRate:function(a){this.workerProxyAsyncClient.setErrorRate(a)},_handleCometResponse:function(a){if(this._shouldHandleMessage(a))this.onMessage(this._stripBasePrefixAndConvertToJson(a))},
_shouldHandleMessage:function(a){return!a.id&&0>this.recentMessages.indexOf(a)?(this.recentMessages.push(a),this._deferRecentMessagesCleanup(),!0):!1},_deferRecentMessagesCleanup:function(){this._deferredCleanup||(this._deferredCleanup=setTimeout(this._deferredCleanupFunction,0))},_createOneShotMessagePromise:function(a){var c=new b;this._addOneShotListener(a,function(a){a.successful?c.resolve(a):(h.warn("Message failed: ",a),c.reject(a))});return c.promise},_addOneShotListener:function(a,c){var b=
this,d=this.cometd;var e=this.cometd.addListener(a,function(a){d.removeListener(e);c.apply(b,arguments)})},_createListenerForUnknownClient:function(){var a=this.cometd,c=this;a.addListener("/meta/connect",function(b){!b.successful&&b.advice&&"handshake"===b.advice.reconnect&&(a.disconnect(),c.onConnectionError(b.error))})},_setUpEndPoint:function(){var a=this.routingHost+this.BASE_END_POINT;this.routingKey&&(a+="?routingkey\x3d"+this.routingKey);return{remoteSupportsSendPayload:!1,url:a,endPointName:"MESSAGE_SERVICE_ASYNC_ENDPOINT",
endPointAllowsDirectXhr:void 0}},_getRequestChannel:function(a){return this.BASE_PREFIX+a},_stripBasePrefixAndConvertToJson:function(a){return{channel:a.channel.substring(this.BASE_PREFIX.length),data:a.data}}});t.enableWebsocket=!1;t.workerHostOverride=!1;0<=location.search.indexOf("websocket\x3don")&&(t.enableWebsocket=!0);return t})},"dojox/cometd/cometd":function(){define(function(){var k=this.org=this.org||{};k.cometd={};k.cometd.JSON={};k.cometd.JSON.toJSON=k.cometd.JSON.fromJSON=function(d){throw"Abstract";
};k.cometd.Utils={};k.cometd.Utils.isString=function(d){return void 0===d||null===d?!1:"string"===typeof d||d instanceof String};k.cometd.Utils.isArray=function(d){return void 0===d||null===d?!1:d instanceof Array};k.cometd.Utils.inArray=function(d,g){for(var a=0;a<g.length;++a)if(d===g[a])return a;return-1};k.cometd.Utils.setTimeout=function(d,g,a){return window.setTimeout(function(){try{g()}catch(b){d._debug("Exception invoking timed function",g,b)}},a)};k.cometd.Utils.clearTimeout=function(d){window.clearTimeout(d)};
k.cometd.TransportRegistry=function(){var d=[],g={};this.getTransportTypes=function(){return d.slice(0)};this.findTransportTypes=function(a,b,l){for(var f=[],h=0;h<d.length;++h){var c=d[h];!0===g[c].accept(a,b,l)&&f.push(c)}return f};this.negotiateTransport=function(a,b,l,f){for(var h=0;h<d.length;++h)for(var c=d[h],e=0;e<a.length;++e)if(c===a[e]){var m=g[c];if(!0===m.accept(b,l,f))return m}return null};this.add=function(a,b,l){for(var f=!1,h=0;h<d.length;++h)if(d[h]===a){f=!0;break}f||("number"!==
typeof l?d.push(a):d.splice(l,0,a),g[a]=b);return!f};this.find=function(a){for(var b=0;b<d.length;++b)if(d[b]===a)return g[a];return null};this.remove=function(a){for(var b=0;b<d.length;++b)if(d[b]===a)return d.splice(b,1),b=g[a],delete g[a],b;return null};this.clear=function(){d=[];g={}};this.reset=function(){for(var a=0;a<d.length;++a)g[d[a]].reset()}};k.cometd.Transport=function(){var d,g;this.registered=function(a,b){d=a;g=b};this.unregistered=function(){g=d=null};this._debug=function(){g._debug.apply(g,
arguments)};this._mixin=function(){return g._mixin.apply(g,arguments)};this.getConfiguration=function(){return g.getConfiguration()};this.getAdvice=function(){return g.getAdvice()};this.setTimeout=function(a,b){return k.cometd.Utils.setTimeout(g,a,b)};this.clearTimeout=function(a){k.cometd.Utils.clearTimeout(a)};this.convertToMessages=function(a){if(k.cometd.Utils.isString(a))try{return k.cometd.JSON.fromJSON(a)}catch(b){throw this._debug("Could not convert to JSON the following string",'"'+a+'"'),
b;}if(k.cometd.Utils.isArray(a))return a;if(void 0===a||null===a)return[];if(a instanceof Object)return[a];throw"Conversion Error "+a+", typeof "+typeof a;};this.accept=function(a,b,d){throw"Abstract";};this.getType=function(){return d};this.send=function(a,b){throw"Abstract";};this.reset=function(){this._debug("Transport",d,"reset")};this.abort=function(){this._debug("Transport",d,"aborted")};this.toString=function(){return this.getType()}};k.cometd.Transport.derive=function(d){function g(){}g.prototype=
d;return new g};k.cometd.RequestTransport=function(){function d(a){for(;0<m.length;){var c=m[0],b=c[0];c=c[1];if(b.url===a.url&&b.sync===a.sync)m.shift(),a.messages=a.messages.concat(b.messages),this._debug("Coalesced",b.messages.length,"messages from request",c.id);else break}}function g(a,c){this.transportSend(a,c);c.expired=!1;if(!a.sync){var b=this.getConfiguration().maxNetworkDelay,d=b;!0===c.metaConnect&&(d+=this.getAdvice().timeout);this._debug("Transport",this.getType(),"waiting at most",
d,"ms for the response, maxNetworkDelay",b);var e=this;c.timeout=this.setTimeout(function(){c.expired=!0;c.xhr&&c.xhr.abort();var b="Request "+c.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay";e._debug(b);e.complete(c,!1,c.metaConnect);a.onFailure(c.xhr,a.messages,"timeout",b)},d)}}function a(a){var c=++h,b={id:c,metaConnect:!1};e.length<this.getConfiguration().maxConnections-1?(e.push(b),g.call(this,a,b)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",
a),m.push([a,b]))}function b(c,b){var f=k.cometd.Utils.inArray(c,e);0<=f&&e.splice(f,1);if(0<m.length){f=m.shift();var h=f[0],l=f[1];this._debug("Transport dequeued request",l.id);if(b)this.getConfiguration().autoBatch&&d.call(this,h),a.call(this,h),this._debug("Transport completed request",c.id,h);else{var g=this;this.setTimeout(function(){g.complete(l,!1,l.metaConnect);h.onFailure(l.xhr,h.messages,"error","Previous request failed")},0)}}}var l=new k.cometd.Transport,f=k.cometd.Transport.derive(l),
h=0,c=null,e=[],m=[];f.complete=function(a,d,e){if(e){a=a.id;this._debug("Transport",this.getType(),"metaConnect complete, request",a);if(null!==c&&c.id!==a)throw"Longpoll request mismatch, completing request "+a;c=null}else b.call(this,a,d)};f.transportSend=function(a,c){throw"Abstract";};f.transportSuccess=function(a,c,b){if(!c.expired)if(this.clearTimeout(c.timeout),this.complete(c,!0,c.metaConnect),b&&0<b.length)a.onSuccess(b);else a.onFailure(c.xhr,a.messages,"Empty HTTP response")};f.transportFailure=
function(a,c,b,d){c.expired||(this.clearTimeout(c.timeout),this.complete(c,!1,c.metaConnect),a.onFailure(c.xhr,a.messages,b,d))};f.send=function(b,d){if(d){if(null!==c)throw"Concurrent metaConnect requests not allowed, request id\x3d"+c.id+" not yet completed";d=++h;this._debug("Transport",this.getType(),"metaConnect send, request",d,"envelope",b);d={id:d,metaConnect:!0};g.call(this,b,d);c=d}else a.call(this,b)};f.abort=function(){l.abort();for(var a=0;a<e.length;++a){var b=e[a];this._debug("Aborting request",
b);b.xhr&&b.xhr.abort()}c&&(this._debug("Aborting metaConnect request",c),c.xhr&&c.xhr.abort());this.reset()};f.reset=function(){l.reset();c=null;e=[];m=[]};return f};k.cometd.LongPollingTransport=function(){var d=new k.cometd.RequestTransport,g=k.cometd.Transport.derive(d),a=!0;g.accept=function(b,d,f){return a||!d};g.xhrSend=function(a){throw"Abstract";};g.transportSend=function(b,d){this._debug("Transport",this.getType(),"sending request",d.id,"envelope",b);var f=this;try{var h=!0;d.xhr=this.xhrSend({transport:this,
url:b.url,sync:b.sync,headers:this.getConfiguration().requestHeaders,body:k.cometd.JSON.toJSON(b.messages),onSuccess:function(c){f._debug("Transport",f.getType(),"received response",c);var e=!1;try{var h=f.convertToMessages(c);0===h.length?(a=!1,f.transportFailure(b,d,"no response",null)):(e=!0,f.transportSuccess(b,d,h))}catch(n){f._debug(n),e||(a=!1,f.transportFailure(b,d,"bad response",n))}},onError:function(c,e){a=!1;h?f.setTimeout(function(){f.transportFailure(b,d,c,e)},0):f.transportFailure(b,
d,c,e)}});h=!1}catch(c){a=!1,this.setTimeout(function(){f.transportFailure(b,d,"error",c)},0)}};g.reset=function(){d.reset();a=!0};return g};k.cometd.CallbackPollingTransport=function(){var d=new k.cometd.RequestTransport;d=k.cometd.Transport.derive(d);d.accept=function(d,a,b){return!0};d.jsonpSend=function(d){throw"Abstract";};d.transportSend=function(d,a){for(var b=this,l=0,f=d.messages.length,h=[];0<f;){var c=k.cometd.JSON.toJSON(d.messages.slice(l,l+f));c=d.url.length+encodeURI(c).length;if(2E3<
c){if(1===f){var e="Bayeux message too big ("+c+" bytes, max is 2000) for transport "+this.getType();this.setTimeout(function(){b.transportFailure(d,a,"error",e)},0);return}--f}else h.push(f),l+=f,f=d.messages.length-l}var m=d;if(1<h.length)for(l=0,f=h[0],this._debug("Transport",this.getType(),"split",d.messages.length,"messages into",h.join(" + ")),m=this._mixin(!1,{},d),m.messages=d.messages.slice(l,f),m.onSuccess=d.onSuccess,m.onFailure=d.onFailure,c=1;c<h.length;++c){var g=this._mixin(!1,{},d);
l=f;f+=h[c];g.messages=d.messages.slice(l,f);g.onSuccess=d.onSuccess;g.onFailure=d.onFailure;this.send(g,a.metaConnect)}this._debug("Transport",this.getType(),"sending request",a.id,"envelope",m);try{var q=!0;this.jsonpSend({transport:this,url:m.url,sync:m.sync,headers:this.getConfiguration().requestHeaders,body:k.cometd.JSON.toJSON(m.messages),onSuccess:function(c){var d=!1;try{var e=b.convertToMessages(c);0===e.length?b.transportFailure(m,a,"no response"):(d=!0,b.transportSuccess(m,a,e))}catch(u){b._debug(u),
d||b.transportFailure(m,a,"bad response",u)}},onError:function(c,d){q?b.setTimeout(function(){b.transportFailure(m,a,c,d)},0):b.transportFailure(m,a,c,d)}});q=!1}catch(p){this.setTimeout(function(){b.transportFailure(m,a,"error",p)},0)}};return d};k.cometd.WebSocketTransport=function(){function d(){var a=f.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var c=this,b=null,d=f.getConfiguration().connectTimeout;0<d&&(b=this.setTimeout(function(){b=null;q||
(c._debug("Transport",c.getType(),"timed out while connecting to URL",a,":",d,"ms"),c.onClose(1002,"Connect Timeout"))},d));var e=new k.cometd.WebSocket(a),h=function(a){var d=a?a.code:1E3;a=a?a.reason:void 0;c._debug("WebSocket closed",d,"/",a,e);b&&(c.clearTimeout(b),b=null);if(e!==n)c._debug("Ignoring close event, WebSocket",n);else c.onClose(d,a)};e.onopen=function(){c._debug("WebSocket opened",e);b&&(c.clearTimeout(b),b=null);if(e!==n)c._debug("Ignoring open event, WebSocket",n);else c.onOpen()};
e.onclose=h;e.onerror=function(){h({code:1002})};e.onmessage=function(a){c._debug("WebSocket message",a,e);if(e!==n)c._debug("Ignoring message event, WebSocket",n);else c.onMessage(a)};n=e;this._debug("Transport",this.getType(),"configured callbacks on",e)}function g(a,c){var b=k.cometd.JSON.toJSON(a.messages);n.send(b);this._debug("Transport",this.getType(),"sent",a,"metaConnect \x3d",c);var d=b=this.getConfiguration().maxNetworkDelay;c&&(d+=this.getAdvice().timeout,p=!0);c=[];for(var e=0;e<a.messages.length;++e){var f=
a.messages[e];if(f.id){c.push(f.id);var h=n;m[f.id]=this.setTimeout(function(){h&&h.close(1E3,"Timeout")},d)}}this._debug("Transport",this.getType(),"waiting at most",d,"ms for messages",c,"maxNetworkDelay",b,", timeouts:",m)}function a(a,c){try{null===n?d.call(this):q&&g.call(this,a,c)}catch(x){var b=n;this.setTimeout(function(){a.onFailure(b,a.messages,"error",x)},0)}}var b=new k.cometd.Transport,l=k.cometd.Transport.derive(b),f,h=!0,c=!1,e={},m={},n=null,q=!1,p=!1,t;l.onOpen=function(){this._debug("Transport",
this.getType(),"opened",n);c=q=!0;this._debug("Sending pending messages",e);for(var a in e){var b=e[a],d=b[0];b=b[1];t=d.onSuccess;g.call(this,d,b)}};l.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,n);var c=!1;a=this.convertToMessages(a.data);for(var b=[],d=0;d<a.length;++d){var f=a[d];if((/^\/meta\//.test(f.channel)||void 0===f.data)&&f.id){b.push(f.id);var h=m[f.id];h&&(this.clearTimeout(h),delete m[f.id],this._debug("Transport",this.getType(),"removed timeout for message",
f.id,", timeouts",m))}"/meta/connect"===f.channel&&(p=!1);"/meta/disconnect"!==f.channel||p||(c=!0)}d=!1;for(f=0;f<b.length;++f){var l=b[f],g;for(g in e){h=g.split(",");var q=k.cometd.Utils.inArray(l,h);if(0<=q){d=!0;h.splice(q,1);l=e[g][0];q=e[g][1];delete e[g];0<h.length&&(e[h.join(",")]=[l,q]);break}}}d&&this._debug("Transport",this.getType(),"removed envelope, envelopes",e);t.call(this,a);c&&n.close(1E3,"Disconnect")};l.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,
n);h=c;for(var d in m)this.clearTimeout(m[d]);m={};for(var f in e)d=e[f][0],e[f][1]&&(p=!1),d.onFailure(n,d.messages,"closed "+a+"/"+b);e={};null!==n&&q&&n.close(1E3,"Close");q=!1;n=null};l.registered=function(a,c){b.registered(a,c);f=c};l.accept=function(a,c,b){return h&&!!k.cometd.WebSocket&&!1!==f.websocketEnabled};l.send=function(c,b){this._debug("Transport",this.getType(),"sending",c,"metaConnect \x3d",b);for(var d=[],f=0;f<c.messages.length;++f){var h=c.messages[f];h.id&&d.push(h.id)}e[d.join(",")]=
[c,b];this._debug("Transport",this.getType(),"stored envelope, envelopes",e);a.call(this,c,b)};l.abort=function(){b.abort();if(null!==n)try{n.close(1001)}catch(r){this._debug(r)}this.reset()};l.reset=function(){b.reset();null!==n&&q&&n.close(1E3,"Reset");h=!0;c=!1;m={};e={};n=null;q=!1;t=null};return l};k.cometd.Cometd=function(d){function g(a){return k.cometd.Utils.isString(a)}function a(a){return void 0===a||null===a?!1:"function"===typeof a}function b(c,b){window.console&&(c=window.console[c],
a(c)&&c.apply(window.console,b))}function l(){for(var a in X)for(var c=X[a],b=c.length-1;0<=b;--b){var d=c[b];d&&!d.listener&&(c.splice(b,1),F._debug("Removed subscription",d,"for channel",a))}}function f(a){M!==a&&(F._debug("Status",M,"-\x3e",a),M=a)}function h(){return"disconnecting"===M||"disconnected"===M}function c(c,b,d,e,f){try{return b.call(c,e)}catch(aa){F._debug("Exception during execution of extension",d,aa);c=F.onExtensionException;if(a(c)){F._debug("Invoking extension exception callback",
d,aa);try{c.call(F,aa,d,f,e)}catch(ea){F._info("Exception during execution of exception callback in extension",d,ea)}}return e}}function e(b){for(var d=0;d<P.length&&void 0!==b&&null!==b;++d){var e=P[d],f=e.extension.outgoing;a(f)&&(e=c(e.extension,f,e.name,b,!0),b=void 0===e?b:e)}return b}function m(c,b){if((c=X[c])&&0<c.length)for(var d=c.length-1;0<=d;--d){var e=c[d];try{e.callback.call(e.scope,b)}catch(aa){F._debug("Exception during notification",e,b,aa);var f=F.onListenerException;if(a(f)){F._debug("Invoking listener exception callback",
e,aa);try{f.call(F,aa,e.handle,e.listener,b)}catch(ea){F._info("Exception during execution of listener callback",e,ea)}}}}}function n(a,c){m(a,c);a=a.split("/");for(var b=a.length-1,d=b;0<d;--d){var e=a.slice(0,d).join("/")+"/*";d===b&&m(e,c);e+="*";m(e,c)}}function q(){null!==ca&&k.cometd.Utils.clearTimeout(ca);ca=null}function p(a){q();var c=T.interval+Q;F._debug("Function scheduled in",c,"ms, interval \x3d",T.interval,"backoff \x3d",Q,a);ca=k.cometd.Utils.setTimeout(F,a,c)}function t(c,b,d,f){for(var h=
0;h<b.length;++h){var l=b[h];l.id=""+ ++W;V&&(l.clientId=V);var g=void 0;a(l._callback)&&(g=l._callback,delete l._callback);l=e(l);void 0!==l&&null!==l?(b[h]=l,g&&(fa[l.id]=g)):b.splice(h--,1)}0!==b.length&&(h=H.url,H.appendMessageTypeToURL&&(h.match(/\/$/)||(h+="/"),f&&(h+=f)),c={url:h,sync:c,messages:b,onSuccess:function(a){try{la.call(F,a)}catch(ma){F._debug("Exception during handling of messages",ma)}},onFailure:function(a,c,b,d){try{ka.call(F,a,c,b,d)}catch(na){F._debug("Exception during handling of failure",
na)}}},F._debug("Send",c),K.send(c,d))}function r(a){0<R||!0===Z?S.push(a):t(!1,[a],!1)}function u(){var a=S;S=[];0<a.length&&t(!1,a,!1)}function y(){f("connecting");p(function(){if(!h()){var a={channel:"/meta/connect",connectionType:K.getType()};ha||(a.advice={timeout:0});f("connecting");F._debug("Connect sent",a);t(!1,[a],!0,"connect");f("connected")}})}function x(a){a&&(T=F._mixin(!1,{},H.advice,a),F._debug("New advice",T))}function v(a){q();a&&K.abort();V=null;f("disconnected");Q=R=0;0<S.length&&
(ka.call(F,void 0,S,"error","Disconnected"),S=[])}function w(a){V=null;l();h()?(U.reset(),x(H.advice)):x(F._mixin(!1,T,{reconnect:"retry"}));R=0;Z=!0;da=a;a=U.findTransportTypes("1.0",Y,H.url);var c=F._mixin(!1,{},da,{version:"1.0",minimumVersion:"0.9",channel:"/meta/handshake",supportedConnectionTypes:a,advice:{timeout:T.timeout,interval:T.interval}});K=U.negotiateTransport(a,"1.0",Y,H.url);F._debug("Initial transport is",K.getType());f("handshaking");F._debug("Handshake sent",c);t(!1,[c],!1,"handshake")}
function A(){f("handshaking");Z=!0;p(function(){w(da)})}function z(a){n("/meta/handshake",a);n("/meta/unsuccessful",a);h()||"none"===T.reconnect?v(!1):(Q<H.maxBackoff&&(Q+=H.backoffIncrement),A())}function D(a){n("/meta/connect",a);n("/meta/unsuccessful",a);a=h()?"none":T.reconnect;switch(a){case "retry":y();Q<H.maxBackoff&&(Q+=H.backoffIncrement);break;case "handshake":U.reset();Q=0;A();break;case "none":v(!1);break;default:throw"Unrecognized advice action"+a;}}function E(a){v(!0);n("/meta/disconnect",
a);n("/meta/unsuccessful",a)}function B(a){n("/meta/subscribe",a);n("/meta/unsuccessful",a)}function C(a){n("/meta/unsubscribe",a);n("/meta/unsuccessful",a)}function G(c){var b=fa[c.id];a(b)&&(delete fa[c.id],b.call(F,c))}function I(a){G(a);n("/meta/publish",a);n("/meta/unsuccessful",a)}function N(b){for(var d=0;d<P.length&&void 0!==b&&null!==b;++d){var e=P[H.reverseIncomingExtensions?P.length-1-d:d],f=e.extension.incoming;a(f)&&(e=c(e.extension,f,e.name,b,!1),b=void 0===e?b:e)}if(void 0!==b&&null!==
b)switch(x(b.advice),b.channel){case "/meta/handshake":if(b.successful){V=b.clientId;d=U.negotiateTransport(b.supportedConnectionTypes,b.version,Y,H.url);if(null===d)throw"Could not negotiate transport with server; client "+U.findTransportTypes(b.version,Y,H.url)+", server "+b.supportedConnectionTypes;K!==d&&(F._debug("Transport",K,"-\x3e",d),K=d);Z=!1;u();b.reestablish=ia;ia=!0;n("/meta/handshake",b);b=h()?"none":T.reconnect;switch(b){case "retry":Q=0;y();break;case "none":v(!1);break;default:throw"Unrecognized advice action "+
b;}}else z(b);break;case "/meta/connect":if(ha=b.successful)switch(n("/meta/connect",b),b=h()?"none":T.reconnect,b){case "retry":Q=0;y();break;case "none":v(!1);break;default:throw"Unrecognized advice action "+b;}else D(b);break;case "/meta/disconnect":b.successful?(v(!1),n("/meta/disconnect",b)):E(b);break;case "/meta/subscribe":b.successful?n("/meta/subscribe",b):B(b);break;case "/meta/unsubscribe":b.successful?n("/meta/unsubscribe",b):C(b);break;default:void 0===b.successful?void 0!==b.data&&null!==
b.data?n(b.channel,b):F._debug("Unknown message",b):b.successful?(G(b),n("/meta/publish",b)):I(b)}}function L(a){if(a=X[a])for(var c=0;c<a.length;++c)if(a[c])return!0;return!1}function J(c,b){var d={scope:c,method:b};if(a(c))d.scope=void 0,d.method=c;else if(g(b)){if(!c)throw"Invalid scope "+c;d.method=c[b];if(!a(d.method))throw"Invalid callback "+b+" for scope "+c;}else if(!a(b))throw"Invalid callback "+b;return d}function O(a,c,b,d){c=J(c,b);F._debug("Adding listener on",a,"with scope",c.scope,
"and callback",c.method);d={channel:a,scope:c.scope,callback:c.method,listener:d};c=X[a];c||(c=[],c.subscriptionCounter=0,X[a]=c);c.push(d);b=c.subscriptionCounter;c.subscriptionCounter+=1;d.id=b;d.handle=[a,b];F._debug("Added listener",d,"for channel",a,"having id \x3d",b);return d.handle}var F=this,ba=d||"default",Y=!1,U=new k.cometd.TransportRegistry,K,M="disconnected",W=0,V=null,R=0,S=[],Z=!1,X={},Q=0,ca=null,P=[],T={},da,fa={},ia=!1,ha=!1,H={connectTimeout:0,maxConnections:2,backoffIncrement:1E3,
maxBackoff:6E4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1E4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6E4,interval:0,reconnect:"retry"}};this._mixin=function(a,c,b){for(var d=c||{},e=2;e<arguments.length;++e){var f=arguments[e];if(void 0!==f&&null!==f)for(var h in f){var l=f[h],g=d[h];l!==c&&void 0!==l&&(d[h]=a&&"object"===typeof l&&null!==l?l instanceof Array?this._mixin(a,g instanceof Array?g:[],l):this._mixin(a,"object"!==typeof g||g instanceof
Array?{}:g,l):l)}}return d};this._warn=function(){b("warn",arguments)};this._info=function(){"warn"!==H.logLevel&&b("info",arguments)};this._debug=function(){"debug"===H.logLevel&&b("debug",arguments)};this._isCrossDomain=function(a){return a&&a!==window.location.host};this.send=r;this.receive=N;var la=function(a){F._debug("Received",a);for(var c=0;c<a.length;++c)N(a[c])};var ka=function(a,c,b,d){F._debug("handleFailure",a,c,b,d);for(b=0;b<c.length;++b){var e=c[b];switch(e.channel){case "/meta/handshake":z({successful:!1,
failure:!0,channel:"/meta/handshake",request:e,xhr:a,advice:{reconnect:"retry",interval:Q}});break;case "/meta/connect":d=a;ha=!1;D({successful:!1,failure:!0,channel:"/meta/connect",request:e,xhr:d,advice:{reconnect:"retry",interval:Q}});break;case "/meta/disconnect":E({successful:!1,failure:!0,channel:"/meta/disconnect",request:e,xhr:a,advice:{reconnect:"none",interval:0}});break;case "/meta/subscribe":B({successful:!1,failure:!0,channel:"/meta/subscribe",request:e,xhr:a,advice:{reconnect:"none",
interval:0}});break;case "/meta/unsubscribe":C({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:e,xhr:a,advice:{reconnect:"none",interval:0}});break;default:I({successful:!1,failure:!0,channel:e.channel,request:e,xhr:a,advice:{reconnect:"none",interval:0}})}}};this.registerTransport=function(c,b,d){if(d=U.add(c,b,d))this._debug("Registered transport",c),a(b.registered)&&b.registered(c,this);return d};this.getTransportTypes=function(){return U.getTransportTypes()};this.unregisterTransport=
function(c){var b=U.remove(c);null!==b&&(this._debug("Unregistered transport",c),a(b.unregistered)&&b.unregistered());return b};this.unregisterTransports=function(){U.clear()};this.findTransport=function(a){return U.find(a)};this.configure=function(a){F._debug("Configuring cometd object with",a);g(a)&&(a={url:a});a||(a={});H=F._mixin(!1,H,a);if(!H.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var c=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(H.url);
a=c[8];var b=c[9];Y=F._isCrossDomain(c[2]);H.appendMessageTypeToURL&&(void 0!==b&&0<b.length?(F._info("Appending message type to URI "+a+b+" is not supported, disabling 'appendMessageTypeToURL' configuration"),H.appendMessageTypeToURL=!1):(c=a.split("/"),b=c.length-1,a.match(/\/$/)&&--b,0<=c[b].indexOf(".")&&(F._info("Appending message type to URI "+a+" is not supported, disabling 'appendMessageTypeToURL' configuration"),H.appendMessageTypeToURL=!1)))};this.init=function(a,c){this.configure(a);this.handshake(c)};
this.handshake=function(a){f("disconnected");ia=!1;w(a)};this.disconnect=function(a,c){h()||(void 0===c&&"boolean"!==typeof a&&(c=a,a=!1),c=this._mixin(!1,{},c,{channel:"/meta/disconnect"}),f("disconnecting"),t(!0===a,[c],!1,"disconnect"))};this.startBatch=function(){++R};this.endBatch=function(){--R;if(0>R)throw"Calls to startBatch() and endBatch() are not paired";0!==R||h()||Z||u()};this.batch=function(a,c){a=J(a,c);this.startBatch();try{a.method.call(a.scope),this.endBatch()}catch(ja){throw this._debug("Exception during execution of batch",
ja),this.endBatch(),ja;}};this.addListener=function(a,c,b){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(a))throw"Illegal argument type: channel must be a string";return O(a,c,b,!0)};this.removeListener=function(a){if(!k.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;var c=X[a[0]];if(0<c.length){var b=a[1];a:{for(var d=0;d<c.length;){if(c[d].id===b){b=d;break a}d+=1}b=-1}-1!==b&&(c.splice(b,1),F._debug("Removed listener",
a))}};this.clearListeners=function(){X={}};this.subscribe=function(c,b,d,e){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(c))throw"Illegal argument type: channel must be a string";if(h())throw"Illegal state: already disconnected";a(b)&&(e=d,d=b,b=void 0);var f=!L(c),l=O(c,b,d,!1);f&&(f=this._mixin(!1,{},e,{channel:"/meta/subscribe",subscription:c}),r(f));return l};this.unsubscribe=function(a,c){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+
arguments.length;if(h())throw"Illegal state: already disconnected";this.removeListener(a);var b=a[0];L(b)||(b=this._mixin(!1,{},c,{channel:"/meta/unsubscribe",subscription:b}),r(b))};this.clearSubscriptions=function(){l()};this.publish=function(c,b,d,e){if(1>arguments.length)throw"Illegal arguments number: required 1, got "+arguments.length;if(!g(c))throw"Illegal argument type: channel must be a string";if(h())throw"Illegal state: already disconnected";a(b)?(e=b,b=d={}):a(d)&&(e=d,d={});var f=this._mixin(!1,
{},d,{channel:c,data:b,_callback:e});r(f)};this.getStatus=function(){return M};this.isDisconnected=h;this.setBackoffIncrement=function(a){H.backoffIncrement=a};this.getBackoffIncrement=function(){return H.backoffIncrement};this.getBackoffPeriod=function(){return Q};this.setLogLevel=function(a){H.logLevel=a};this.registerExtension=function(c,b){if(2>arguments.length)throw"Illegal arguments number: required 2, got "+arguments.length;if(!g(c))throw"Illegal argument type: extension name must be a string";
for(var d=!1,e=0;e<P.length;++e)if(P[e].name===c){d=!0;break}if(d)return this._info("Could not register extension with name",c,"since another extension with the same name already exists"),!1;P.push({name:c,extension:b});this._debug("Registered extension",c);a(b.registered)&&b.registered(c,this);return!0};this.unregisterExtension=function(c){if(!g(c))throw"Illegal argument type: extension name must be a string";for(var b=!1,d=0;d<P.length;++d){var e=P[d];if(e.name===c){P.splice(d,1);b=!0;this._debug("Unregistered extension",
c);c=e.extension;a(c.unregistered)&&c.unregistered();break}}return b};this.getExtension=function(a){for(var c=0;c<P.length;++c){var b=P[c];if(b.name===a)return b.extension}return null};this.getName=function(){return ba};this.getClientId=function(){return V};this.getURL=function(){return H.url};this.getTransport=function(){return K};this.getConfiguration=function(){return this._mixin(!0,{},H)};this.getAdvice=function(){return this._mixin(!0,{},T)};k.cometd.WebSocket=window.WebSocket;k.cometd.WebSocket||
(k.cometd.WebSocket=window.MozWebSocket)};return k.cometd})},"dojox/cometd/AckExtension":function(){define(["./cometd"],function(k){return k.AckExtension=function(){var d,g=!1,a=-1;this.registered=function(a,l){d=l;d._debug("AckExtension: executing registration callback",void 0)};this.unregistered=function(){d._debug("AckExtension: executing unregistration callback",void 0);d=null};this.incoming=function(b){var l=b.channel;"/meta/handshake"==l?(g=b.ext&&b.ext.ack,d._debug("AckExtension: server supports acks",
g)):g&&"/meta/connect"==l&&b.successful&&(l=b.ext)&&"number"===typeof l.ack&&(a=l.ack,d._debug("AckExtension: server sent ack id",a));return b};this.outgoing=function(b){var l=b.channel;"/meta/handshake"==l?(b.ext||(b.ext={}),b.ext.ack=d&&!1!==d.ackEnabled,a=-1):g&&"/meta/connect"==l&&(b.ext||(b.ext={}),b.ext.ack=a,d._debug("AckExtension: client sending ack id",a));return b}}})},"mw-remote/iframeproxy/IframeProxyClient":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/aspect dojo/dom-construct mw-log/Log ./CheckUrlService".split(" "),
function(k,d,g,a,b,l,f,h){var c=d([],{IFRAME_TIMEOUT:2E4,LATEST_VERSION:"1.6",REMOTE_PROXY:"/remote/proxy/",constructor:function(a){this.iframeId=a||"remoteProducer";this._version=null;this._messageId=0;this._loaded=!1;this._pendingQueue=[];this._transactions={};this._uploadTargetCallbacks={};this._checkUrlTimeout=this._loadTimeoutHandle=this._checkUrl=null;this._errorRate=0},setRemotePageHost:function(a,c,b,d){a=this._combineUriPaths(a||"","/");c=c||"";d=d||"";this.computeToken=b;if(a!==this._host||
c!==this._key||d!==this._proxyUrl)this._errorLoading=this._loaded=!1,this._version=null,this._host=a,this._key=c,this._proxyUrl=d,this._setVersion("use_latest")},_setVersion:function(a){a&&"use_latest"!==a||(a=this.LATEST_VERSION);this._loaded||a===this._version||(this._version=a,a=this._calculateUrls(this._host,this._key,a,this._proxyUrl),this._createIframe(a))},_calculateUrls:function(a,c,b,d){var e=this.REMOTE_PROXY+b+"/iframeProxyRelease.html";b=this.REMOTE_PROXY+b+"/CheckJsFile.js";d&&(e=d);
e=this._combineUriPaths(a,e).split("?")[0];e+=c?"?routingkey\x3d"+c:"";b=this._combineUriPaths(a,b);b=c?b+("?routingkey\x3d"+c):b+("?time\x3d"+(new Date).getTime());return{fastFailUrl:b,iFrameUrl:e}},_createIframe:function(a){var c=a.fastFailUrl,b=this;this._url=a.iFrameUrl;this.remoteIframe&&l.destroy(this.remoteIframe);this.remoteIframe=l.create("iframe",{id:this.iframeId,src:this._url,width:0,height:0,style:"visibility: hidden; display: none;"});document.body.appendChild(this.remoteIframe);this._checkUrl=
null;this._checkUrlTimeout=setTimeout(function(){b._checkUrl=(new h(c)).then(function(){b._checkUrl=null},function(a){b._checkUrl=null;"cancel"!==a.dojoType&&"CancelError"!==a.name&&b._handleLoadTimeoutHitch()})},.15*this.IFRAME_TIMEOUT);this._loadTimeoutHandle=setTimeout(function(){b._handleLoadTimeoutHitch()},this.IFRAME_TIMEOUT);this._messageConnection||(this._messageConnection=k.connect(window,"message",this,this._handleMessage))},_handleLoadTimeoutHitch:function(){this._cleanupFailureChecks();
if(!this._loaded)if("1.0"===this._version)this._handleLoadTimeout();else{var a=(parseFloat(this._version)-.1).toFixed(1).toString();f.info("Unable to load proxy version "+this._version+", trying "+a+".");this._setVersion(a)}},createUploadIframeTarget:function(c,b,d){this._uploadTargetCallbacks[c]=a.hitch(d||this,b);this._postMessage("createUploadIframe;"+c)},cancelUpload:function(a){this._postMessage("cancelUpload;"+a)},getUploadIframeProxyUrlPath:function(){return this.REMOTE_PROXY+this._version+
"/uploadIframeProxy.html"},sendMessage:function(a,c,b){var d=this;this.computeToken&&(b=b||{},b.headers=b.headers||{},b.headers.computeToken=this.computeToken);var e=this._getNewMessageId();c="sendMessage;"+e+";"+c+";"+(b?JSON.stringify(b,null,0):"{}");c+=";"+a;a={deferred:new g(function(){"1.0"===d._version?f.warn("Cancelling is not supported by the 1.0 remote proxy."):d._postMessage("abort;"+e)}),id:e};this._errorLoading?a.deferred.reject("The iFrame did not load properly: "+this._url):(this._transactions[e]=
a,this._postMessage(c));return a.deferred},setLatency:function(a){this._latency=a},setErrorRate:function(a){this._errorRate=a},_postMessage:function(a){this._loaded?this._postMessageNow(a):this._pendingQueue.push(a)},_handleMessage:function(a){if(a.source===this.remoteIframe.contentWindow){var c=a.data.indexOf(";");var b=a.data.substring(0,c);if(!b)throw Error("Client unable to parse message, no action specified: "+a.data);switch(b){case "ready":this._cleanupFailureChecks();this._loaded=!0;this._flushPending();
break;case "sendMessageResponse":this._sendMessageResponse(a,c);break;case "uploadIframeMessage":b=a.data.indexOf(";",c+1);c=a.data.substring(c+1,b);a=a.data.substring(b+1,a.data.length);this._uploadTargetCallbacks[c](a);break;case "websocketOpened":this.onWebsocketOpen();break;case "websocketClosed":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketClose(a);break;case "websocketMsg":a=a.data.substring(c+1,a.data.length);a=JSON.parse(a);this.onWebsocketMsg(a);break;case "websocketError":this.onWebsocketError();
break;default:throw Error("Unknown action: "+b+", data: "+a.data);}}},_sendMessageResponse:function(a,c){var b=a.data.indexOf(";",c+1);var d=a.data.indexOf(";",b+1);c=a.data.substring(c+1,b);b=a.data.substring(b+1,d);var e=a.data.substring(d+1,a.data.length);if(!c||!b)throw Error("Invalid message from remote iframe: "+a.data);d=this._transactions[c];if(!d)throw Error("Unknown transaction id: "+c+", from remote iframe: "+a.data);delete this._transactions[c];if(!d.deferred.isCanceled())if("success"===
b){try{var f=e&&JSON.parse(e)}catch(r){f=e}f=""===f?{}:f;d.deferred.resolve(f)}else this.onError(e),d.deferred.reject(e)},_cleanupFailureChecks:function(){this._checkUrlTimeout&&clearTimeout(this._checkUrlTimeout);this._loadTimeoutHandle&&clearTimeout(this._loadTimeoutHandle);this._checkUrl&&!this._checkUrl.isFulfilled()&&this._checkUrl.cancel("Timeout Occurred or iFrame Was Loaded before CheckUrl",!1);this._checkUrl=this._loadTimeoutHandle=this._checkUrlTimeout=null},_handleLoadTimeout:function(){var a;
if(!this._loaded){var c=this._transactions;this._transactions={};this._pendingQueue=[];for(a in c)c.hasOwnProperty(a)&&c[a].deferred.reject("Timeout while loading the iFrame "+this._url+" at "+new Date);this._errorLoading=!0;this.onError({code:"IframeLoadTimeout",description:"Iframe proxy loading failed due to an HTTP error",message:""})}},_postMessageNow:function(a){function c(){if(0<b._errorRate&&Math.random()<b._errorRate&&0===a.indexOf("sendMessage;")){if(d=a.split(";",2)[1],e=b._transactions[d])delete b._transactions[d],
f.error("Generating simulated error. Request was: ",a),b.onError("403 Forbidden;403"),e.deferred.reject("403 Forbidden;403")}else b.remoteIframe.contentWindow.postMessage(a,b._url)}var b=this,d,e;this._latency?setTimeout(c,this._latency):c()},_flushPending:function(){this._pendingQueue.forEach(this._postMessageNow,this);this._pendingQueue=[]},_getNewMessageId:function(){this._messageId+=1;return this._messageId.toString()},onError:function(){},onWebsocketOpen:function(){},onWebsocketMsg:function(){},
onWebsocketClose:function(){},onWebsocketError:function(){},_combineUriPaths:function(){return Array.prototype.slice.call(arguments).reduce(function(a,c){if(0===a.length)return c;0<c.length&&("/"===c[0]&&a.lastIndexOf("/")===a.length-1?c=c.substring(1):"/"!==c[0]&&a.lastIndexOf("/")!==a.length-1&&(a+="/"));return a+c})}});c.WebSocket=d([],{constructor:function(a){var d=this;this.proxyClient=c.WebSocket.proxyClient;this.proxyClient.computeToken&&0<=a.indexOf("?")&&(a=a+"\x26computeToken\x3d"+this.proxyClient.computeToken);
this.proxyClient._postMessage("connectWebsocket;"+a);b.after(this.proxyClient,"onWebsocketOpen",function(){d.onopen.apply(d,arguments)},!0);b.after(this.proxyClient,"onWebsocketMsg",function(){d.onmessage.apply(d,arguments)},!0);b.after(this.proxyClient,"onWebsocketClose",function(){d.onclose.apply(d,arguments)},!0);b.after(this.proxyClient,"onWebsocketError",function(){d.onerror.apply(d,arguments)},!0)},onopen:function(){},onmessage:function(){},onclose:function(){},onerror:function(){},send:function(a){this.proxyClient._postMessage("websocketSend;"+
a)},close:function(){this.proxyClient._postMessage("closeWebsocket;")}});return c})},"mw-remote/iframeproxy/CheckUrlService":function(){define(["dojo/dom","dojo/on","dojo/request/script","mw-log/Log"],function(k,d,g,a){return function(b){if(!b)throw Error("Expected a valid url in urlToEmptyJsFile");var l={framedoc:null};var f=g.get(b,l,!0);l=k.byId(f.id,l.frameDoc);var h=d(l,"error",function(c){a.info("CheckUrlService detected an error accessing url: "+b);f.handleResponse(null,c);h.remove()});return f.promise}})},
"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(k,d,g,a,b,l,f,h,c,e,m){function n(a,c){a.canDelete&&u._remove(a.id,c.options.frameDoc,!0)}function q(a){z&&z.length&&(b.forEach(z,function(a){u._remove(a.id,a.frameDoc);a.frameDoc=null}),z=[]);return a.options.jsonp?!a.data:!0}function p(a){return!!this.scriptLoaded}function t(a){return(a=a.options.checkString)&&eval("typeof("+
a+') !\x3d\x3d "undefined"')}function r(a,c){if(this.canDelete){var b=this.response.options;z.push({id:this.id,frameDoc:b.ioArgs?b.ioArgs.frameDoc:b.frameDoc});b.ioArgs&&(b.ioArgs.frameDoc=null);b.frameDoc=null}c?this.reject(c):this.resolve(a)}function u(a,c,b){var e=g.parseArgs(a,g.deepCopy({},c));a=e.url;c=e.options;var h=g.deferred(e,n,q,c.jsonp?null:c.checkString?t:p,r);l.mixin(h,{id:y+x++,canDelete:!1});c.jsonp&&((new RegExp("[?\x26]"+c.jsonp+"\x3d")).test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+
c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+y+"_callbacks."+h.id),h.canDelete=!0,A[h.id]=function(a){e.data=a;h.handleResponse(e)});g.notify&&g.notify.emit("send",e,h.promise.cancel);if(!c.canAttach||c.canAttach(h)){var m=u._attach(h.id,a,c.frameDoc);if(!c.jsonp&&!c.checkString)var k=f(m,v,function(a){if("load"===a.type||w.test(m.readyState))k.remove(),h.scriptLoaded=a})}f.once(m,"error",function(a){h.reject(a);u._remove(h.id,c.frameDoc,!0)});d(h);return b?h:h.promise}e.add("script-readystatechange",
function(a,c){return"undefined"!==typeof c.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var y=k.id.replace(/[\/\.\-]/g,"_"),x=0,v=e("script-readystatechange")?"readystatechange":"load",w=/complete|loaded/,A=a.global[y+"_callbacks"]={},z=[];u.get=u;u._attach=function(a,c,b){b=b||m.doc;var d=b.createElement("script");d.type="text/javascript";d.src=c;d.id=a;d.async=!0;d.charset="utf-8";return b.getElementsByTagName("head")[0].appendChild(d)};
u._remove=function(a,b,d){c.destroy(h.byId(a,b));A[a]&&(d?A[a]=function(){delete A[a]}:delete A[a])};u._callbacksProperty=y+"_callbacks";return u})},"mw-messageservice/messageserviceimpl/MessageServiceBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred mw-log/Log ./MessageServiceState".split(" "),function(k,d,g,a,b,l){return k([l],{logSubscriptions:!1,constructor:function(){this.batching=!0;this.typeSerializers=[];this.typeDeserializers={};this.channelSubscriptions=
{}},setDelegate:function(a){this.inherited("setDelegate",arguments);g.after(this._delegate,"onMessage",d.hitch(this,this.handleMessage),!0)},publish:function(a,b){return this.isConnected()||"resubscribing"===this._currentState?(a=this._queuePublish(a,this.serialize(b)),this._deferProcessQueue(),a):this._queuePublish(a,this.serialize(b))},subscribe:function(a,d,c){this.logSubscriptions&&b.info("MessageService subscribe: "+a,d,c);this._addHandler(this.channelSubscriptions,a,d,c);return this.isConnected()||
"resubscribing"===this._currentState?(a=this._queueSubscribe(a,d,c),this._deferProcessQueue(),a):this._queueSubscribe(a,d,c)},unsubscribe:function(d,h,c){this.logSubscriptions&&b.info("MessageService unsubscribe: "+d,h,c);if(this._removeHandler(this.channelSubscriptions,d,h,c))return this.isConnected()||"resubscribing"===this._currentState?(d=this._queueUnsubscribe(d,h,c),this._deferProcessQueue(),d):(new a).resolve();b.error("Not subscribed to channel: "+d+", can't unsubscribe.");return(new a).reject("Not subscribed to channel: "+
d+", can't unsubscribe.")},flush:function(){if(this.isConnected())this._processQueue();else throw Error("Can only manually flush the queue when connected.");},setLatency:function(a){this._delegate&&this._delegate.doSetLatency&&this._delegate.doSetLatency(a)},setErrorRate:function(a){this._delegate&&this._delegate.doSetErrorRate&&this._delegate.doSetErrorRate(a)},_enterDisconnected:function(){this.inherited("_enterDisconnected",arguments);this._queuedOps=[]},_enterConnecting:function(){this.inherited("_enterConnecting",
arguments);Object.keys(this.channelSubscriptions).forEach(function(a){a.subscribed=!1})},_enterConnected:function(){this.inherited("_enterConnected",arguments);this._processQueue()},_enterDisconnecting:function(){this._processQueue();this.inherited("_enterDisconnecting",arguments)},_queuePublish:function(b,d){var c=new a;this._queuedOps.push({type:"publish",channel:b,data:d,deferred:c});return c.promise},_queueSubscribe:function(b,d,c){var e=new a;this._queuedOps.push({type:"subscribe",channel:b,
handler:d,scope:c,deferred:e});return e.promise},_queueUnsubscribe:function(b,d,c){for(var e=new a,f,h=0;h<this._queuedOps.length;h++)if(f=this._queuedOps[h],"subscribe"===f.type&&f.channel===b&&f.handler===d&&f.scope===c)return this._queuedOps.splice(h,1),f.deferred.resolve(),(new a).resolve();this._queuedOps.push({type:"unsubscribe",channel:b,handler:d,scope:c,deferred:e});return e.promise},_processQueue:function(){var a=this._delegate&&this._delegate.delegateConnected();if(this.isConnected()&&
a||"disconnecting"===this._currentState)this._delegate.doStartBatch(),a=this._queuedOps,this._queuedOps=[],a.forEach(function(a){var c;"publish"===a.type?c=this._delegate.doPublish(a.channel,a.data):"subscribe"===a.type?c=this._doSubscribe(a.channel,a.handler,a.scope):"unsubscribe"===a.type&&(c=this._doUnsubscribe(a.channel,a.handler,a.scope));c.then(a.deferred.resolve,a.deferred.reject)},this),this._delegate.doEndBatch()},_deferProcessQueue:function(){if(this.batching&&!this._deferredTimeout){var a=
this;this._deferredTimeout=setTimeout(function(){a._deferredTimeout=!1;a._processQueue()},0)}else this.batching||this._processQueue()},_doSubscribe:function(b){if(this.channelSubscriptions[b].subscribed)return(new a).resolve();var d=this._delegate.doSubscribe(b);this.channelSubscriptions[b].subscribed=!0;return d},_doUnsubscribe:function(b){return this.channelSubscriptions[b]?(new a).resolve():this._delegate.doUnsubscribe(b)},handleMessage:function(a){var b;if(a&&a.channel){a.data&&(a.data=this.deserialize(a.data));
var c=a.channel.split("/");for(b=1;b<=c.length;b+=1)this._callHandlers(this.channelSubscriptions,c.slice(0,b).concat("**").join("/"),a);this._callHandlers(this.channelSubscriptions,c.slice(0,c.length-1).concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,c.concat("*").join("/"),a);this._callHandlers(this.channelSubscriptions,a.channel,a)}},registerMessageHandler:function(a,d,c){b.error("registerMessageHandler is not supported any more.")},deregisterMessageHandler:function(a,d,c){b.error("deregisterMessageHandler is not supported any more.")},
registerTypeSerializer:function(a,b,c){this.typeSerializers.push({typeMatcher:a,type:b,serializer:c})},registerTypeDeserializer:function(a,b){this.typeDeserializers[a]=b},serialize:function(a){return d.isArray(a)?this._serializeArray(a):a instanceof Number||a instanceof Boolean||d.isString(a)?a:this._serializeObject(a)},deserialize:function(a){return d.isArray(a)?this._deserializeArray(a):a instanceof Number||a instanceof Boolean||d.isString(a)?a:this._deserializeObject(a)},_addHandler:function(a,
d,c,e){e=e||this;if("string"===typeof c&&"function"!==typeof e[c])b.warn("Not adding invalid handler: "+c);else{var f=a[d];f||(f=[],a[d]=f);f.push({channel:d,handler:c,scope:e});f.sort(function(a){return a.exclusive?-1:0})}},_removeHandler:function(a,b,c,d){var e=a[b];c=this._getHandlerIndex(e,{handler:c,scope:d||this});0<=c&&e.splice(c,1);e&&0!==e.length||delete a[b];return 0<=c},_callHandlers:function(a,d,c){var e;if(a.hasOwnProperty(d))for(a=a[d],e=0;e<a.length;e+=1)try{"string"===typeof a[e].handler?
a[e].scope[a[e].handler].call(a[e].scope,c):a[e].handler.call(a[e].scope,c)}catch(m){b.error("Error while executing message handler on channel: "+d+", message: "+JSON.stringify(c,null,2)+", error: ",m)}},_getHandlerIndex:function(a,b){if(!a)return-1;var c;for(c=0;c<a.length;c+=1)if(b.handler===a[c].handler&&b.scope===a[c].scope)return c;return-1},_serializeObject:function(a){var b,c;for(c=0;c<this.typeSerializers.length;c+=1){var d=this.typeSerializers[c];if(d.typeMatcher(a))return{__type__:d.type,
__value__:d.serializer.call(this,a)}}if(a instanceof Image)return a;for(b in a)a.hasOwnProperty(b)&&(a[b]=this.serialize(a[b]));return a},_serializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.serialize(a[b]);return a},_deserializeObject:function(a){var d;if(void 0===a||null===a)return null;if(a.hasOwnProperty("__type__")&&a.hasOwnProperty("__value__"))try{return this.typeDeserializers[a.__type__].call(this,a.__value__)}catch(c){b.error("Error while trying to deserialize: ",a,"Error: ",
c)}for(d in a)a.hasOwnProperty(d)&&null!==a[d]&&void 0!==a[d]&&(a[d]=this.deserialize(a[d]));return a},_deserializeArray:function(a){var b,c=a.length;for(b=0;b<c;b+=1)a[b]=this.deserialize(a[b]);return a}})})},"mw-messageservice/messageserviceimpl/MessageServiceState":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/aspect dojo/Deferred dojo/promise/all mw-statemachine/StateMachine mw-log/Log".split(" "),function(k,d,g,a,b,l,f,h){return k([d],{_MAX_RETRIES:30,logStateChanges:!1,
constructor:function(){this._stateOptions={context:this,name:"WraDataService",namespace:"MOTW.wra",defaultSubstate:"disconnected",substates:{disconnected:{transitions:{onEnterState:this._enterDisconnected,start:"connecting"}},connecting:{transitions:{onEnterState:this._enterConnecting,_connectSuccess:"resubscribing",_connectFailure:"reconnecting",stop:"disconnected"}},reconnecting:{transitions:{onEnterState:this._enterReconnecting,_connectSuccess:"resubscribing",_connectFailure:[this._retryFailure,
"retryDelay"],stop:"disconnected"}},retryDelay:{transitions:{"timeout 2":"reconnecting",_reconnect:"reconnecting",stop:"disconnected"}},resubscribing:{transitions:{onEnterState:this._enterResubscribing,_resubscribeSuccess:"connected",_resubscribeFailure:"reconnecting",stop:"disconnecting"}},connected:{transitions:{onEnterState:this._enterConnected,_reconnect:"reconnecting",stop:"disconnecting"}},disconnecting:{transitions:{onEnterState:this._enterDisconnecting,_disconnectSuccess:"disconnected",_disconnectFailure:"disconnected",
"timeout 2":"disconnected"}},fatallyDisconnected:{transitions:{onEnterState:this._enterFatallyDisconnected,stop:"disconnected"}}}}},setDelegate:function(c){if(this._delegate!==c){this._delegate=c;var b=this;a.after(c,"onConnectionError",function(){h.warn("MessageService received connection error, reconnecting");b._reconnect()},!0);this._states=new f(this._stateOptions);a.after(this._states,"onEnterState",g.hitch(this,this._enterState),!0);this._states.start()}},onConnected:function(){this.emit("connected")},
onNewlyConnected:function(){},onDisconnected:function(){this.emit("disconnected")},onReconnected:function(){this.emit("reconnected")},onFatallyDisconnected:function(){this.emit("fatallyDisconnected")},onNotConnected:function(){this.emit("notConnected")},isStarted:function(){return"disconnecting"!==this._currentState&&"disconnected"!==this._currentState},isConnected:function(){return"connected"===this._currentState},isFatallyDisconnected:function(){return"fatallyDisconnected"===this._currentState},
isDisconnected:function(){return"disconnected"===this._currentState},start:function(){},stop:function(){},_enterState:function(a){var c=this._currentState;this._currentState=a;this.logStateChanges&&h.info("MessageService state change: "+c+" -\x3e "+a);if("connected"===c)this.onNotConnected();if("connected"===a&&this._previouslyConnected)this.onReconnected();else if("connected"===a&&!this._previouslyConnected)this.onNewlyConnected()},_enterDisconnected:function(){this._previouslyConnected=!1;this._delegate.cleanup();
this.onDisconnected()},_enterConnecting:function(){this._retryCount=0;this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_enterReconnecting:function(){this._retryCount+=1;h.info("Reconnecting message service. Attempt "+this._retryCount,arguments);this._delegate.cleanup();this._delegate.connect().then(this._connectSuccess,this._connectFailure)},_reconnect:function(){},_connectSuccess:function(){},_connectFailure:function(){},_timeoutAction:function(){this.logStateChanges&&h.info("MessageService timeout:",
arguments)},_retryFailure:function(){if(this._retryCount>=this._MAX_RETRIES){h.error("Message service fatally disconnected.");var a="fatallyDisconnected"}return a},_enterResubscribing:function(){var a,b=[];this._delegate.doStartBatch();for(a in this.channelSubscriptions)if(this.channelSubscriptions.hasOwnProperty(a)){var d=this.channelSubscriptions[a];b.push(this._delegate.doSubscribe(a));d.subscribed=!0}this._delegate.doEndBatch();l(b).then(this._resubscribeSuccess,this._resubscribeFailure)},_resubscribeSuccess:function(){},
_resubscribeFailure:function(){},_enterConnected:function(){this._delegate.delegateConnected()?(this._retryCount=0,this._previouslyConnected&&h.info("Successfully connected."),this._previouslyConnected=!0,this.onConnected()):this._reconnect()},_enterFatallyDisconnected:function(){this.onFatallyDisconnected()},_enterDisconnecting:function(){this._delegate.disconnect().then(this._disconnectSuccess,this._disconnectFailure)},_disconnectSuccess:function(){},_disconnectFailure:function(){}})})},"mw-statemachine/StateMachine":function(){define(["dojo/_base/declare",
"./statemachineimpl/State"],function(k,d){return k([],{constructor:function(g){g.stateMachine=this;this.state=new d(g)},start:function(){this.state.enter()},stop:function(){this.state.exit()},_changeState:function(d,a){this.state.enter(d,a)},onEnterState:function(d){},onExitState:function(d){}})})},"mw-statemachine/statemachineimpl/State":function(){define("dojo/_base/declare dojo/_base/lang mw-log/Log ./EventTrigger ./MessageTrigger ./RemoteTrigger ./TimeoutTrigger ./Transition".split(" "),function(k,
d,g,a,b,l,f,h){var c;return c=k([],{constructor:function(a){this.stateMachine=a.stateMachine||{_changeState:function(){},onEnterState:function(){},onExitState:function(){}};this.namespace=a.namespace||"";this.name=a.name||this.getDefaultName();this.context=a.context||{};this.data=a.data||{};this.composition=a.composition||"XOR";this.defaultSubstate=a.defaultSubstate||"";this.constructSubstates(a.substates);this.constructTriggersAndTransitions(a.transitions);this.active=a.active||!1},getDefaultName:function(){if(0<
this.namespace.length){var a=this.namespace.split(".");a=a.pop()}else g.warn("State: state name is not specified.");return a||""},constructSubstates:function(a){var b={},d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];e.name&&e.name!==d&&g.error("State: error constructing substate: "+d+", the specified names don't match: "+e.name);e.name=d;e.namespace=e.namespace||[this.namespace,this.name].join(".");e.stateMachine=e.stateMachine||this.stateMachine;e.context=e.context||this.context;b[e.name]=new c(e)}this.substates=
b},constructTriggersAndTransitions:function(a){var c,b={},d=[],e;for(c in a)a.hasOwnProperty(c)&&((e=this.constructTrigger(c))&&d.push(e),b[c]=this.constructTransition(c,a[c]));this.transitions=b;this.triggers=d},constructTrigger:function(c){var e,h;var g=c.split(" ");if(2===g.length)"subscribe"===g[0]?h=b:"response"===g[0]||"fault"===g[0]?h=l:"timeout"===g[0]&&(h=f);else if("onEnterState"!==c||"onExitState"!==c)h=a;h&&(e=new h({name:c,context:this.context,triggerHandler:d.hitch(this,this.handleTrigger)}));
return e},constructTransition:function(a,c){if(d.isFunction(c)||d.isString(c)||d.isArray(c))"onEnterState"===a||"onExitState"===a?(a=c,c={},c.action=a,c.target=""):(a=c,c={},c.target=a);c.state=this;return new h(c)},enter:function(a,c){this.active||(this.active=!0,this.enableTriggers(),this.stateMachine.onEnterState(this.name),this.handleTrigger.apply(this,["onEnterState"].concat(c)));a?this.changeSubstates(a,c):this.changeToDefaultSubstate(c)},exit:function(){var a=this.activeSubstates();this.active=
!1;this.disableTriggers();a.forEach(function(a){a.exit()});this.handleTrigger("onExitState");this.stateMachine.onExitState(this.name)},enableTriggers:function(){this.triggers.forEach(function(a){a.enable()})},disableTriggers:function(){this.triggers.forEach(function(a){a.disable()})},handleTrigger:function(a){var c;if(this.transitions[a]){var b=Array.prototype.slice.call(arguments,1,arguments.length);if(c=this.transitions[a].handleTrigger(a,b))d.isString(c)||(b=c.args,c=c.target),this.stateMachine._changeState(c,
b)}},changeSubstates:function(a,c){var b=this.activeSubstates();this.substates[a]&&(0<=b.length&&b[0].name!==a&&b.forEach(function(a){a.exit()}),this.substates[a].enter(void 0,c))},changeToDefaultSubstate:function(a){0===this.activeSubstates().length&&this.substates[this.defaultSubstate]&&this.substates[this.defaultSubstate].enter(void 0,a)},activeSubstates:function(){var a=[],c;for(c in this.substates)this.substates.hasOwnProperty(c)&&this.substates[c].active&&a.push(this.substates[c]);return a}})})},
"mw-statemachine/statemachineimpl/EventTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","mw-log/Log","./Trigger"],function(k,d,g,a,b){return k(b,{constructor:function(){this.connection={}},enable:function(){d.isFunction(this.context[this.name])&&(this.cachedFunction=this.context[this.name]);this.connection=g.after(this.context,this.name,d.hitch(null,this.triggerHandler,this.name),!0)},disable:function(){this.connection.remove();this.cachedFunction&&(this.context[this.name]=
this.cachedFunction)}})})},"mw-statemachine/statemachineimpl/Trigger":function(){define(["dojo/_base/declare"],function(k){return k([],{constructor:function(d){this.name="";this.context={};this.triggerHandler=d.triggerHandler||function(){};k.safeMixin(this,d)},enable:function(){},disable:function(){}})})},"mw-statemachine/statemachineimpl/MessageTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","mw-log/Log","./Trigger"],function(k,d,g,a,b){return k(b,{constructor:function(){var b=
this.name.split(" ");(2>b.length||"subscribe"!==b[0])&&a.error("Invalid trigger name for a MessageTrigger. Could not parse out the message name.");this.messageId=b[1]||"";this.subscrition={}},enable:function(){this.subscription=g.subscribe(this.messageId,d.hitch(null,this.triggerHandler,this.name))},disable:function(){this.subscription.remove()}})})},"mw-statemachine/statemachineimpl/RemoteTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/Remote","./Trigger"],
function(k,d,g,a,b){return k(b,{constructor:function(){var b=this.name.split(" ");(2>b.length||"response"!==b[0]&&"fault"!==b[0])&&g.error("Invalid trigger name for a RemoteTrigger. Could not parse out the type of handler.");a.registerResponseHandler&&a.registerFaultHandler||g.error("The remote package is not available, this type of trigger will not work.");this.messageId=b[1]||"";this.handlerType=b[0]},enable:function(){"response"===this.handlerType?a.registerResponseHandler(this.messageId,d.hitch(null,
this.triggerHandler,this.name)):a.registerFaultHandler(this.messageId,d.hitch(null,this.triggerHandler,this.name))},disable:function(){"response"===this.handlerType?a.deregisterResponseHandler(this.messageId):a.deregisterFaultHandler(this.messageId)}})})},"mw-remote/Remote":function(){define("dojo/_base/lang dojo/aspect ./iframeproxy/IframeProxyClient ./impl/FaultManager ./impl/RequestManager ./impl/ResponseManager ./impl/Transaction ./impl/AutoDetectedTransaction ./RemoteEndPointsManager ./utils/SendMessageUtil ./UploadToWorker mw-log/Log ./serviceRegistryLookup!".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q){var p={reset:function(){var t=[],r=new a,u=new l({faultManager:r}),y=new b({responseManager:u});p.faultManager=r;p.responseManager=u;p.requestManager=y;p._serviceRegistryLookup=q;p._uploadIframeProxyUrlParameters=["?computeToken\x3d","","\x26routingkey\x3d",""];var x=p.proxyClient=new g;p.createUploadIframeTarget=k.hitch(x,x.createUploadIframeTarget);p.cancelUpload=k.hitch(x,x.cancelUpload);c.setIframeProxyClientForEndPoint(c.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,
x);c.setIframeProxyClientForEndPoint(c.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,x);f.construct=function(a){a=a||{};c.getRoutingHost(c.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT)||p.setEndpoint();a.allowedMessages=t;a.sendMessage=p.sendMessage;a.computeSessionId=p.getComputeSessionId;return new h(a)};p.registerEndpointLevelFaultHandler=k.hitch(r,r.registerEndpointLevelFaultHandler);p.sendMessage=k.hitch(y,y.sendMessage);p.sendPayload=e.sendPayload;p.registerDefaultMessageFactory=k.hitch(y,
y.registerDefaultMessageFactory);p.deregisterDefaultMessageFactory=k.hitch(y,y.deregisterDefaultMessageFactory);p.registerResponseHandler=k.hitch(u,u.registerResponseHandler);p.deregisterResponseHandler=k.hitch(u,u.deregisterResponseHandler);p.registerFaultHandler=k.hitch(r,r.registerFaultHandler);p.deregisterFaultHandler=k.hitch(r,r.deregisterFaultHandler);p.registerTopLevelFaultHandler=k.hitch(r,r.registerTopLevelFaultHandler);p.deregisterTopLevelFaultHandler=k.hitch(r,r.deregisterTopLevelFaultHandler);
p.setServiceEndPoint=function(a,b,d){c.setRoutingHostAndRoutingKey(a,b,d)};p.setDirectXhrCommunicationState=function(a){c._setDirectXhrCommunicationState(a)};p.setServicePathSuffixForEndPoint=function(a,b){c.setPathSuffixForEndPoint(a,b)};p.ignoreTopLevelFault=p.registerTopLevelFaultHandler;p.setComputeToken=function(a){p._uploadIframeProxyUrlParameters[1]=a.computeSessionId;y.computeToken=a};p.setWorkerEndpoint=function(a,b){p._uploadIframeProxyUrlParameters[3]=b;c.setRoutingHostAndRoutingKey(c.getEndPointNames().WORKER_ENDPOINT,
a,b)};p.setEndpoint=function(a){a||(a=p._serviceRegistryLookup.getServiceRegistryEndpoint("primary"),a||(n.info("ServiceRegistryLookup is empty, falling back to localhost"),a="/"));if(!a||"/"===a)if(a=(document.getElementsByTagName("base")[0]||{}).href,void 0!==a){var b=document.createElement("a");b.display="none";b.href=a;a=b.protocol+"//"+b.hostname+(b.port?":"+b.port:"")+"/"}else a=window.location.protocol+"//"+window.location.host+"/";c.setRoutingHostAndRoutingKey(c.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT,
a);c.setRoutingHostAndRoutingKey(c.getEndPointNames().ROUTER_LEAF_INSECURE_ENDPOINT,a);x.setRemotePageHost(a)};p.setAllowedMessages=function(a){t=a};p.allowAllMessages=function(){t=[]};p.getEndPoint=function(){return c.getRoutingHost(c.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT)};p.getUploadIframeProxyUrl=function(){var a=p.getWorkerRoutingHost();"/"===a.slice(-1)&&(a=a.slice(0,-1));return a+x.getUploadIframeProxyUrlPath()+p._uploadIframeProxyUrlParameters.join("")};p.getComputeSessionId=function(){return y.computeToken?
y.computeToken.computeSessionId:null};p.getWorkerRoutingHost=function(){var a=c.getRoutingHost(c.getEndPointNames().WORKER_ENDPOINT);if(a)return a;a=(document.getElementsByTagName("base")[0]||{}).href;if(void 0!==a){var b=document.createElement("a");b.display="none";b.href=a;return b.protocol+"//"+b.hostname+(b.port?":"+b.port:"")+"/"}return window.location.protocol+"//"+window.location.host+"/"};p.getWorkerRoutingKey=function(){return c.getRoutingKey(c.getEndPointNames().WORKER_ENDPOINT)};p.upload=
function(a,c){return(new m).upload(a,c,{endpoint:p.getWorkerRoutingHost(),uploadIframeProxyUrl:p.getUploadIframeProxyUrl()})};p.getServiceRegistryEndpoint=function(a){return p._serviceRegistryLookup.getServiceRegistryEndpoint(a)};p.enableServerOnWorkerAsync=function(){c.enableEndPoint(c.getEndPointNames().WORKER_ASYNC_ENDPOINT)};p.disableServerOnWorkerAsync=function(){c.disableEndPoint(c.getEndPointNames().WORKER_ASYNC_ENDPOINT)};p.isServerOnWorkerAsyncEnabled=function(){return c.isEndPointEnabled(c.getEndPointNames().WORKER_ASYNC_ENDPOINT)};
p.enableServerOnWorker=function(){c.enableEndPoint(c.getEndPointNames().WORKER_ENDPOINT)};p.disableServerOnWorker=function(){c.disableEndPoint(c.getEndPointNames().WORKER_ENDPOINT)};p.isWorkerEndpointEnabled=function(){return c.isEndPointEnabled(c.getEndPointNames().WORKER_ENDPOINT)};p.setWorkerOnlyMessageTypes=function(a){c.setMessageTypesToEndPoint(c.getEndPointNames().WORKER_ENDPOINT,a)};d.after(x,"onError",function(a){a&&r.handleNonTransactionFault(a)},!0);p.createNewEndPoint=function(a,b,d,e,
f){this.getEndPointByName(a)||c.setUpNewEndPoint(a,b,d,e,f)};p.getUrlForEndPoint=function(a){return c.getRemoteUrlForEndPoint(a)};p.getEndPointByName=function(a){return c.getEndPointNames()[a]};p.getEndPointAllowsDirectXhr=function(a){return c.getEndPointAllowsDirectXhr(a)}}};p.reset();return p})},"mw-remote/impl/FaultManager":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(k,d,g){return d([],{constructor:function(a){a=a||{};this.faultHandlers=a.faultHandlers||
{};this.topLevelHandlers=a.topLevelHandlers||[];this.endPointLevelHandlers=a.endPointLevelHandlers||{}},registerFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));this.faultHandlers[a]=b},deregisterFaultHandler:function(a){delete this.faultHandlers[a]},registerTopLevelFaultHandler:function(a,b,d){d&&(b=g.hitch(d,b));if(g.isString(a)){if("*"===a)return a={matcher:a,handler:b},this.defaultTopLevelHandler=b,a;a=this._constructMatcherFromQuery(a)}a={matcher:a,handler:b};this.topLevelHandlers.push(a);return a},
registerEndpointLevelFaultHandler:function(a,b,d,f){f&&(d=g.hitch(f,d));g.isString(b)&&(b=this._constructMatcherFromQuery(b));b={matcher:b,handler:d};this.endPointLevelHandlers[a]||(this.endPointLevelHandlers[a]=[]);this.endPointLevelHandlers[a].push(b);return b},deregisterTopLevelFaultHandler:function(a){var b=this.topLevelHandlers.indexOf(a);-1<b?this.topLevelHandlers.splice(b,1):"*"===a.matcher&&delete this.defaultTopLevelHandler},_constructMatcherFromQuery:function(a){var b=[];a.split("||").forEach(function(a){a=
g.trim(a);a=a.replace(/([.])/g,"\\$1");a=a.replace(/\*/g,".*");b.push(new RegExp("^"+a+"$"))});return function(a){return k.some(b,function(b){return b.test(a.faultCode||a.code||"")})}},handleFault:function(a){var b,d=function(b,c){if(c=a.getMessageClassifier(c))if(b=[b,c].join(":"),this.faultHandlers[b])this.faultHandlers[b](a.fault,a.context)};for(b in a.requestMessages)if(a.requestMessages.hasOwnProperty(b)){if(this.faultHandlers[b])this.faultHandlers[b](a.fault,a.context);var f=a.requestMessages[b];
Array.isArray(f)&&f.forEach(g.hitch(this,d,b))}if(this.faultHandlers["*"])this.faultHandlers["*"](a.fault,a.context);this.endPointLevelHandlers[a.endPointName]?this._handleEndpointLevelFault(a):this._handleTopLevelFault(a)},_handleEndpointLevelFault:function(a){var b=!1,d=k.filter(this.endPointLevelHandlers[a.endPointName],function(b){return b.matcher.call(this,a.fault,a.context)},this);0<d.length&&d[0].handler&&(b=!0,d[0].handler.call(this,a.fault,a.context,a));return b},_handleTopLevelFault:function(a){var b=
k.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a.fault,a.context)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a.fault,a.context,a)},handleNonTransactionFault:function(a){var b=k.filter(this.topLevelHandlers,function(b){return b.matcher.call(this,a)},this);(b=0<b.length?b[0].handler:this.defaultTopLevelHandler)&&b.call(this,a)}})})},"mw-remote/impl/RequestManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang mw-remote/RemoteEndPointsManager mw-remote/defaultMessageMapping ./Transaction".split(" "),
function(k,d,g,a,b,l,f){return d([],{defaultMapping:l,constructor:function(a){a=a||{};this.defaultFactories=a.defaultFactories||{};this.mockHandlers=a.mockHandlers||{};this.mapping=a.mapping||this.defaultMapping;this.responseManager=a.responseManager},registerDefaultMessageFactory:function(b,c,d){d&&(c=a.hitch(d,c));this.defaultFactories[b]=c},deregisterDefaultMessageFactory:function(a){delete this.defaultFactories[a]},registerMockResponseGenerator:function(b,c,d){var e=this;c=a.hitch(d||this,c);
this.mockHandlers[b]=function(a,b){var d=f.construct(b);a=c(a,d);a||(a=new g,a.callback());a.addCallback(function(){e.responseManager._processResult(d)})}},deregisterMockResponseGenerator:function(a){delete this.mockHandlers[a]},sendMessage:function(a,c,b){var d={},e={};c=c||{};this._createAndFillTransactions(a,c,b,d,e);a=Object.keys(d);for(c=0;c<a.length;c+=1)b=a[c],this._callMocks(e[b]),d[b].send(),this.responseManager.handleTransaction(d[b])},_getTransaction:function(a,c){return f.construct({context:c,
computeToken:this.computeToken,endPointName:a})},_getMockTransaction:function(a,c,b){return f.construct({context:c,computeToken:this.computeToken,endPointName:a,uuid:b})},_createAndFillTransactions:function(a,c,d,f,l){var e,h=function(a){var d=b.getEndPointForMessageType(a);var e=f[d];var h=l[d];e||(e=this._getTransaction(d,c),h=this._getMockTransaction(d,c,e.uuid),f[d]=e,l[d]=h);if(this.defaultFactories[a]&&(d=this.defaultFactories[a](e.context))){var g=a.split(":");var m=g[0];g=g.slice(1,g.length).join(":");
this.mockHandlers[a]||e.addRequestMessage(m,d,g);h.addRequestMessage(m,d,g)}};for(e in a)if(a.hasOwnProperty(e)){var g=b.getEndPointForMessageType(e);var m=l[g];var k=f[g];f[g]||(k=this._getTransaction(g,c),m=this._getMockTransaction(g,c,k.uuid),f[g]=k,l[g]=m);g=[e,d].join(":");this.mockHandlers[e]||this.mockHandlers[g]||k.addRequestMessage(e,a[e],d);m.addRequestMessage(e,a[e],d);this.mapping[g]?this.mapping[g].forEach(h,this):this.mapping[e]&&this.mapping[e].forEach(h,this)}},_callMocks:function(b){var c,
d=b.context;delete b.context;var f=function(a,c){var b=h.getMessageClassifier(c);if(b&&(a=[a,b].join(":"),this.mockHandlers[a]))this.mockHandlers[a]([c],h)};for(c in b.requestMessages)if(b.requestMessages.hasOwnProperty(c)){var h=a.mixin({},b);h.context=d;if(this.mockHandlers.hasOwnProperty(c))this.mockHandlers[c](h.requestMessages[c],h);Array.isArray(h.requestMessages[c])?h.requestMessages[c].forEach(a.hitch(this,f,c)):f(c,h.requestMessages[c])}if(this.mockHandlers["*"])this.mockHandlers["*"](c,
h.requestMessages[c],h)}})})},"mw-remote/RemoteEndPointsManager":function(){define(["./EndPointsManager"],function(k){var d=null;null===d&&(d=new k);return d})},"mw-remote/EndPointsManager":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/_base/lang","./iframeproxy/IframeProxyClient"],function(k,d,g,a,b){return k([],{constructor:function(){this.DirectXhrConstants={ENABLED:"ENABLED",DISABLED:"DISABLED",UNRESOLVED:"UNRESOLVED"};this._setDirectXhrCommunicationState(!1);
this._directXhrChecks={};this._initializeEndPointsCollection()},_initializeEndPointsCollection:function(){this.endPointsCollection={ROUTER_LEAF_INSECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json",messages:"RouterLogin CreateAccount CurrentUser Login UpdateAccount ServiceRegistry ClientType AuthorizationDetails AcquireMatlab".split(" "),iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0,directXhr:this.DirectXhrConstants.UNRESOLVED},
ROUTER_LEAF_SECURE_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteProducer",acceptsMessageContainerMessages:!0,directXhr:this.DirectXhrConstants.UNRESOLVED},WORKER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!1,iframeProxyUrl:"",pathSuffix:"messageservice/json/secure",messages:[],iframeProxyName:"remoteWorkerProducer",acceptsMessageContainerMessages:!0,directXhr:this.DirectXhrConstants.UNRESOLVED},
WORKER_ASYNC_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"messageservice/async",messages:[],iframeProxyName:"remoteWorkerAsyncProducer",acceptsMessageContainerMessages:!0,directXhr:this.DirectXhrConstants.UNRESOLVED},USAGE_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"udc/service/v1/events",messages:["UsageDataEventCollection"],iframeProxyName:"remoteUDCProducer",acceptsMessageContainerMessages:!1,
directXhr:this.DirectXhrConstants.UNRESOLVED},HELP_DATA_ROUTER_ENDPOINT:{routingHost:"",routingKey:"",iframeProxy:null,enabled:!0,iframeProxyUrl:"",pathSuffix:"",messages:["HelpDataEventCollection"],iframeProxyName:"doc_center",acceptsMessageContainerMessages:!1,directXhr:this.DirectXhrConstants.UNRESOLVED}}},_setDirectXhrCommunicationState:function(a){this._useDirectXhrForCommunication=a},reset:function(){this._initializeEndPointsCollection();this._directXhrChecks={}},setUpNewEndPoint:function(a,
b,d,c,e){this.endPointsCollection[a]={routingHost:"",routingKey:"",pathSuffix:d,enabled:b,messages:[],iframeProxy:null,iframeProxyName:c,acceptsMessageContainerMessages:e,directXhr:this.DirectXhrConstants.UNRESOLVED}},getPathSuffixForEndPoint:function(a){return this.endPointsCollection[a].pathSuffix},setPathSuffixForEndPoint:function(a,b){this.endPointsCollection[a].pathSuffix=b},getEndPointNames:function(){var a={},b;for(b in this.endPointsCollection)this.endPointsCollection.hasOwnProperty(b)&&(a[b]=
b);return a},setRoutingHostAndRoutingKey:function(b,d,h){d&&d.lastIndexOf("/")!==d.length-1&&(d+="/");this.endPointsCollection[b].routingHost=d;h&&(this.endPointsCollection[b].routingKey=h);this._checkIfEndpointAllowsDirectXhr(b,!0).then(a.hitch(this,this._processEndPointAllowsXhrResponse,b,d))},_processEndPointAllowsXhrResponse:function(a,b,d){this._setEndpointAllowsDirectXhr(d);d.status!==this.DirectXhrConstants.ENABLED&&b&&this._setIframeRoutingHostAndRoutingkey(a)},_setEndpointAllowsDirectXhr:function(a){this.endPointsCollection[a.endPointName]&&
a.status in this.DirectXhrConstants&&(this.endPointsCollection[a.endPointName].directXhr=a.status)},_setIframeRoutingHostAndRoutingkey:function(a){var b=this.getIframeProxyClientForEndPoint(a);b&&b.setRemotePageHost(this.endPointsCollection[a].routingHost,this.endPointsCollection[a].routingKey,null,this.endPointsCollection[a].iframeProxyUrl)},getEndPointAllowsDirectXhr:function(a){return this._checkIfEndpointAllowsDirectXhr(a,!1)},_checkIfEndpointAllowsDirectXhr:function(a,b){if(this._directXhrChecks[a]&&
!b)return this._directXhrChecks[a];var d=new g;this._directXhrChecks[a]=d;b=this.getDirectXhrAllowed(a);var c=this.DirectXhrConstants,e={endPointName:a,status:c.UNRESOLVED};if("function"===typeof URL)try{var f=new URL(this.getRoutingHost(a))}catch(q){return e.status=c.DISABLED,d.resolve(e),d.promise}else f=document.createElement("a"),f.href=this.getRoutingHost(a);if(this._useDirectXhrForCommunication)if(f.origin===window.location.origin)e.status=c.ENABLED,d.resolve(e);else if(b===c.UNRESOLVED){var l=
new XMLHttpRequest;a=this.getRemoteUrlForEndPoint(a);l.open("OPTIONS",a);l.send();l.onload=function(){e.status=200===l.status?c.ENABLED:c.DISABLED;d.resolve(e)};l.onerror=function(){e.status=c.DISABLED;d.resolve(e)}}else e.status=b,d.resolve(e);else e.status=c.DISABLED,d.resolve(e);return d.promise},getRoutingHost:function(a){return this.endPointsCollection[a].routingHost},getRoutingKey:function(a){return this.endPointsCollection[a].routingKey},getMessageTypesMappedToEndPoint:function(a){return this.endPointsCollection[a].messages},
isEndPointEnabled:function(a){return this.endPointsCollection[a].enabled},setMessageTypesToEndPoint:function(a,b){this.endPointsCollection[a].messages=b},enableEndPoint:function(a){this.endPointsCollection[a].enabled=!0},getDirectXhrAllowed:function(a){return this.endPointsCollection[a].directXhr},disableEndPoint:function(a){this.endPointsCollection[a].enabled=!1},getEndPointForMessageType:function(a){var b=null,h;for(h in this.endPointsCollection)if(this.endPointsCollection.hasOwnProperty(h)&&(b=
-1<d.lastIndexOf(this.endPointsCollection[h].messages,a)?h:b))if(this.isEndPointEnabled(b))break;else b=null;return b||this.getEndPointNames().ROUTER_LEAF_SECURE_ENDPOINT},getRemoteUrlForEndPoint:function(a){var b=this.endPointsCollection[a].routingHost+this.endPointsCollection[a].pathSuffix;this.endPointsCollection[a].routingKey&&(b=b+"?routingkey\x3d"+this.endPointsCollection[a].routingKey);return b},setIframeProxyClientForEndPoint:function(a,b){this.endPointsCollection[a].iframeProxy=b},getIframeProxyClientForEndPoint:function(a){var d=
this.endPointsCollection[a].iframeProxy;d||(d=new b(this.endPointsCollection[a].iframeProxyName),this.endPointsCollection[a].iframeProxy=d);return d},isEndpointMessageContainerBased:function(a){return a&&this.endPointsCollection[a]?this.endPointsCollection[a].acceptsMessageContainerMessages:!0},addMessagesTypesToEndPoint:function(a,b){this.endPointsCollection[a]&&-1===this.endPointsCollection[a].messages.indexOf(b)&&this.endPointsCollection[a].messages.push(b)},removeMessageTypesFromEndPoint:function(a,
b){this.endPointsCollection[a]&&(b=this.endPointsCollection[a].messages.indexOf(b),-1<b&&this.endPointsCollection[a].messages.splice(b,1))}})})},"mw-remote/defaultMessageMapping":function(){define([],function(){return{Eval:["CurrentFolder","ListFolder"],"Eval:Ping":[],"Eval:RunFile":["UpdateFile","CurrentFolder","ListFolder"],"Eval:MlsPublishPre":["UpdateFile"],"FEval:liveEvalInstrumentCode":[],Interrupt:[],"FEval:GetFigures":["CurrentFolder","ListFolder"],"FEval:CloseFigure":["FEval:GetFigures"],
"FEval:SelectFigure":["FEval:GetFigures"],"FEval:ResetAxes":["FEval:GetFigures"],"FEval:ResizeFigure":["FEval:GetFigures"],"FEval:AxesInteraction2D":["FEval:GetFigures"],"FEval:AxesInteraction3D":["FEval:GetFigures"],CurrentUser:["ServiceRegistry"],RouterLogin:["ServiceRegistry"],CurrentFolder:["ListFolder"],MoveFile:["CurrentFolder"],Variable:[],CloseFile:["SaveSession"],UpdateFile:["SaveSession"],SaveSession:["UpdateFile"],SaveSessionState:["UpdateFile"],Logout:["CloseFile"],UpdateShare:["ListFolder"],
AcquireMatlab:["ServiceRegistry"]}})},"mw-remote/impl/Transaction":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","mw-remote/RemoteEndPointsManager","mw-utils/Utils"],function(k,d,g,a,b){return k([],{constructor:function(a){a=a||{};this.requestMessages=a.requestMessages||{};this.responseMessages=a.responseMessages||{};this.context=a.context;this.computeToken=a.computeToken;this.uuidClassifierMap=a.uuidClassifierMap||{};this.endPointName=a.endPointName||null;this.allowedMessages=
a.allowedMessages||[];this.ignoreMessageTypes=a.ignoreMessageTypes||[];this.sendMessage=a.sendMessage},addRequestMessage:function(b,d,h){if(d){var c=a.isEndpointMessageContainerBased(this.endPointName);this.requestMessages[b]||(this.requestMessages[b]=[]);g.isArray(d)?d.forEach(function(a){this.addRequestMessage(b,a,h)},this):c?(d.uuid=d.uuid||this._generateUuid(),h&&(this.uuidClassifierMap[d.uuid]=h),this.requestMessages[b].push(d)):this.requestMessages[b]=d;this.requestMessages=this._filterMessages(this.requestMessages)}},
_filterMessages:function(a){var b={};this.getRequestMessageTypes().forEach(function(d){if(0===this.allowedMessages.length||0<=this.allowedMessages.indexOf(d))b[d]=a[d]},this);return b},getResponseMessageTypes:function(){var a,b=[];for(a in this.responseMessages)this.responseMessages.hasOwnProperty(a)&&b.push(a);return b},getRequestMessageTypes:function(){var a,b=[];for(a in this.requestMessages)this.requestMessages.hasOwnProperty(a)&&b.push(a);return b},getMessageClassifier:function(a){return a&&
a.uuid&&this.uuidClassifierMap.hasOwnProperty(a.uuid)?this.uuidClassifierMap[a.uuid]:""},send:function(){this._removeEmptyMessages();this._isEmpty(this.requestMessages)?(this.deferred=new d,this.deferred.callback()):(this.startTime=(new Date).getTime(),this.deferred=this._doSend(this._getRequest(this.requestMessages)),this.deferred.addCallback(this,this._processResponse),this.deferred.addErrback(this,this._processFault))},addIgnoreMessageType:function(a,b){if(-1<this.getRequestMessageTypes().indexOf(a))if(b)for(var d in this.uuidClassifierMap)this.uuidClassifierMap.hasOwnProperty(d)&&
b&&this.uuidClassifierMap[d]===b&&this.ignoreMessageTypes.push(a+":"+b);else this.ignoreMessageTypes.push(a)},_removeEmptyMessages:function(){if(!this._isEmpty(this.requestMessages))for(var a in this.requestMessages)this.requestMessages.hasOwnProperty(a)&&g.isArray(this.requestMessages[a])&&0===b.getArrayLength(this.requestMessages[a])&&delete this.requestMessages[a]},_isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},_generateUuid:function(){return b.generateUuid()}})})},
"mw-remote/impl/ResponseManager":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","mw-remote/RemoteEndPointsManager"],function(k,d,g,a){return k([],{constructor:function(a){a=a||{};this.responseHandlers=a.responseHandlers||{};this.faultManager=a.faultManager;this.transactions=a.transactions||[]},registerResponseHandler:function(a,g,f){f&&(g=d.hitch(f,g));this.responseHandlers[a]=g},deregisterResponseHandler:function(a){delete this.responseHandlers[a]},handleTransaction:function(a){this.transactions.push(a);
a.deferred.addCallback(d.hitch(this,this._processAll,a));a.deferred.addCallback(d.hitch(this,this._processResult,a));a.deferred.addErrback(d.hitch(this,this._processAll,a));a.deferred.addErrback(d.hitch(this,this._processFault,a))},_processAll:function(a){a=this.transactions.indexOf(a);0<=a&&this.transactions.splice(a,1)},_processResult:function(a){a.getResponseMessageTypes().forEach(function(b){var d=a.responseMessages[b],h=[];try{if(Array.isArray(d)){d.forEach(function(c){var d=a.getMessageClassifier(c);
if(d){var f=[b,d].join(":");var g=this,l=!1;a.getRequestMessageTypes().forEach(function(b){b=a.requestMessages[b];Array.isArray(b)?b.forEach(function(b){g.responseHandlers[f]&&b.uuid===c.uuid&&(g.responseHandlers[f]([c],a.context),l=!0)}):g.responseHandlers[f]&&b.uuid===c.uuid&&(g.responseHandlers[f]([c],a.context),l=!0)});l||h.push(c)}else h.push(c)},this);if(0<h.length&&this.responseHandlers[b])this.responseHandlers[b](h,a.context);if(this.responseHandlers["*"])this.responseHandlers["*"](b,a.responseMessages[b],
a.context)}}catch(c){g.error("Remote: Fault occurred while processing response.\nMessage: "+c.message+"\nType: "+b+"\nResponse: "+JSON.stringify(d,null,2))}},this);this._processUdcResponses(a);a.fault&&this.faultManager.handleFault(a)},_processUdcResponses:function(b){if(!a.isEndpointMessageContainerBased(b.endPointName)){var d=Object.keys(b.requestMessages)[0];if(this.responseHandlers[d])this.responseHandlers[d](b.responseMessages)}},_processFault:function(a){this.faultManager.handleFault(a)}})})},
"mw-remote/impl/AutoDetectedTransaction":function(){define(["dojo/_base/declare","mw-remote/impl/JsonTransaction","mw-remote/utils/SendMessageUtil"],function(k,d,g){return k([d],{_doSend:function(a){return g.sendPayload(a,this.endPointName)}})})},"mw-remote/impl/JsonTransaction":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","mw-remote/RemoteEndPointsManager","./Transaction"],function(k,d,g,a,b){return k(b,{constructor:function(a){a=a||{};this.uuid=a.uuid||this._generateUuid()},
_getRequest:function(b){var d=null;a.isEndpointMessageContainerBased(this.endPointName)?(d={uuid:this.uuid,messages:b},this.computeToken&&(d.computeToken=this.computeToken)):Object.keys(b).forEach(function(a){d=b[a]});this._sanitizeForJson(d);return JSON.stringify(d,null,0)},_sanitizeForJson:function(a){var b;if(g.isArray(a))a.forEach(this._sanitizeForJson,this);else if(g.isObject(a))for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:(g.isObject(a[b])||g.isArray(a[b]))&&this._sanitizeForJson(a[b]))},
_doSend:function(a){return d.post({url:this._getEndpoint(),contentType:"application/json",handleAs:"json",postData:a})},_processResponse:function(a){this.stopTime=(new Date).getTime();a?(a.fault&&(this.fault=a.fault),this.responseMessages=a.messages?a.messages:a):this.fault={faultCode:"Connection.Fault",message:"Unable to communicate with server, no response."}},_processFault:function(a){this.stopTime=(new Date).getTime();this.fault={faultCode:"Connection.Fault",message:a}}})})},"mw-remote/utils/SendMessageUtil":function(){define(["mw-remote/RemoteEndPointsManager",
"dojo/_base/xhr","dojo/_base/Deferred"],function(k,d,g){var a=function(a,b,d){return k.getIframeProxyClientForEndPoint(b).sendMessage(a,k.getRemoteUrlForEndPoint(b),d)},b=function(a,b,h){h=h&&h.headers?h.headers:null;return d.post({url:k.getRemoteUrlForEndPoint(b),contentType:"application/json",handleAs:"json",headers:h,postData:a})};return{sendPayload:function(d,f,h){var c=k.getEndPointAllowsDirectXhr(f),e=new g;c.then(function(c){(c.status===k.DirectXhrConstants.ENABLED?b(d,f,h):a(d,f,h)).then(function(a){e.resolve(a)})});
return e}}})},"mw-remote/UploadToWorker":function(){define("dojo/_base/declare dojo/Deferred dojo/dom-construct mw-html-utils/HtmlUtils mw-remote/RemoteEndPointsManager ./utils/SendMessageUtil".split(" "),function(k,d,g,a,b,l){return k([],{constructor:function(){},upload:function(a,h,c){var e=this;this._uploadHandler=new d(function(){e.postMessageToUploadIframe("cancelUpload");e._unloadIframe()});this._workerEndpoint=c.endpoint;if(a instanceof FileList){var f=void 0;l.sendPayload(JSON.stringify({messages:{CreateCsrfToken:[{}]}}),
b.getEndPointNames().WORKER_ENDPOINT).then(function(b){b.messages.CreateCsrfTokenResponse.forEach(function(a){a.messageFaults&&0<a.messageFaults.length||(f=a.csrfToken)});b=encodeURI(c.uploadIframeProxyUrl)+"\x26uploadDestinationUrl\x3d"+e._workerEndpoint+"upload?dest\x3d"+encodeURIComponent(h)+"\x26csrfToken\x3d"+encodeURIComponent(f);e._createUploadIframe(a,b)});return this._uploadHandler}},_createUploadIframe:function(a,b){var c=this;this._eventCallBack=function(b){if(c.getHostName(b.origin)===
c.getHostName(c._workerEndpoint))switch(b.data.type){case "iframeIsReady":c.postMessageToUploadIframe(a);break;case "updateProgress":c._uploadHandler.progress({loaded:b.data.loaded,total:b.data.total});break;case "uploadFinished":c._uploadHandler.resolve({status:b.data.status,response:b.data.response});c._unloadIframe();break;case "uploadError":c._uploadHandler.reject({status:b.data.status,response:b.data.response})}};this._uploadIframe=g.create("iframe",{id:"uploadIframe",src:b,width:0,height:0,
style:"visibility: hidden; display: none;"});document.body.appendChild(this._uploadIframe);window.addEventListener("message",this._eventCallBack,!1)},_unloadIframe:function(){this._uploadIframe&&(window.removeEventListener("message",this._eventCallBack,!1),this._uploadIframe.parentNode.removeChild(this._uploadIframe),g.destroy(this._uploadIframe),this._uploadIframe=void 0)},getHostName:function(b){return a.parseUrl(b).hostname},postMessageToUploadIframe:function(a){this._uploadIframe.contentWindow.postMessage(a,
this._workerEndpoint)}})})},"mw-html-utils/HtmlUtils":function(){define(["dojo/io-query","mw-html-utils/_parseHtml/sanitize","mw-deprecation-utils/deprecation"],function(k,d,g){return{HYPERLINK_ESCAPE_REGEXP:/<a\s+href\s*=\s*"[^"]*"[^>]*>[\s\S]*?<\/a>/g,HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP:/<a\s+href\s*=\s*"([^"]*)"([^>]*)>([\s\S]*?)<\/a>/g,STRONG_ESCAPE_REGEXP:/<strong>|<\/strong>/g,BOLD_LINK_ATTRIBUTE_REGEX:/\bstyle\s*=\s*"[^"]*\bfont-weight\s*:\s*bold\b[^"]*"/,parseQueryString:function(){var a=
window.location.search.substr(1,window.location.search.length);return this._parseQueryString(a)},_parseQueryString:function(a){return k.queryToObject(a)},parseUrl:function(a){var b=document.createElement("a");b.display="none";b.href=a||window.location.href;b.href=b.href;b={protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash};"https:"!==b.protocol&&"http:"!==b.protocol||0===b.pathname.indexOf("/")||(b.pathname="/"+b.pathname);"https:"===b.protocol&&"443"===
b.port&&0!==a.indexOf("https://"+b.hostname+":443")&&(b.port="");return b},escapeHtml:function(a){var b=document.createElement("div");b.textContent=a;return b.innerHTML},escapeLinksAndHtml:function(a,b){g.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeLinksAndHtml"},replacement:{module:"mw-html-utils/HtmlUtils",method:"treatHtmlLikeCommandWindow"}});var d="",f=a.split(this.HYPERLINK_ESCAPE_REGEXP),h=a.match(this.HYPERLINK_ESCAPE_REGEXP),c="",e=this,m=0,k=function(a,b,d,f){a=
e.parseUrl(b).protocol;"http:"!==a&&"https:"!==a&&"matlab:"!==a&&(b="#");b=e.escapeHtml(b);f=e._strongNotEscaped(f,!0);c='\x3ca href\x3d"'+b+'"\x3e'+f+"\x3c/a\x3e"};if(b)d=this.escapeHtml(a),d=this.escapeWhitespace(d);else if(""!==f[0]&&(d=this._strongNotEscaped(f[0],!0)),null!==h&&0!==h.length)for(m=0;m<h.length;m+=1)h[m].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,k),""!==f[m+1]&&(f[m+1]=this._strongNotEscaped(f[m+1],!0)),d+=c+f[m+1];return d},treatHtmlLikeCommandWindow:function(a,b,d){if("string"!==
typeof a)return"";var f="",h=a.split(this.HYPERLINK_ESCAPE_REGEXP),c=a.match(this.HYPERLINK_ESCAPE_REGEXP),e="",g=this,l=0;d=d||{};var k=function(a,c,b,d){a=g.parseUrl(c).protocol;var f="";"http:"!==a&&"https:"!==a&&"matlab:"!==a&&(c="#");c=g.escapeHtml(c);d=g._strongNotEscaped(d,!1);g.BOLD_LINK_ATTRIBUTE_REGEX.test(b)&&(f=' style\x3d"font-weight:bold"');e='\x3ca href\x3d"'+c+'"'+f+"\x3e"+d+"\x3c/a\x3e"};if(b)f=this.escapeHtml(a);else if(""!==h[0]&&(f=this._strongNotEscaped(h[0],!1)),null!==c&&0!==
c.length)for(l=0;l<c.length;l+=1)c[l].replace(this.HYPERLINK_WITH_PARENTHESIS_ESCAPE_REGEXP,k),""!==h[l+1]&&(h[l+1]=this._strongNotEscaped(h[l+1],!1)),f+=e+h[l+1];d.addPreTagToPreserveWhiteSpace&&(f='\x3cspan style\x3d"white-space: pre"\x3e'+f+"\x3c/span\x3e");return f},_strongNotEscaped:function(a,b){var d="",f=a.match(this.STRONG_ESCAPE_REGEXP),h=a.split(this.STRONG_ESCAPE_REGEXP),c=function(a){return a};b&&(c=this.escapeWhitespace);b=0;if(null!==f&&0!==f.length)for(d=c(this.escapeHtml(h[0])),b=
0;b<f.length;b+=1)d+=f[b]+c(this.escapeHtml(h[b+1]));else d=c(this.escapeHtml(a));return d},escapeWhitespace:function(a){g.deprecated({deprecated:{module:"mw-html-utils/HtmlUtils",method:"escapeWhitespace"},replacement:{module:"Plain HTML",method:'Set class as white-space: pre or use \x3cspan style\x3d"white-space: pre"\x3e...\x3c/span\x3e'}});return(a||"").replace(/\n/g,"\x3cbr\x3e").replace(/ {2}/g,"\x26nbsp;\x26nbsp;")},handleAnchors:function(a,b){if(b.target.href){b.preventDefault();b.stopPropagation();
var d=b.target.href;-1!==d.indexOf("matlab:")?"matlab:"===d.substring(0,7)&&(b=b.target.href.substring(7),a(window.unescape(b))):window.open(b.target.href)}},isElementOverflown:function(a){return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},sanitizeHtmlFromJava:d.sanitizeHtmlFromJava}})},"mw-html-utils/_parseHtml/sanitize":function(){define([],function(){var k="backgroundColor borderBottom borderBottomColor borderBottomLeftRadius borderBottomRightRadius borderBottomStyle borderBottomWidth borderLeft borderLeftColor borderLeftStyle borderLeftWidth borderRadius borderRight borderRightColor borderRightStyle borderRightWidth borderSpacing borderStyle borderTop borderTopColor borderTopLeftRadius borderTopRightRadius borderTopStyle borderTopWidth borderWidth color fontFamily fontSize fontStyle fontWeight height lineHeight margin marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth overflow overflowWrap overflowX overflowY padding paddingBottom paddingLeft paddingRight paddingTop textAlign textAnchor textDecoration textIndent textOverflow textShadow textTransform width".split(" "),
d=function(d,a){var b=a.getAttribute("style");if(d.style&&null!==b&&""!==b)for(b=0;b<k.length;b+=1){var g=k[b],f=a.style[g];void 0!==d.style[g]&&(d.style[g]=f)}};return{sanitizeHtmlFromJava:function(g,a,b){return function(l){var f=function(c,b){for(var d=[],e=0;e<c.length;e+=1){var f=c[e];if(b.hasAttribute(f)){var h=b.getAttribute(f),g="";if(a[f]){g=a[f];h=String.prototype.trim.call(h);var l=h.indexOf(":");0>l&&g.relative[h.charAt(0)]?g=h:(l=h.substring(0,l),g=g[l+":"]?h:"#")}else g=h;d.push({key:f,
value:g})}}return d},h=function(a){var c=void 0;a.nodeType===window.Node.ELEMENT_NODE?g[a.tagName]?(c=document.createElement(a.tagName),f(g[a.tagName],a).forEach(function(a){c.setAttribute(a.key,a.value)}),b&&d(c,a)):c=document.createDocumentFragment():c=a.nodeType===window.Node.TEXT_NODE?document.createTextNode(a.textContent):document.createDocumentFragment();return c},c=function q(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=document.createDocumentFragment();if(150<c||!a)return b;
for(var d=a.firstChild;d;d=d.nextSibling){var e=h(d);d.nodeType===window.Node.ELEMENT_NODE&&e.appendChild(q(d,c+1));b.appendChild(e)}return b};l=(new DOMParser).parseFromString(l,"text/html");var e=void 0;return e=l.body?c(l.body):document.createDocumentFragment()}}({A:["target","href","title"],ABBR:["title"],ADDRESS:[],AREA:["shape","coords","href","alt"],ARTICLE:[],ASIDE:[],AUDIO:["autoplay","controls","loop","preload","src"],B:[],BDI:["dir"],BDO:["dir"],BIG:[],BLOCKQUOTE:["cite"],BR:[],CAPTION:[],
CENTER:[],CITE:[],CODE:[],COL:["align","valign","span","width"],COLGROUP:["align","valign","span","width"],DD:[],DEL:["datetime"],DETAILS:["open"],DIV:[],DL:[],DT:[],EM:[],FONT:["color","size","face"],FOOTER:[],H1:[],H2:[],H3:[],H4:[],H5:[],H6:[],HEADER:[],HR:[],I:[],IMG:["src","alt","title","width","height"],INS:["datetime"],LI:[],MARK:[],NAV:[],OL:[],P:[],PRE:[],S:[],SECTION:[],SMALL:[],SPAN:[],SUB:[],SUP:[],STRONG:[],TABLE:["width","border","align","valign"],TBODY:["align","valign"],TD:["width",
"rowspan","colspan","align","valign"],TFOOT:["align","valign"],TH:["width","rowspan","colspan","align","valign"],THEAD:["align","valign"],TR:["rowspan","align","valign"],TT:[],U:[],UL:[],VIDEO:"autoplay controls loop preload src height width".split(" ")},{href:{"http:":!0,"https:":!0,"mailto:":!0,"matlab:":!0,relative:{"#":!0,"/":!0}},src:{"http:":!0,"https:":!0,"mailto:":!0,relative:{"#":!0,"/":!0}}},!0)}})},"mw-deprecation-utils/deprecation":function(){define(["dojo/_base/config","mw-log/Log"],
function(k,d){var g={deprecated:function(a){if((k.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(a)){var b=window.showDeprecationsAsErrors||a.deprecationLevel===this.ERROR?this.ERROR:this.WARN;var g="DEPRECATED: ";a.deprecated&&(g+=a.deprecated.module,a.deprecated.method&&(g+="."+a.deprecated.method+"()"),g+=".");a.replacement&&(g+=" Use "+a.replacement.module,a.replacement.method&&(g+="."+a.replacement.method+"()"),g+=" instead.");a.removalVersion&&(g+=" Will be removed in version: "+
a.removalVersion+".");a.geckNumber&&(g+=" Please use g"+a.geckNumber+" to track latest information regarding this deprecation");a.additionalInformation&&(g+=" "+a.additionalInformation);d[b](g)}},_isConfigValid:function(a){var b=!!a.deprecated&&"object"===typeof a.deprecated&&a.deprecated.hasOwnProperty("module");a.replacement&&(b=b&&"object"===typeof a.replacement&&a.replacement.hasOwnProperty("module"));a.geckNumber&&(b=b&&"number"===typeof a.geckNumber);b||d.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");
return b}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return g})},"mw-remote/serviceRegistryLookup":function(){define(["dojo/request/xhr","mw-html-utils/HtmlUtils"],function(k,d){var g=!1,a={_serviceData:{},getServiceRegistryEndpoint:function(b){if(a._serviceData.serviceregistry){var d;var c=a._serviceData.serviceregistry.length;for(d=0;d<c;d+=1)if(a._serviceData.serviceregistry[d].name===b)return a._serviceData.serviceregistry[d].endpoint}return""}},
b=function(a){var b=d.parseQueryString().mre;if(b){var c=new URL(b,window.location.href);var e=c.origin===window.location.origin?!0:!1;if(e){b=c.href;c=a.serviceregistry;c=Array.isArray(c)?c:[];var f=!1;c.forEach(function(a){a.name&&"primary"===a.name&&(a.endpoint=b,f=!0)});f||(c.push({name:"primary",endpoint:b}),a.serviceregistry=c)}}return a},l={_doXhr:function(a,b){return k(a,{handleAs:"json",failOk:!0,method:"GET",timeout:15E3,sync:b})},_reset:function(){g=!1;a._serviceData={}},load:function(d,
h,c){g?c(a):l._doXhr("/serviceregistrylookup/1/service",!h.async).then(function(d){d instanceof Object||(d={});a._serviceData=b(d);g=!0;c(a)},function(){a._serviceData=b({});g=!0;c(a)})}};return l})},"mw-statemachine/statemachineimpl/TimeoutTrigger":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log","./Trigger"],function(k,d,g,a){return k(a,{constructor:function(){var a=this.name.split(" ");(2>a.length||"timeout"!==a[0])&&g.error("Invalid trigger name for a TimeoutTrigger. Could not parse out the type of handler.");
this.timeoutInSeconds=parseFloat(a[1]);this.handlerType=a[0]},enable:function(){this.disable();this.timeoutHandle=setTimeout(d.hitch(null,this.triggerHandler,this.name),1E3*this.timeoutInSeconds)},disable:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null)}})})},"mw-statemachine/statemachineimpl/Transition":function(){define(["dojo/_base/declare","dojo/_base/lang","mw-log/Log"],function(k,d,g){return k([],{constructor:function(a){this.state={};this.target="";
this.action=this.condition=null;k.safeMixin(this,a)},handleTrigger:function(a,b){var d="";this.checkCondition(a,b)&&(this.runAction(a,b),d=this.getTarget(a,this.target,b));return d},checkCondition:function(a,b){return this.condition?d.hitch(this.state.context,this.condition).apply(null,[a,this.state.data].concat(b)):!0},runAction:function(a,b){if(this.action){var g=d.hitch(this.state.context,this.action);g.apply(null,[a,this.state.data].concat(b))}},getTarget:function(a,b,l){var f;if(d.isString(b))var h=
b;else if(d.isFunction(b))b=d.hitch(this.state.context,b),h=b.apply(null,[a,this.state.data].concat(l));else if(d.isArray(b))for(f=0;f<b.length;f+=1){h=this.getTarget(a,b[f],l);if(d.isString(h)){h={target:h};d.mixin(h,c);break}if(h&&h.target){d.mixin(h,c);break}var c=h||{}}else g.warn("Transition: improper target: ",b);return h}})})},"mw-messageservice/messageserviceimpl/MessageServiceReqResp":function(){define(["dojo/_base/declare","dojo/Deferred","mw-log/Log"],function(k,d,g){return k([],{pollDelay:50,
constructor:function(a,b){this.remote=a;this.messageService=b;this.pending=0;a.registerDefaultMessageFactory("OpaqueMessage",function(){this.pending+=1;return{opaqueMessageDOs:[]}},this);a.registerResponseHandler("OpaqueMessageResponse",function(a){--this.pending;a.forEach(function(a){try{a.opaqueMessageDOs&&a.opaqueMessageDOs.forEach(b.handleMessage,b)}catch(h){g.error("Error while handling message: "+h)}});this.poll()},this)},onMessage:function(a){},onConnectionError:function(a){},connect:function(){this.enabled=
!0;this.poll();return(new d).resolve()},disconnect:function(){this.enabled=!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=null);return(new d).resolve()},cleanup:function(){},poll:function(){if(this.enabled&&0===this.pending){var a=this;this.timeout=setTimeout(function(){a.pending+=1;a.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[]}});a.timeout=null},this.pollDelay)}},doPublish:function(a,b){clearTimeout(this.timeout);this.timeout=null;this.pending+=1;this.remote.sendMessage({OpaqueMessage:{opaqueMessageDOs:[{channel:a,
data:b}]}})},doSubscribe:function(a){},doUnsubscribe:function(a){},doStartBatch:function(){},doEndBatch:function(){}})})},"mw-peermodel/PeerSynchronizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect mw-log/Log mw-utils/Utils mw-messageservice/MessageService ./ImageDifferencer ./PagedData ./Serializers".split(" "),function(k,d,g,a,b,l,f,h,c){var e=k(null,{_MAX_RETRIES:3,constructor:function(e,h,k,p,t){this.namespace=e;this.manager=h;this.messageService=k||l.messageService;c.setupSerializers(this.messageService);
this._originator={};this.messageCount=0;this.syncEnabled={};this.isClient=void 0===p?!0:!!p;this.clientId="string"===typeof t?t:b.generateUuid();this.imageDifferencer=new f(this._originator);this._queue=[];this._onConnectedHandler=g.after(this.messageService,"onConnected",d.hitch(this,this._handleConnected));this._onNotConnectedHandler=g.after(this.messageService,"onNotConnected",d.hitch(this,this._handleNotConnected));this.messageService.isConnected()?this._handleConnected():this._handleNotConnected();
try{this.addManagerListeners(),this.addMessageSubscriptions()}catch(r){a.error("Not able to create peer synchronizer: "+r)}},remove:function(){this._handleNotConnected();this.removeMessageSubscriptions();this.removeManagerListeners();this._onConnectedHandler.remove();this._onNotConnectedHandler.remove()},_handleNotConnected:function(){this.log("Not connected");this._handshook=this._connected=!1},_handleConnected:function(){this.log("Connected");this._connected=!0;this._startHandshake()},_startHandshake:function(){this.log("Starting handshake");
var a=this.createNewMessage();a.clientId=this.clientId;a.syncEnabled=this.manager.isSyncEnabled();this.publish(this.getChannel("getStatus"),a)},_handshakeComplete:function(){this.log("Handshake complete");this._handshook=!0;this._processQueue()},_processQueue:function(){var a=this._queue;this._queue=[];this.log("Processing queue",a);a.forEach(function(a){this.publish(a.channel,a.message)},this)},shouldSync:function(a){return this.manager.isSyncEnabled()&&(!a||a.originator!==this._originator)},isReady:function(){return this._connected&&
this._handshook},syncChangedObserver:function(){this.syncEnabled[this.clientId]=this.manager.isSyncEnabled();this.manager.isSyncEnabled()?(this.addSyncMessageSubscriptions(),this.addSyncManagerListeners(),this._connected&&this._startHandshake()):(this.removeSyncMessageSubscriptions(),this.removeSyncManagerListeners(),this._handshook=!1)},getStatusSubscriber:function(a){this.log("getStatusSubscriber",a);var c=this.createNewMessage();c.syncEnabled=this.manager.isSyncEnabled();c.clientId=this.clientId;
this.publish(this.getChannel("status"),c);this.statusSubscriber(a)},statusSubscriber:function(a){this.log("Status received",a);this.syncEnabled[a.data.clientId]=a.data.syncEnabled;this.isClient&&this.manager.isSyncEnabled()&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},getFullUpdateSubscriber:function(){this.log("getFullUpdate requested");if(this.manager.isSyncEnabled()){var a=this.createNewMessage();this.manager.hasRoot()&&(a.root=this.convertNodesRecursive(this.manager.getRoot(),
0));this.publish(this.getChannel("fullUpdate"),a);this._handshakeComplete()}},fullUpdateSubscriber:function(a){this.log("fullUpdate received",a);if(this.shouldSync())try{var c=a.data.root;c?(!this.manager.hasRoot()||c.id===this.manager.getRoot().getId()&&c.type===this.manager.getRoot().getType()||this.manager.getRoot().destroy(this._originator),this._handshakeComplete(),this.manager.hasRoot()||this.manager.setRootWithId(c.id,c.type,c.properties,this._originator),this.updateNodeRecursive(this.manager.getRoot(),
c)):(this.manager.hasRoot()&&this.manager.getRoot().destroy(this._originator),this._handshakeComplete())}catch(q){this._error("Error while trying to do a full update.",a,q)}},rootSetObserver:function(a){this.addNodeListeners(a.target);if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.target=this.convertNode(a.target);this.publish(this.getChannel(a.type),c)}},rootSetSubscriber:function(a){this.log("rootSetSubscriber",a);if(this.shouldSync())try{var c=a.data.target;this.manager.hasRoot()&&
this.manager.getRoot().destroy(this._originator);var b=this.manager.setRootWithId(c.id,c.type,c.properties,this._originator);this.updateNodeRecursive(b,c)}catch(p){this._error("Error setting new root.",a,p)}},rootDestroyedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.targetId=a.target.getId();this.publish(this.getChannel(a.type),c)}},rootDestroyedSubscriber:function(a){this.log("rootDestroyedSubscriber",a);if(this.shouldSync())try{this.manager.hasRoot()&&
this.manager.getRoot().getId()===a.data.targetId?this.manager.getRoot().destroy(this._originator):this._error("Tried to unset the wrong root.",a)}catch(n){this._error("Error destroying root.",a,n)}},childMovedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.targetId=a.target.getId();c.oldParentId=a.data.oldParent.getId();c.oldIndex=a.data.oldIndex;c.newParentId=a.data.newParent.getId();c.newIndex=a.data.newIndex;this.publish(this.getChannel(a.type),c)}},
childMovedSubscriber:function(a){this.log("childMovedSubscriber",a);if(this.shouldSync())try{var c=a.data,b=this.manager.getById(c.targetId),d=this.manager.getById(c.newParentId);this.manager.move(b,d,c.newIndex,this._originator)}catch(t){this._error("Error while trying to move.",a,t)}},childAddedObserver:function(a){var c=a.data.child;this.addNodeListeners(c);if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.parentId=a.target.getId();b.child=this.convertNode(c);b.index=a.data.index;
this.publish(this.getChannel("subTreeAdded"),b)}},subTreeAddedSubscriber:function(a){this.log("subTreeAddedSubscriber",a);if(this.shouldSync())try{var c=a.data.child,b=this.manager.getById(a.data.parentId).addChildWithId(c.id,c.type,c.properties,a.data.index,this._originator);this.updateNodeRecursive(b,c)}catch(p){this._error("Error while trying to add a subtree of nodes.",a,p)}},childDetachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.childId=a.data.child.getId();
this.publish(this.getChannel(a.type),c)}},childDetachedSubscriber:function(a){this.log("childDetachedSubscriber",a);if(this.shouldSync())try{this.manager.getById(a.data.childId).detach(this._originator)}catch(n){this._error("Error while trying to detach.",a,n)}},childReattachedObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var c=this.createNewMessage();c.childId=a.data.child.getId();c.index=a.data.index;this.publish(this.getChannel(a.type),c)}},childReattachedSubscriber:function(a){this.log("childReattachedSubscriber",
a);if(this.shouldSync())try{var c=a.data;this.manager.getById(c.childId).reattach(c.index,this._originator)}catch(q){this._error("Error while trying to reattach.",a,q)}},subTreeDestroyedObserver:function(a){var c=a.data.child;this.removeNodeListenersRecursive(c);if(this.shouldSync(a)&&this.isReady()){var b=this.createNewMessage();b.childId=c.getId();this.publish(this.getChannel(a.type),b)}},subTreeDestroyedSubscriber:function(a){this.log("subTreeDestroyedSubscriber",a);if(this.shouldSync())try{this.manager.getById(a.data.childId).destroy(this._originator)}catch(n){this._error("Error while trying to destroy subtree.",
a,n)}},propertiesSetObserver:function(a){if(this.shouldSync(a)&&this.isReady()&&!this.isClient){var c=[],d=this.createNewMessage(),e;d.targetId=a.target.getId();var f=a.data.newValues,h=a.data.oldValues;for(e in f)if(f.hasOwnProperty(e)&&b.isImageData(f[e])){var g=h[e];if(g&&b.isImageData(g)){c.push(e);var l=this.createNewMessage();l.targetId=a.target.getId();l.key=e;l.newValue=this.imageDifferencer.computeImageDataDifferences(g,f[e]);this.publish(this.getChannel("imageUpdate"),d)}}c.forEach(function(c){delete a.data.newValues[c]});
d.properties=a.data.newValues;this.publish(this.getChannel(a.type),d)}},propertiesSetSubscriber:function(a){this.log("propertiesSetSubscriber",a);if(this.shouldSync()||this.isClient)try{var c=a.data,b=this.manager.getById(c.targetId),d;for(d in c.properties)c.properties.hasOwnProperty(d)&&(c.properties[d]instanceof Image?this.imageDifferencer.updatePropertyWithImage(b,d,c.properties[d]):(b.setProperty(d,c.properties[d],this._originator),this._updateNodePagedData(b)))}catch(t){this._error("Error while trying to update properties.",
a,t)}},imageUpdateSubscriber:function(a){this.log("imageUpdateSubscriber",a);if(this.shouldSync())try{var c=a.data,b=this.manager.getById(c.targetId);this.imageDifferencer.applyImageDifferences(b,c.key,c.newValue)}catch(p){this._error("Error while trying to update images.",a,p)}},propertiesUnsetObserver:function(a){if(this.shouldSync(a)&&this.isReady()){var c,b=this.createNewMessage();b.targetId=a.target.getId();b.keys=[];for(c in a.data.oldValues)a.data.oldValues.hasOwnProperty(c)&&b.keys.push(c);
this.publish(this.getChannel(a.type),b)}},propertiesUnsetSubscriber:function(a){this.log("propertiesUnsetSubscriber",a);if(this.shouldSync())try{var c=a.data;this.manager.getById(c.targetId).unsetProperties(c.keys,this._originator)}catch(q){this._error("Error while trying to unset properties.",a,q)}},peerEventObserver:function(a){var c=this.createNewMessage();c.targetId=a.target.getId();c.data=a.data;var b=this.getChannel(a.type);this.shouldSync(a)&&(this.isReady()?this.publish(b,c):this._queue.push({channel:b,
message:c}))},peerEventSubscriber:function(a){this.log("peerEventSubscriber",a);if(this.shouldSync())try{var c=a.data,b=this.manager.getById(c.targetId);b.dispatchEvent("peerEvent",b,c.data,this._originator)}catch(p){this._error("Error while trying dispatch a peer event.",a,p)}},publish:function(c,b,d){this.log("Publishing message",c,b);var e=this.messageService.publish(c,b),f=this;d=void 0===d?this._MAX_RETRIES:d;e.then(void 0,function(){0<d?(a.warn("Error sending message (will retry "+d+"): ",c,
b),f.publish(c,b,d-1)):f._error("Error sending message, retry didn't work.",c,b)})},getChannel:function(a){return"/peermodel"+this.namespace+"/"+a},createNewMessage:function(){this.messageCount+=1;return{message:this.messageCount}},log:function(){if(this.namespace===e.debugNamespace){var c=Array.prototype.slice.call(arguments);c=["PeerSynchronizer ("+this.namespace+")"].concat(c);a.info.apply(a,c)}},convertNodesRecursive:function(a,c){c=this.convertNode(a,c);var b=[];a=a.getChildren();var d;for(d=
0;d<a.length;d+=1)b.push(this.convertNodesRecursive(a[d],d));c.children=b;return c},convertNode:function(a,c){c=c||0;return{id:a.getId(),type:a.getType(),index:c,properties:a.getProperties()}},updateNodeRecursive:function(a,c){for(var b,d,e,f,h,g=a?[a]:[],l=c?[c]:[];0<l.length;){a=g.pop();c=l.pop();b=this._getFilteredPropertyKeys(c.properties);if(!a._handled)for(a._handled=!0,d=a.getProperties(),e=Object.keys(d),h=e.length,f=0;f<h;f+=1)b.filtered[e[f]]=d[e[f]];a.replaceProperties(b.filtered,this._originator);
this._updateNodePagedData(a,d);this._updateNodeImageProperties(a,c.properties,b.images);this._destroyOldChildren(a,c);this._addNewChildren(a,c);this._updateChildIndices(a,c);g=g.concat(a.getChildren());c.children&&(l=l.concat(c.children))}},_destroyOldChildren:function(a,c){var b=a.getChildren();for(a=0;a<b.length;a+=1)this._dataHasChild(c,b[a])||b[a].destroy(this._originator)},_addNewChildren:function(a,c){var b;if(c.children)for(b=0;b<c.children.length;b+=1){var d=c.children[b];if(!a.hasChild(d.id)){var e=
this._getFilteredPropertyKeys(d.properties);a.addChildWithId(d.id,d.type,e.filtered,b,this._originator)}}},_updateChildIndices:function(a,c){var b;if(c.children)for(b=0;b<c.children.length;b+=1){var d=c.children[b];d=a.getChild(d.id);a.getChildIndex(d)!==b&&this.manager.move(d,a,b,this._originator)}},_dataHasChild:function(a,c){var b;if(a.children)for(b=0;b<a.children.length;b+=1)if(a.children[b].id===c.getId()&&a.children[b].type===c.getType())return!0;return!1},_error:function(c,b,d){a.error(c,
b,d);this.manager.isSyncEnabled()&&this.isClient&&this.publish(this.getChannel("getFullUpdate"),this.createNewMessage())},_getFilteredPropertyKeys:function(a){var c={},b=[],d;for(d in a)a.hasOwnProperty(d)&&null!==a[d]&&void 0!==a[d]&&(a[d]instanceof Image?b.push(d):c[d]=a[d]);return{filtered:c,images:b}},_updateNodePagedData:function(a,c){var b;c||(c=a.getProperties());for(b in c)c.hasOwnProperty(b)&&c[b]instanceof h&&c[b].setPeerNode(a,b)},_updateNodeImageProperties:function(a,c,b){var d;for(d=
0;d<b.length;d+=1)this.imageDifferencer.updatePropertyWithImage(a,b[d],c[b[d]])},addMessageSubscriptions:function(){this._messageSubscribed||(this._onConnectedSub=g.after(this.messageService,"onReconnected",d.hitch(this,"syncChangedObserver")),this.messageService.subscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!0);this.manager.isSyncEnabled()&&this.addSyncMessageSubscriptions()},removeMessageSubscriptions:function(){this._messageSubscribed&&(this._onConnectedSub.remove(),
this.messageService.unsubscribe(this.getChannel("getStatus"),"getStatusSubscriber",this),this._messageSubscribed=!1);this.removeSyncMessageSubscriptions()},syncMessageChannels:"status getFullUpdate fullUpdate rootSet rootDestroyed childMoved childDetached childReattached subTreeAdded subTreeDestroyed propertiesSet propertiesUnset imageUpdate peerEvent".split(" "),addSyncMessageSubscriptions:function(){this._syncMessageSubscribed||(this.log("addSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.subscribe(this.getChannel(a),
a+"Subscriber",this)},this),this._syncMessageSubscribed=!0)},removeSyncMessageSubscriptions:function(){this._syncMessageSubscribed&&(this.log("removeSyncMessageSubscriptions"),this.syncMessageChannels.forEach(function(a){this.messageService.unsubscribe(this.getChannel(a),a+"Subscriber",this)},this),this._syncMessageSubscribed=!1)},addManagerListeners:function(){this._managerListeners||(this.manager.addSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!0);this.manager.isSyncEnabled()&&
this.addSyncManagerListeners()},removeManagerListeners:function(){this._managerListeners&&(this.manager.removeSyncEventListener("syncChanged","syncChangedObserver",this),this._managerListeners=!1);this.removeSyncManagerListeners()},addSyncManagerListeners:function(){this._syncManagerListeners||(this.manager.addSyncEventListener("rootSet","rootSetObserver",this),this.manager.addSyncEventListener("rootDestroyed","rootDestroyedObserver",this),this.manager.addSyncEventListener("childMoved","childMovedObserver",
this),this.manager.hasRoot()&&this.addNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=!0)},removeSyncManagerListeners:function(){this._syncManagerListeners&&(this.manager.removeSyncEventListener("rootSet","rootSetObserver",this),this.manager.removeSyncEventListener("rootDestroyed","rootDestroyedObserver",this),this.manager.removeSyncEventListener("childMoved","childMovedObserver",this),this.manager.hasRoot()&&this.removeNodeListenersRecursive(this.manager.getRoot()),this._syncManagerListeners=
!1)},nodeEvents:"childAdded subTreeDestroyed childDetached childReattached propertiesSet propertiesUnset peerEvent partialUpdate".split(" "),addNodeListeners:function(a){this.nodeEvents.forEach(function(c){a.addSyncEventListener(c,c+"Observer",this)},this)},removeNodeListeners:function(a){this.nodeEvents.forEach(function(c){a.removeSyncEventListener(c,c+"Observer",this)},this)},addNodeListenersRecursive:function(a){this.addNodeListeners(a);var c=a.getChildren();for(a=0;a<c.length;a+=1)this.addNodeListenersRecursive(c[a])},
removeNodeListenersRecursive:function(a){this.removeNodeListeners(a);var c=a.getChildren();for(a=0;a<c.length;a+=1)this.removeNodeListenersRecursive(c[a])}});e.debugNamespace="/change this to debug something";return e})},"mw-peermodel/ImageDifferencer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct mw-deferred-utils/Deferred mw-deferred-utils/DeferredList mw-log/Log".split(" "),function(k,d,g,a,b,l){return k([],{_updateQueue:{},constructor:function(a){this._canvas=g.create("canvas");
this._context=this._canvas.getContext("2d");this._originator=a},computeImageDataDifferences:function(a,b){return[{x:0,y:0,image:b}]},applyImageDifferences:function(a,d,c){var e,f=c.length,h=this;if(0!==f){var g=this._createQueuedDeferred(a,d);g.name="applyImageDifferences deferred";var k=[];for(e=0;e<f;e+=1)k.push(this._wrapImageInDeferred(c[e].image));e=new b(k,!1,!0,!1);var t=h._updateQueue[a.getId()+d][h._updateQueue[a.getId()+d].length-2];e.then(function(){t?t.then(function(){h._applyLoadedImageDifferences(a,
d,c,g)}):h._applyLoadedImageDifferences(a,d,c,g)},function(){l.log("rejecting deferred applyImageDifferences");g.reject();h._cancelQueuedDeferreds(a,d)});return g}},updatePropertyWithImage:function(a,b,c){var d=this._wrapImageInDeferred(c),f=this._createQueuedDeferred(a,b);f.name="updateImage deferred";var h=this;d.then(function(){h._canvas.width=c.width;h._canvas.height=c.height;h._context.drawImage(c,0,0,c.width,c.height);var d=h._context.getImageData(0,0,h._canvas.width,h._canvas.height);a.setProperty(b,
d,h._originator);h._cancelQueuedDeferreds(a,b,f);f.isCanceled()||f.resolve()},function(){f.isCanceled()||f.reject()});return f},_applyLoadedImageDifferences:function(a,b,c,d){var e=a.getProperty(b);this._canvas.width=e.width;this._canvas.height=e.height;this._context.putImageData(e,0,0);for(e=0;e<c.length;e+=1)this._context.beginPath(),this._context.clearRect(c[e].x,c[e].y,c[e].image.width,c[e].image.height),this._context.closePath(),this._context.drawImage(c[e].image,c[e].x,c[e].y);c=this._context.getImageData(0,
0,this._canvas.width,this._canvas.height);a.setProperty(b,c,this._originator);d.resolve()},_wrapImageInDeferred:function(b){var d=new a;d.name="wrapImage deferred";var c=function(){setTimeout(function(){b.onload&&(d.resolve(),b.onload=null,b.onerror=null)},0)};b.onload=c;b.onerror=function(){l.log("Error loading image");d.reject();b.onload=null;b.onerror=null};b.complete&&0<b.src.length&&c();return d},_createQueuedDeferred:function(b,h){var c=new a;var e=d.hitch(this,this._removeDeferredFromQueue,
b,h,c);c.then(e,e);this._updateQueue[b.getId()+h]=this._updateQueue[b.getId()+h]||[];this._updateQueue[b.getId()+h].push(c);return c},_removeDeferredFromQueue:function(a,b,c){void 0===this._updateQueue[a.getId()+b]?delete this._updateQueue[a.getId()+b]:(c=this._updateQueue[a.getId()+b].indexOf(c),0<=c&&this._updateQueue[a.getId()+b].splice(c,1),0===this._updateQueue[a.getId()+b].length&&(this._updateQueue[a.getId()+b]=void 0,delete this._updateQueue[a.getId()+b]))},_cancelQueuedDeferreds:function(a,
b,c){for(var d=this._updateQueue[a.getId()+b];d&&0<d.length;){var f=d.shift();if(c&&f===c)return;f.cancel("Queued deferreds cancelled")}this._updateQueue[a.getId()+b]=void 0;delete this._updateQueue[a.getId()+b]}})})},"mw-deferred-utils/Deferred":function(){define([],function(){var k=function(){this._state=0;this._callbacks=[];this._errbacks=[]};k.prototype.then=function(d,g){1===this._state&&d?d():2===this._state&&g?g():(d&&this._callbacks.push(d),g&&this._errbacks.push(g));return this};k.prototype.resolve=
function(){if(0===this._state){for(this._state=1;this._callbacks.length;)this._callbacks.pop()();this._callbacks=[];this._errbacks=[]}};k.prototype.reject=function(){if(0===this._state){for(this._state=2;this._errbacks.length;)this._errbacks.pop()();this._callbacks=[];this._errbacks=[]}};k.prototype.cancel=function(){0===this._state&&(this._state=3,this._callbacks=[],this._errbacks=[])};k.prototype.isCanceled=function(){return 3===this._state};return k})},"mw-deferred-utils/DeferredList":function(){define(["./Deferred"],
function(k){var d=function(d){k.apply(this);this._successes=0;this._total=d.length;var a;for(a=0;a<this._total;a+=1)d[a].then(this._callback.bind(this),this.reject.bind(this))};d.prototype=new k;d.prototype.constructor=d;d.prototype._callback=function(){this._successes+=1;this._successes===this._total&&this.resolve()};return d})},"mw-peermodel/PagedData":function(){define(["dojo/_base/declare"],function(k){return k([],{constructor:function(d){d=d||{};this._peerNode=d.peerNode;this._propertyKey=d.propertyKey;
this._partialData=d.partialData||[];this._rowCount=d.rowCount||0;this._columnCount=d.columnCount||0;this._currentStartRow=d.currentStartRow||0;this._currentEndRow=d.currentEndRow||0;this._currentStartCol=d.currentStartCol||0;this._currentEndCol=d.currentEndCol||0;this._queuedOperations=[]},setPeerNode:function(d,g){this._peerNode=d;this._propertyKey=g;for(d=0;d<this._queuedOperations.length;d+=1)this._queuedOperations[d].apply(this);this._queuedOperations=[]},getPartialData:function(){return this._partialData},
getRowCount:function(){return this._rowCount},getColumnCount:function(){return this._columnCount},getCurrentStartRow:function(){return 0<=this._currentStartRow?this._currentStartRow:0},getCurrentEndRow:function(){return this.getCurrentStartRow()+this._partialData.length},getCurrentStartCol:function(){return 0<=this._currentStartCol?this._currentStartCol:0},getCurrentEndCol:function(){return 0<this._partialData.length?Array.isArray(this._partialData[0])?this.getCurrentStartCol()+this._partialData[0].length:
1:0<=this._currentEndCol?this._currentEndCol:0},changeData:function(d,g,a){if(this._peerNode){var b,l;for(b=0;b<a.length;b+=1){var f=this._partialData[d-this._currentStartRow+b],h=a[b];for(l=0;l<h.length;l+=1)f[g-this._currentStartCol+l]=h[l]}var c=this;setTimeout(function(){c._peerNode.dispatchEvent("peerEvent",c._peerNode,{type:"changeData",key:c._propertyKey,startRow:d,startCol:g,newData:a})},0)}else this._queuedOperations.push(function(){this.changeData(d,g,a)})},updatePartialData:function(d,
g,a,b){if(d!==this._currentStartRow||a!==this._currentStartCol||g!==this._currentEndRow||b!==this._currentEndCol)if(this._peerNode){if("undefined"===typeof a||"undefined"===typeof b)b=a=-1;this._peerNode.dispatchEvent("peerEvent",this._peerNode,{type:"partialUpdate",key:this._propertyKey,startRow:d,startCol:a,endRow:g,endCol:b})}else this._queuedOperations.push(function(){this.updatePartialData(d,g,a,b)})}})})},"mw-peermodel/Serializers":function(){define(["mw-utils/Utils","./PagedData"],function(k,
d){var g={imageSerializer:function(a){this._serializerCanvas||(this._serializerCanvas=document.createElement("canvas"),this._serializerContext=this._serializerCanvas.getContext("2d"));if(this._serializerCanvas.width!==a.width||this._serializerCanvas.height!==a.height)this._serializerCanvas.width=a.width,this._serializerCanvas.height=a.height;this._serializerContext.putImageData(a,0,0);return this._serializerCanvas.toDataURL()},imageDeserializer:function(a){var b=new Image;b.src=a;return b},pagedDataSerializer:function(a){return{rowCount:a.getRowCount(),
columnCount:a.getColumnCount(),currentStartRow:a.getCurrentStartRow(),currentEndRow:a.getCurrentEndRow(),currentStartCol:a.getCurrentStartCol(),currentEndCol:a.getCurrentEndCol(),partialData:a.getPartialData()}},pagedDataDeserializer:function(a){a=g.messageService.deserialize(a);return new d(a)},setupSerializers:function(a){g.messageService=a;a._peerModelSerializersSetup||(a.registerTypeSerializer(k.isImageData,"image",g.imageSerializer),a.registerTypeDeserializer("image",g.imageDeserializer),a.registerTypeSerializer(function(a){return a instanceof
d},"pagedData",g.pagedDataSerializer),a.registerTypeDeserializer("pagedData",g.pagedDataDeserializer));a._peerModelSerializersSetup=!0}};return g})},"mw-peermodel/PeerNode":function(){define("dojo/_base/declare dojo/_base/lang ./Observable ./PeerEventObservable mw-utils/Utils mw-log/Log".split(" "),function(k,d,g,a,b,l){var f=k([a],{getId:function(){},getType:function(){},setProperty:function(a,b,d){},getProperty:function(a){},hasProperty:function(a){},unsetProperty:function(a,b){},setProperties:function(a,
b){},unsetProperties:function(a,b){},replaceProperties:function(a,b){},getProperties:function(){},addChild:function(a,b,d,f){},hasChild:function(a){},getChild:function(a){},getChildIndex:function(a){},getChildren:function(){},hasDescendant:function(a){},getDescendant:function(a){},getNumberOfChildren:function(){},hasDetachedChildren:function(){},getDetachedChildren:function(){},detach:function(a){},reattach:function(a,b){},isDetached:function(){},isAncestorDetached:function(){},destroy:function(a){},
remove:function(){},hasParent:function(){},getParent:function(){},getRoot:function(){},accept:function(a){}});var h=k([f,a.Impl,g.Syncable],{constructor:function(a,b,f,h){if(!d.isString(a)||!d.isString(b))throw Error("Node type and ID must be strings");this._type=b;this._id=a;this._idCache=h||{};this._idCache[a]=this;this._properties={};f&&this._setProperties(f,void 0,!0);this._children=[];this._detached=[]},getId:function(){return this._id},getType:function(){return this._type},setProperty:function(a,
b,d){if(null===b||void 0===b)throw Error("Illegal argument. Value must not be null or undefined.");var c=this._setPropertyAndDispatchPropertySetEvent(a,b,d);this._dispatchSinglePropertiesSetEvent(a,c,b,d)},_setPropertyAndDispatchPropertySetEvent:function(a,b,d,f){var c=this._properties[a];c!==b&&(this._properties[a]=b,f||this.dispatchEvent("propertySet",this,{key:a,oldValue:c,newValue:b},d));return c},_dispatchSinglePropertiesSetEvent:function(a,b,d,f){if(b!==d){var c={oldValues:{},newValues:{}};
c.oldValues[a]=b;c.newValues[a]=d;this.dispatchEvent("propertiesSet",this,c,f)}},unsetProperty:function(a,b){var c=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b);this._dispatchSinglePropertiesUnsetEvent(a,c,b)},unsetProperties:function(a,b){var c={oldValues:{}};a.forEach(function(a){c.oldValues[a]=this._unsetPropertyAndDispatchPropertyUnsetEvent(a,b)},this);this.dispatchEvent("propertiesUnset",this,c,b)},_unsetPropertyAndDispatchPropertyUnsetEvent:function(a,b){if(this.hasProperty(a)){var c=
this._properties[a];delete this._properties[a];this.dispatchEvent("propertyUnset",this,{key:a,oldValue:c},b)}return c},_dispatchSinglePropertiesUnsetEvent:function(a,b,d){var c={oldValues:{}};c.oldValues[a]=b;this.dispatchEvent("propertiesUnset",this,c,d)},hasProperty:function(a){return this._properties.hasOwnProperty(a)},getProperty:function(a){return this._properties[a]},setProperties:function(a,b){this._setProperties(a,b,!1)},_setProperties:function(a,b,d){var c;for(c in a)if(a.hasOwnProperty(c)){var e=
a[c];null!==e&&void 0!==e||l.warn("Illegal argument. Property value must not be null or undefined. This will become an exception in the future.")}var f=!1,h={oldValues:{},newValues:{}};for(c in a)if(a.hasOwnProperty(c)){e=a[c];var g=this._setPropertyAndDispatchPropertySetEvent(c,e,b,d);g!==e&&(f=!0,h.oldValues[c]=g,h.newValues[c]=e)}f&&!d&&this.dispatchEvent("propertiesSet",this,h,b)},replaceProperties:function(a,b){var c;this.setProperties(a,b);for(c in this._properties)this._properties.hasOwnProperty(c)&&
!a.hasOwnProperty(c)&&this.unsetProperty(c,b)},getProperties:function(){var a,b={};for(a in this._properties)this._properties.hasOwnProperty(a)&&this.hasProperty(a)&&(b[a]=this.getProperty(a));return b},addChild:function(a,b,d,f){"number"===typeof b&&(d=b,b=null);a=h.createNode(a,b,this._idCache);d=this._addChild(a,d);this.dispatchEvent("childAdded",this,{child:a,index:d},f);return a},addChildWithId:function(a,b,d,f,g){a=new h(a,b,d,this._idCache);f=this._addChild(a,f);this.dispatchEvent("childAdded",
this,{child:a,index:f||0},g);return a},hasChild:function(a){if(d.isString(a)){var c,b=this._children.length;for(c=0;c<b;c+=1){var f=this._children[c];if(f.getId()===a)return!0}return!1}a=this.getChildIndex(a);return 0<=a&&this._children[a]},getChild:function(a){if(d.isString(a)){var c,b=this._children.length;for(c=0;c<b;c+=1){var f=this._children[c];if(f.getId()===a)return f}throw Error("No child found with id: "+a);}return this._children[a]},getChildIndex:function(a){var c,b=this._children.length;
for(c=0;c<b;c+=1)if(this._children[c].getId()===a.getId())return c;return-1},getChildren:function(){return this._children.map(function(a){return a})},hasDescendant:function(a){var c,b=this._children.length;for(c=0;c<b;c+=1){var d=this._children[c];if(d.getId()===a||d.hasDescendant(a))return!0}b=this._detached.length;for(c=0;c<b;c+=1)if(d=this._detached[c],d.getId()===a||d.hasDescendant(a))return!0;return!1},getDescendant:function(a){var c,b=this._children.length;for(c=0;c<b;c+=1){var d=this._children[c];
if(d._id===a)return d;if(d.hasDescendant(a))return d.getDescendant(a)}b=this._detached.length;for(c=0;c<b;c+=1){d=this._detached[c];if(d._id===a)return d;if(d.hasDescendant(a))return d.getDescendant(a)}throw Error("No descendant found with id: "+a);},getNumberOfChildren:function(){return this._children.length},hasDetachedChildren:function(){return 0<this._detached.length},getDetachedChildren:function(){return this._detached.map(function(a){return a})},detach:function(a){if(!this.isDetached()){var c=
{child:this,index:this.getParent().getChildIndex(this)},b=this.getParent();this.getParent()._detachChild(this);b.dispatchEvent("childRemoved",b,c,a);b.dispatchEvent("childDetached",b,c,a)}},_detachChild:function(a){this._removeChild(a);this._detached.push(a)},reattach:function(a,b){this.isDetached()&&(a=0<=a?a:this.getParent().getNumberOfChildren(),a=this.getParent()._reattachChild(this,a),this.getParent().dispatchEvent("childReattached",this.getParent(),{child:this,index:a},b))},_reattachChild:function(a,
b){var c=this._detached.indexOf(a);this._detached.splice(c,1);return this._addChild(a,b)},isDetached:function(){return this.hasParent()&&0<=this.getParent().getDetachedChildren().indexOf(this)},isAncestorDetached:function(){return this.hasParent()&&(this.getParent().isDetached()||this.getParent().isAncestorDetached())},destroy:function(a){this.hasParent()&&this.getParent().dispatchEvent("subTreeDestroyed",this.getParent(),{child:this},a);this._destroyNodesRecursive(a)},remove:function(){this.destroy()},
_destroyNodesRecursive:function(a){try{this.getChildren().forEach(function(b){b._destroyNodesRecursive(a)});if(this.hasParent()){var b=this.getParent();var c=b.getChildIndex(this);b._removeChild(this);this._setParent(null);b.dispatchEvent("childRemoved",b,{child:this,index:c},a);b.dispatchEvent("childDestroyed",b,{child:this,index:c},a)}this.dispatchEvent("destroyed",this,void 0,a)}finally{delete this._idCache[this._id]}},hasParent:function(){return!!this._parent},getParent:function(){return this._parent},
getRoot:function(){return this.hasParent()?this.getParent().getRoot():this},accept:function(a){a(this);this._children.forEach(function(b){b.accept(a)});this._detached.forEach(function(b){b.accept(a)})},_addChild:function(a,b){b=this._checkIndex(b);a._setParent(this);this._children.splice(b,0,a);return b},_removeChild:function(a){if("number"===typeof a){var b=a;a=this._children[b]}else b=this.getChildIndex(a);b=this._checkIndex(b);a&&this._children.splice(b,1)},_checkIndex:function(a){if(void 0===
a||null===a)a=this._children.length;return Math.max(0,Math.min(a,this._children.length))},_setParent:function(a){this._parent=a},toString:function(a){a=a||0;var b,c,d="";for(c=0;c<a;c+=1)d+="    ";d+="{id\x3d'"+this._id+"'";d+=", type\x3d'"+this._type+"'";d+=", properties\x3d{";for(b in this._properties)if(this._properties.hasOwnProperty(b)){try{var f=dojo.toJson(this._properties[b])}catch(p){f=this._properties[b].toString()}40<f.length&&(f=f.slice(0,40)+"...");d+=b+": "+f+", "}d=d.slice(0,d.length-
2);d+="}, children\x3d[";for(c=0;c<this._children.length;c+=1)d+="\n"+this._children[c].toString(a+1);d+="], detached\x3d[";for(c=0;c<this._detached.length;c+=1)d+="\n"+this._detached[c].toString(a+1);return d+"]}"},equals:function(a){var b;if(!a)return!1;if(this===a)return!0;if(this._id!==a._id)return!1;if(this._parent&&a._parent){if(this._parent.getId()!==a._parent.getId())return!1}else if(this._parent!==a._parent)return!1;if(!this._propertiesEqual(this,a)||this._type!==a._type||this._children.length!==
a._children.length||this._detached.length!==a._detached.length)return!1;for(b=0;b<this._children.length;b+=1)if(!this._children[b].equals(a._children[b]))return!1;for(b=0;b<this._detached.length;b+=1)if(!this._detached[b].equals(a._detached[b]))return!1;return!0},_propertiesEqual:function(a,b){return a._properties!==b._properties?!1:!0}});f.createNode=h.createNode=function(a,d,f){var c=b.generateUuid();return new h(c,a,d,f)};f.Impl=h;return f})},"mw-peermodel/Observable":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-log/Log"],function(k,d,g){var a=k([],{addEventListener:function(a,d,f){},removeEventListener:function(a,d,f){},hasEventListener:function(a,d,f){},dispatchEvent:function(a,d,f,h){}});a.Syncable=k([],{addSyncEventListener:function(a,d,f){},removeSyncEventListener:function(a,d,f){}});a.Impl=k([a,a.Syncable],{constructor:function(){this._listeners={};this._syncListeners={}},addEventListener:function(a,d,f){this._addEventListener(this._listeners,a,d,f)},addSyncEventListener:function(a,
d,f){this._addEventListener(this._syncListeners,a,d,f)},_addEventListener:function(a,d,f,h){h=h||this;a[d]=a[d]||[];var b={scope:h,callback:f};0>this._getEventListenerIndex(a,d,f,h)&&a[d].push(b)},hasEventListener:function(a,d,f){return 0<=this._getEventListenerIndex(this._listeners,a,d,f)},removeEventListener:function(a,d,f){this._removeEventListener(this._listeners,a,d,f)},removeSyncEventListener:function(a,d,f){this._removeEventListener(this._syncListeners,a,d,f)},_removeEventListener:function(a,
d,f,h){f=this._getEventListenerIndex(a,d,f,h||this);if(0<=f)a[d].splice(f,1);else throw Error("Listener does not exist");},_getEventListenerIndex:function(a,d,f,h){h=h||this;if(a=a[d]){var b=a.length;for(d=0;d<b;d+=1)if(a[d].scope===h&&a[d].callback===f)return d}return-1},dispatchEvent:function(a,d,f,h){this._dispatchEvent(this._syncListeners,a,d,f,h);this._dispatchEvent(this._listeners,a,d,f,h)},_dispatchEvent:function(a,l,f,h,c){if(void 0!==h&&(d.isArray(h)||d.isString(h)||null===h||"number"===
typeof h||"boolean"===typeof h))throw Error("Invalid event data, must be object");var b=a[l];if(b){b=b.slice(0);var k=b.length;for(a=0;a<k;a+=1)try{var n={type:l,target:f||this,data:h||{},originator:c};"string"===typeof b[a].callback?b[a].scope[b[a].callback].call(b[a].scope,n):b[a].callback.call(b[a].scope,n)}catch(q){g.error("Error while dispatching event handler of type: "+l+", message: "+q)}}}});return a})},"mw-peermodel/PeerEventObservable":function(){define(["dojo/_base/declare","./Observable"],
function(k,d){var g=k([d],{addPeerEventListener:function(a,b,d){},removePeerEventListener:function(a,b,d){},hasPeerEventListener:function(a,b,d){},dispatchPeerEvent:function(a,b,d,f){}});g.Impl=k([d.Impl],{addPeerEventListener:function(a,b,d){var f=function(f){f.data.type&&f.data.type===a&&b.call(d,f)};f.type=a;f.callback=b;f.scope=d;this.addEventListener("peerEvent",f)},hasPeerEventListener:function(a,b,d){return!!this._getPeerEventObserver(a,b,d)},removePeerEventListener:function(a,b,d){if(a=this._getPeerEventObserver(a,
b,d))this.removeEventListener("peerEvent",a.callback,a.scope);else throw Error("Listener does not exist");},_getPeerEventObserver:function(a,b,d){return this._listeners.peerEvent?this._listeners.peerEvent.filter(function(f){return f.callback.callback&&f.callback.type===a&&f.callback.callback===b&&f.callback.scope===d})[0]:null},dispatchPeerEvent:function(a,b,d,f){d||(d={});d.type=a;this.dispatchEvent("peerEvent",b,d,f)}});return g})},"mw-peermodel/_PeerModelListenerMixin":function(){define(["dojo/_base/declare"],
function(k){return k([],{start:function(d){d=d||this.manager;d.setSyncEnabled(!0)},stop:function(d){d=d||this.manager;d.setSyncEnabled(!1)},addManagerListeners:function(d){d=d||this.manager;d.addEventListener("rootSet",this.rootSetObserver,this);d.addEventListener("rootUnset",this.rootUnsetObserver,this);d.addEventListener("childMoved",this.childMovedObserver,this)},removeManagerListeners:function(d){d=d||this.manager;d.removeEventListener("rootSet",this.rootSetObserver,this);d.removeEventListener("rootUnset",
this.rootUnsetObserver,this);d.removeEventListener("childMoved",this.childMovedObserver,this)},addNodeListeners:function(d){d.addEventListener("childAdded",this.childAddedObserver,this);d.addEventListener("childDestroyed",this.childDestroyedObserver,this);d.addEventListener("propertySet",this.propertySetObserver,this);d.addEventListener("peerEvent",this.peerEventObserver,this)},removeNodeListeners:function(d){d.removeEventListener("childAdded",this.childAddedObserver,this);d.removeEventListener("childDestroyed",
this.childDestroyedObserver,this);d.removeEventListener("propertySet",this.propertySetObserver,this);d.removeEventListener("peerEvent",this.peerEventObserver,this)},rootSetObserver:function(d){this.addNodeListeners(d.target)},rootUnsetObserver:function(d){this.removeNodeListeners(d.target)},childMovedObserver:function(d){this.onChildMove(d)},childAddedObserver:function(d){this.addNodeListeners(d.data.child);this.onChildAdd(d)},childDestroyedObserver:function(d){this.removeNodeListeners(d.data.child);
this.onChildDestroy(d)},propertySetObserver:function(d){this.onPropertySet(d)},peerEventObserver:function(d){this.onPeerEvent(d)},onPeerEvent:function(d){},onChildAdd:function(d){},onChildDestroy:function(d){},onPropertySet:function(d){},onChildMove:function(d){}})})},"mw-peermodel/_PropertyIndexerMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(k,d,g){return k([],{constructor:function(){this._propertyIndexMap={};g.before(this,"onChildAdd",d.hitch(this,function(a){var b=
a.data.child.getProperty(this._propertyToIndex);b&&(this._propertyIndexMap[b]=a.data.child.getId())}));g.before(this,"onPropertySet",d.hitch(this,function(a){a.data.key===this._propertyToIndex&&a.data.newValue&&(this._propertyIndexMap[a.data.newValue]=a.target.getId())}));g.before(this,"onChildDestroy",d.hitch(this,function(a){delete this._propertyIndexMap[a.data.child.getProperty(this._propertyToIndex)]}))},_getPeerNodeIdForIndexedProperty:function(a){return this._propertyIndexMap[a]}})})},"mw-form/CheckBoxMenuItem":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/CheckBox mw-form/mixins/property/TagMixin mw-form/mixins/property/CheckedMixin mw-form/mixins/property/CloseMenuOnClickMixin mw-form/mixins/property/DescriptionMixin mw-form/mixins/property/DisabledMixin mw-form/mixins/property/ShortcutMixin mw-form/mixins/property/ShowDescriptionMixin mw-form/mixins/property/ShowTextMixin mw-form/mixins/property/ShowShortcutMixin mw-form/mixins/property/TextMixin mw-form/mixins/SingleLineTextMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/FocusableMenuChildMixin mw-form/mixins/MenuChildResizeMixin mw-form/mixins/MenuItemTextColorMixin mw-form/mixins/AccessibilityClickMixin mw-form/mixins/event/ChangeEventMixin mw-form/mixins/PreventSelectionMixin mw-form/mixins/MenuItemAriaLabelledByMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/CheckBoxRadioButtonMenuItem.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A,z,D,E,B,C,G,I){return k(G.validate([g,a,b,l,f,w,A,c,e,m,n,p,t,r,u,y,x,q,v,z,D,E,B,C]),{baseClass:"mwWidget mwSharedMenuItem mwCheckBoxMenuItem",templateString:I,constructor:function(){this.checkBox=new h({text:""});this.own(this.checkBox)},_setCheckedAttr:function(a){this.inherited(arguments);this.checkBox.set("checked",a);this.get("closeMenuOnClick")&&(a?(this.checkBox.domNode.classList.add("mwSpecialCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwNoCheckBoxIcon")):
(this.checkBox.domNode.classList.add("mwNoCheckBoxIcon"),this.checkBox.domNode.classList.remove("mwSpecialCheckBoxIcon")))},buildRendering:function(){this.inherited(arguments);this.checkBox.placeAt(this.domNode,"first")},postCreate:function(){this.inherited(arguments);this.checkBox._triggerChangeEvent=function(){};this.checkBox._onClick=function(){};this.domNode.setAttribute("data-composite-primary","");(this.checkBox.focusNode||this.checkBox.domNode).setAttribute("data-composite-child","");(this.checkBox.focusNode||
this.checkBox.domNode).setAttribute("data-composite-primary-id",this.get("id"));this.focusNode.setAttribute("role","menuitemcheckbox")},startup:function(){this.inherited(arguments);this.checkBox.startup()},_onClick:function(){this.inherited(arguments);this.checkBox.set("checked",this.get("checked"))},_emitClickEvent:function(){this.emit("click",{mwEventData:{checked:!this.get("checked")},_dojo_click:!0})}})})},"mw-form/CheckBox":function(){define("dojo/_base/declare dojo/on dijit/_WidgetBase dijit/_Contained dijit/_CssStateMixin dijit/_FocusMixin dijit/_TemplatedMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/DisabledMixin mw-form/mixins/property/CheckedMixin mw-form/mixins/property/DescriptionMixin mw-form/mixins/property/SizeMixin mw-form/mixins/property/TextMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/property/ValidationMixin mw-form/mixins/event/ChangeEventMixin mw-form/mixins/CheckBoxRadioButtonTextSizingMixin mw-form/mixins/PreventSelectionMixin mw-form/mixins/mixinDependencyValidator mw-form/mixins/AriaLabelledByMixin dojo/text!./templates/CheckBox.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w){return k(x.validate([g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,v]),{baseClass:"mwWidget mwCheckBox",templateString:w,postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",this._handleKeydown.bind(this)),d(this.domNode,"keyup",this._handleKeyup.bind(this)))},_handleKeydown:function(a){32===a.keyCode&&a.preventDefault()},_handleKeyup:function(a){32===a.keyCode&&(this.get("disabled")||a.target.click())}})})},"mw-form/mixins/property/CheckedMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on","mw-form/mixins/event/ChangeEventMixin"],function(k,d,g,a){k=k(null,{checked:!1,checkableNode:null,_treatAsUserEvent:!0,postCreate:function(){this.get("checkableNode")||this.set("checkableNode",this.domNode);this.inherited(arguments);this.domNode.classList.add("mwCheckedMixin");this.own(g(this.get("checkableNode"),"click",d.hitch(this,"_onClick")))},_setCheckedAttr:function(a,d){this._treatAsUserEvent=d;this._set("checked",a);this._setAriaPressed();this._setAriaChecked();
this.baseClass.split(" ").forEach(function(b){a?this.domNode.classList.add(b+"Checked"):this.domNode.classList.remove(b+"Checked")},this)},_setCheckableNodeAttr:function(a){this.checkableNode=a||this.domNode},_setAriaPressed:function(){var a=this.buttonNode||this.focusNode||this.domNode;a.hasAttribute("aria-pressed")&&a.setAttribute("aria-pressed",this.get("checked"))},_setAriaChecked:function(){var a=this.focusNode?this.focusNode:this.domNode;a.hasAttribute("aria-checked")&&a.setAttribute("aria-checked",
this.get("checked"))},_onClick:function(){var a=this.get("checked"),d=!this.get("checked");this.set("checked",d,!0);this._triggerChangeEvent("checked",a,d)}});k._dependencies=[{mixin:a,orderDependent:!1}];return k})},"mw-form/mixins/event/ChangeEventMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(k,d){return k(null,{_triggerChangeEvent:function(d,a,b){this.emit("change",{mwEventData:{propertyName:d,oldValue:a,newValue:b}})},_qeTypeOverWithEnter:function(d){var a=this.get("value");
this.set("value",d);this._triggerChangeEvent("value",a,d)},postCreate:function(){this.inherited(arguments);this.own(this.on("change",d.hitch(this,function(d){d.preventDefault();d.mwEventData||(d.stopPropagation(),this._triggerChangeEvent("checked",!this.get("checked"),this.get("checked")))})))}})})},"mw-form/mixins/property/ValidationMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/mouse dojo/dom-geometry dojo/dom-construct dojo/on dojo/_base/window dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(k,d,g,a,b,l,f,h,c){var e=k([h,c],{templateString:'\x3cdiv class\x3d"mwValidationTooltipDialog"\x3e\x3cdiv class\x3d"mwArrowNode" data-dojo-attach-point\x3d"arrowNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"mwContentsNode" data-dojo-attach-point\x3d"contentsNode"\x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',_setTextAttr:function(a){this.textNode.textContent=
a;this._set("text",a)}}),m=["error","warning","normal"];return k(null,{warningText:"",errorText:"",validationState:"normal",_setErrorTextAttr:function(a){if("string"!==typeof a)throw Error("errorText property expects a 'string'!");this.validationTooltip&&"error"===this.get("validationState")&&(this.validationTooltip.set("text",a),""===a?this.validationTooltip.domNode.style.visibility="hidden":this.validationTooltip.domNode.classList.contains("mwValidationFocused")&&(this.validationTooltip.domNode.style.visibility=
"visible"));this._set("errorText",a)},_setWarningTextAttr:function(a){if("string"!==typeof a)throw Error("warningText property expects a 'string'!");this.validationTooltip&&"warning"===this.get("validationState")&&(this.validationTooltip.set("text",a),""===a?this.validationTooltip.domNode.style.visibility="hidden":this.validationTooltip.domNode.classList.contains("mwValidationFocused")&&(this.validationTooltip.domNode.style.visibility="visible"));this._set("warningText",a)},_setValidationStateAttr:function(a){if("string"!==
typeof a)throw Error("validationState property expects a 'string'!");if(-1===m.indexOf(a.toLowerCase()))throw Error("validationState property expects the value to be 'normal', 'error' or 'warning'!");this._set("validationState",a);var b=!1,c=!1;"error"===a.toLowerCase()?(c=!0,this._createValidationTooltip(),this.validationTooltip.set("text",this.get("errorText"))):"warning"===a.toLowerCase()&&(b=!0,this._createValidationTooltip(),this.validationTooltip.set("text",this.get("warningText")));this.validationTooltip&&
(this.domNode.classList.contains("mwWidgetFocused")&&(this.validationTooltip.domNode.classList.add("mwValidationFocused"),this._placeTooltip()),c?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):(this._getDomNodeForValidationClasses().classList.remove("mwValidationError"),this.validationTooltip.domNode.classList.remove("mwErrorTooltip")),b?this.validationTooltip.domNode.classList.add("mwWarningTooltip"):this.validationTooltip.domNode.classList.remove("mwWarningTooltip"),
"normal"===a.toLowerCase()||this._isEmptyErrorText()||this._isEmptyWarningText())&&(this.validationTooltip.domNode.style.visibility="hidden")},_isEmptyErrorText:function(){return"error"===this.get("validationState")&&""===this.get("errorText")},_isEmptyWarningText:function(){return"warning"===this.get("validationState")&&""===this.get("warningText")},_createValidationTooltip:function(){this.validationTooltip||(this.validationTooltip=new e,this.validationTooltip.startup(),this.own(this.validationTooltip),
this._addTooltipEvents())},_flipDomOrder:function(a){var c=a.children[1];b.place(a.children[0],b.place(c,a),"after");b.place(c.children[0],b.place(c.children[1],c),"after")},_tooltipOrientation:function(){return this.validationTooltip.domNode.classList.contains("mwTooltipLeft")?"left":"right"},_getDomNodeForValidationClasses:function(){return this.domNode},_placeTooltip:function(){if(this.validationTooltip&&("error"===this.validationState||"warning"===this.validationState)){b.place(this.validationTooltip.domNode,
f.body());var c=a.position(this.domNode),d=!1;var e=c.x;var h=c.y;var g=c.w;"error"===this.validationState?(this._getDomNodeForValidationClasses().classList.add("mwValidationError"),this.validationTooltip.set("text",this.errorText),this.validationTooltip.domNode.classList.add("mwErrorTooltip")):"warning"===this.validationState&&(this.validationTooltip.set("text",this.warningText),this.validationTooltip.domNode.classList.add("mwWarningTooltip"));if("error"===this.get("validationState")&&""!==this.get("errorText")||
"warning"===this.get("validationState")&&""!==this.get("warningText"))this.validationTooltip.domNode.style.visibility="visible";var l=a.position(this.validationTooltip.domNode).h/2;var k=a.position(this.domNode).h/2;c=this.validationTooltip.domNode;var m=a.position(f.body()).w;var v=this._calculateTooltipWidth();var w=(document.documentElement||document.body.parentNode||document.body).scrollTop;e+g+v>m?(d=!0,e=e-v+"px",h=h+k-l+w+"px",c.children[0].classList.contains("mwArrowNode")&&this._flipDomOrder(c)):
(e=e+g+"px",h=h+k-l+w+"px");d?(this.validationTooltip.domNode.classList.add("mwTooltipLeft"),this.validationTooltip.domNode.classList.remove("mwTooltipRight")):(this.validationTooltip.domNode.classList.remove("mwTooltipLeft"),this.validationTooltip.domNode.classList.add("mwTooltipRight"));this.validationTooltip.domNode.style.left=e;this.validationTooltip.domNode.style.top=h}},_calculateTooltipWidth:function(){this.validationTooltip.domNode.classList.add("mwTooltipLeft");var b=a.position(this.validationTooltip.domNode).w;
this.validationTooltip.domNode.classList.remove("mwTooltipLeft");return b},_addTooltipEvents:function(){this.own(l(this,g.enter,d.hitch(this,function(){this._placeTooltip()})),l(this,g.leave,d.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.style.visibility="hidden")})),l(this.focusNode,"focus",d.hitch(this,function(){this._placeTooltip();this.validationTooltip&&("error"===this.get("validationState")||"warning"===this.get("validationState"))&&this.validationTooltip.domNode.classList.add("mwValidationFocused")})),
l(this.focusNode,"blur",d.hitch(this,function(){this.validationTooltip&&(this.validationTooltip.domNode.classList.remove("mwValidationFocused"),this.validationTooltip.domNode.style.visibility="hidden")})))}})})},"mw-form/mixins/CheckBoxRadioButtonTextSizingMixin":function(){define(["dojo/_base/declare","dojo/dom-geometry"],function(k,d){return k(null,{_setWidthAttr:function(){this.inherited(arguments);if(this._started)if("auto"===this.get("width"))this.textNode.style.width="auto";else if("100%"===
this.get("width"))this.textNode.style.width="100%";else{var g=d.position(this.checkBoxRadioIconNode),a=d.getMarginExtents(this.textNode);this.textNode.style.width=this.width-(g.w+a.l)+"px"}}})})},"mw-form/mixins/property/CloseMenuOnClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/popup"],function(k,d,g,a){return k(null,{closeMenuOnClick:!1,postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"change",d.hitch(this,"_onChange")));this.domNode.classList.add("mwCloseMenuOnClickMixin");
this.set("closeMenuOnClick",this.get("closeMenuOnClick"))},_setCloseMenuOnClickAttr:function(a){if("boolean"!==typeof a)throw Error("'closeMenuOnClick' property expects a Boolean!");this._set("closeMenuOnClick",a);a?this.domNode.classList.add("mwClosePopupOnClick"):this.domNode.classList.remove("mwClosePopupOnClick")},_onChange:function(){this.get("closeMenuOnClick")&&(a.close(),this.emit("closeRequest"))}})})},"mw-form/mixins/property/ShortcutMixin":function(){define(["dojo/_base/declare","mw-event-utils/platformize",
"mw-form/mixins/property/DescriptionMixin"],function(k,d,g){k=k(null,{shortcut:"",platformizeShortcut:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShortcutMixin");this.set("shortcut",this.get("shortcut"))},_setShortcutAttr:function(a){if("string"!==typeof a)throw Error("'shortcut' property expects a literal string!");this._updateShortcut(a);this._set("shortcut",a)},_updateShortcut:function(a){this.shortcutKeyNode?(this.shortcutKeyNode.textContent=this._getPlatformizedShortcut(a),
!1===this.get("showShortcut")?this.domNode.classList.add("mwHideShortcut"):""===a?this.domNode.classList.add("mwHideShortcut"):this.domNode.classList.remove("mwHideShortcut")):this._updateTitle(this._getPlatformizedShortcut(a),!0)},_getPlatformizedShortcut:function(a){return this.get("platformizeShortcut")?d.getPlatformSpecificString(a):a},_setPlatformizeShortcutAttr:function(a){if("boolean"!==typeof a)throw Error("'platformizeShortcut' property expects a boolean value!");this._set("platformizeShortcut",
a);this._updateShortcut(this.get("shortcut"))}});k._dependencies=[{mixin:g,orderDependent:!0,type:"shortcut"}];return k})},"mw-form/mixins/property/ShowDescriptionMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{showDescription:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowDescriptionMixin")},_setShowDescriptionAttr:function(d){if("boolean"!==typeof d)throw Error("'showDescription' property expects a Boolean!");!1===d?this.domNode.classList.add("mwHideDescription"):
this.descriptionNode&&""===this.descriptionNode.textContent?this.domNode.classList.add("mwHideDescription"):this.domNode.classList.remove("mwHideDescription");this._set("showDescription",d)}})})},"mw-form/mixins/property/ShowTextMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{showText:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowTextMixin")},_setShowTextAttr:function(d){if("boolean"!==typeof d)throw Error("'showText' property expects a Boolean!");
d?this.domNode.classList.remove("mwHideText"):this.domNode.classList.add("mwHideText");this._set("showText",d)}})})},"mw-form/mixins/property/ShowShortcutMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,{showShortcut:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowShortcutMixin")},_setShowShortcutAttr:function(d){if("boolean"!==typeof d)throw Error("'showShortcut' property expects a Boolean!");!1===d?this.domNode.classList.add("mwHideShortcut"):
this.shortcutNode&&""===this.shortcutNode.textContent?this.domNode.classList.add("mwHideShortcut"):this.domNode.classList.remove("mwHideShortcut");this._set("showShortcut",d)}})})},"mw-form/mixins/SingleLineTextMixin":function(){define(["dojo/_base/declare","mw-form/mixins/property/TextMixin"],function(k,d){k=k(null,{_getTextForDOM:function(d){d=this.inherited(arguments);return d=d.replace(/\n/g," ")}});k._dependencies=[{mixin:d,orderDependent:!0}];return k})},"mw-form/mixins/FocusableMenuChildMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom dojo/on dojo/mouse dojo/touch dijit/focus dijit/registry mw-dom-utils/domUtils".split(" "),
function(k,d,g,a,b,l,f,h,c,e){return k(null,{postCreate:function(){this.inherited(arguments);var a=g("touch")&&!window.PointerEvent;this.own(b(this.domNode,"click",d.hitch(this,"_onMouseClick")),b(this.domNode,a?f.release:"mouseup",d.hitch(this,"_onMouseUp")),b(this.domNode,l.enter,d.hitch(this,"_onMouseEnter")),b(this.domNode,"focusout",d.hitch(this,"_focusLost")));this.domNode.classList.add("mwFocusableMenuChildMixin")},_focusLost:function(b){setTimeout(d.hitch(this,function(){var d,f=e.parseFocusEvent(b).gainedFocusNode,
h=c.getEnclosingWidget(f);if(h&&(d=h.focusNode&&h.focusNode instanceof Element?h.focusNode:h.domNode)&&d.hasAttribute("data-composite-child")&&(h=c.getEnclosingWidget(a.byId(d.getAttribute("data-composite-primary-id"))),h===this))return;this!==h&&(d=this.getParentWidget(),(null==h||e.isFocusable(f))&&d&&d._focusChange&&d._focusChange(h),this.focusLost&&this.focusLost(h))}),0)},_onMouseClick:function(a){a.mwEventData?(this.focus(),this.closeMenuOnClick&&this._requestClose(!1)):(a.preventDefault(),
a.stopImmediatePropagation())},_onMouseEnter:function(a){this.focusNode&&!0!==this.get("disabled")&&e.isFocusable(this.focusNode)&&this.focus()},_onMouseUp:function(a){a.target.classList.contains("allowDefaultActions")||a.preventDefault();this.getParentWidget()&&!0===this.getParentWidget()._mouseDownTriggered||!e.isFocusable(this.focusNode)||this._emitClickEvent&&(e.isLeftMouseButton(a)||"dojotouchend"===a.type)&&this._emitClickEvent(a)},_requestClose:function(a){var b=this.getParentWidget();null!=
b&&b.closeRequest&&(b._closeEventData?b._closeEventData.mwEventData?b._closeEventData.mwEventData.gainedFocusWidget=null:b._closeEventData.mwEventData={gainedFocusWidget:null}:b._closeEventData={mwEventData:{gainedFocusWidget:null}},b.closeRequest(a?a:!1))},focus:function(){this.inherited(arguments);e.isFocusable(this.focusNode)&&(h.focus(this.focusNode||this.domNode),(this.focusNode||this.domNode).focus())},getParentWidget:function(a){if(null==a)if(this.domNode)a=this.domNode;else return null;a.domNode&&
(a=a.domNode);if(a.parentNode)a=e.getParent(a);else return null;return c.getEnclosingWidget(a)}})})},"mw-form/mixins/MenuChildResizeMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(k,d){var g="icon text shortcut description showIcon showText showShortcut showDescription".split(" ");return k(null,{postCreate:function(){this.inherited(arguments);this.watch(d.hitch(this,function(a,b,d){-1<g.indexOf(a)&&("icon"!==a||this._getIconType(d)!==this._iconTypes.DATA_URI)&&this.emit("updatelayout")}));
this.domNode.classList.add("mwMenuChildResizeMixin")}})})},"mw-form/mixins/MenuItemTextColorMixin":function(){define(["dojo/_base/declare","mw-form/mixins/property/DescriptionMixin","mw-form/mixins/property/ShowDescriptionMixin"],function(k,d,g){k=k(null,{_setDescriptionAttr:function(a){this.inherited(arguments);""!==a?this.textNode.classList.add("mwBlueText"):this.textNode.classList.remove("mwBlueText")},_setShowDescriptionAttr:function(a){this.inherited(arguments);a?this.textNode.classList.add("mwBlueText"):
this.textNode.classList.remove("mwBlueText")},postCreate:function(){this.inherited(arguments);(this.get("showDescription")&&""===this.get("description")||!this.get("showDescription")&&""!==this.get("description"))&&this.textNode.classList.remove("mwBlueText")}});k._dependencies=[{mixin:d,orderDependent:!0},{mixin:g,orderDependent:!0}];return k})},"mw-form/mixins/AccessibilityClickMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/keys"],function(k,d,g,a){return k(null,
{postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",d.hitch(this,function(b){b.keyCode===a.SPACE&&-1===Array.prototype.slice.call(this.domNode.classList).indexOf("mwComboBox")&&b.preventDefault();setTimeout(d.hitch(this,function(){if(!0!==this.get("disabled"))switch(b.keyCode){case a.ENTER:this._emitClickEvent(b);break;case a.SPACE:this._emitClickEvent(b)}}),0)})));this.own(g(this.domNode,"keyup",d.hitch(this,function(b){var d=b.keyCode===a.ENTER||b.keyCode===a.SPACE,
f=/input|button|textarea/i.test(b.target.nodeName);d&&!f&&b.stopPropagation()})))},_emitClickEvent:function(a){g.emit(a.target,"click",{bubbles:!0,cancelable:!0,mwEventData:{keyCode:a.keyCode},_dojo_click:!0})},_qeClick:function(){this.emit("click")}})})},"mw-form/mixins/MenuItemAriaLabelledByMixin":function(){define(["dojo/_base/declare","mw-form/mixins/property/TextMixin","mw-form/mixins/property/DescriptionMixin","mw-form/mixins/property/ShortcutMixin"],function(k,d,g,a){k=k(null,{postCreate:function(){this.inherited(arguments);
var a=this.id+"_textNodeId",d=this.id+"_descriptionNodeId",f=this.id+"_shortcutKeyNodeId",h=this.textNode.querySelector(".mwTextLine");h||(h=this.textNode);h.setAttribute("id",a);this.descriptionNode&&this.descriptionNode.setAttribute("id",d);this.shortcutKeyNode.setAttribute("id",f);this.focusNode.setAttribute("aria-labelledby",a+" "+d+" "+f)}});k._dependencies=[{mixin:d,orderDependent:!1},{mixin:g,orderDependent:!1},{mixin:a,orderDependent:!1}];return k})},"mw-form/Menu":function(){define("dojo/_base/declare dijit/focus dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container mw-form/mixins/MenuKeyNavMixin mw-form/mixins/OnOpenMixin mw-form/mixins/OnCloseMixin mw-form/mixins/ContainerFocusMixin mw-form/mixins/MenuFocusMixin mw-form/mixins/property/MaxHeightMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/DestroyedMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/Menu.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r){return k(t.validate([g,l,a,b,n,f,h,c,e,m,q,p]),{baseClass:"mwWidget mwMenu",templateString:r,_defaultContextMenuBlocker:function(a){a.preventDefault()},_getTargetNode:function(a){a.hasAttribute("data-composite-child")&&(a=document.getElementById(a.getAttribute("data-composite-primary-id")));return a},isMenuOpen:function(){return this.domNode&&this.domNode.parentElement?"none"!==this.domNode.parentElement.style.display:!1}})})},"mw-form/mixins/property/DestroyedMixin":function(){define(["dojo/_base/declare"],
function(k){return k(null,{_destroyed:!1,destroy:function(){this._set("_destroyed",!0);this.inherited(arguments)},isDestroyed:function(){return this.get("_destroyed")}})})},"mw-form/MenuItem":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/mixins/MenuItemTextColorMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/CloseMenuOnClickMixin mw-form/mixins/property/DescriptionMixin mw-form/mixins/property/DisabledMixin mw-form/mixins/property/IconMixin mw-form/mixins/property/ShortcutMixin mw-form/mixins/property/ShowDescriptionMixin mw-form/mixins/property/ShowIconMixin mw-form/mixins/property/ShowTextMixin mw-form/mixins/property/ShowShortcutMixin mw-form/mixins/property/TextMixin mw-form/mixins/SingleLineTextMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/AccessibilityClickMixin mw-form/mixins/PreventSelectionMixin mw-form/mixins/FocusableMenuChildMixin mw-form/mixins/MenuChildResizeMixin mw-form/mixins/MenuItemAriaLabelledByMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/MenuItem.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A,z,D,E,B,C){return k(B.validate([d,g,a,b,l,h,c,e,m,n,q,p,t,r,u,y,x,v,f,w,A,z,D,E]),{baseClass:"mwWidget mwSharedMenuItem mwMenuItem",templateString:C,closeMenuOnClick:!0,_emitClickEvent:function(a){this.emit("click",{mwEventData:{value:this.get("text"),details:a&&a.keyCode?{keyCode:a.keyCode}:{}},_dojo_click:!0})},_qeClick:function(){this._emitClickEvent()}})})},"mw-form/mixins/property/ShowIconMixin":function(){define(["dojo/_base/declare"],function(k){return k(null,
{showIcon:!0,postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwShowIconMixin")},_setShowIconAttr:function(d){if("boolean"!==typeof d)throw Error("'showIcon' property expects a Boolean!");d?this.domNode.classList.remove("mwHideIcon"):this.domNode.classList.add("mwHideIcon");this._set("showIcon",d)}})})},"mw-form/MenuSeparator":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/PreventFocusMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/MenuSeparator.html".split(" "),
function(k,d,g,a,b,l,f,h,c){return k(h.validate([d,g,a,b,l,f]),{baseClass:"mwWidget mwMenuSeparator",templateString:c})})},"mw-form/mixins/PreventFocusMixin":function(){define(["dojo/_base/declare","dojo/on"],function(k,d){return k(null,{postCreate:function(){this.inherited(arguments);this._getNonFocusableNodes().forEach(function(g){d(g,"mousedown",function(a){a.target.classList.contains("allowDefaultActions")||a.preventDefault()})})},_getNonFocusableNodes:function(){return[this.domNode]}})})},"mw-form/PopupMenuItem":function(){define("dojo/_base/declare dijit/focus dojo/on dojo/keys dojo/dom-geometry dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_CssStateMixin dijit/_Contained dijit/_FocusMixin mw-form/mixins/OnOpenMixin mw-form/mixins/OnCloseMixin mw-form/mixins/property/TagMixin mw-form/mixins/property/CloseMenuOnClickMixin mw-form/mixins/property/DescriptionMixin mw-form/mixins/property/DisabledMixin mw-form/mixins/property/MenuMixin mw-form/mixins/property/HasDynamicMenuMixin mw-form/mixins/property/IconMixin mw-form/mixins/property/ShortcutMixin mw-form/mixins/property/ShowDescriptionMixin mw-form/mixins/property/ShowIconMixin mw-form/mixins/property/ShowTextMixin mw-form/mixins/property/ShowShortcutMixin mw-form/mixins/property/TextMixin mw-form/mixins/SingleLineTextMixin mw-form/mixins/property/VisualFamilyMixin mw-form/mixins/FocusableMenuChildMixin mw-form/mixins/MenuChildResizeMixin mw-form/mixins/MenuItemTextColorMixin mw-form/mixins/PreventSelectionMixin mw-form/mixins/MenuItemAriaLabelledByMixin mw-form/mixins/mixinDependencyValidator dojo/text!./templates/PopupMenuItem.html".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q,p,t,r,u,y,x,v,w,A,z,D,E,B,C,G,I,N,L,J,O,F,ba){return k(F.validate([f,h,c,e,m,n,q,p,t,r,u,y,I,x,v,w,A,z,D,E,B,C,G,L,J,N,O]),{baseClass:"mwWidget mwSharedMenuItem mwPopupMenuItem",templateString:ba,_focusSubMenuOnOpen:!1,menuOrientation:"horizontal",keyPressButtons:"right_arrow_a11y",postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",l.hitch(this,"_handleRightArrow")))},_setFocusSubMenuOnOpenAttr:function(a){if("boolean"!==typeof a)throw Error("'doFocus' argument expects a boolean value.");
this._set("_focusSubMenuOnOpen",a)},_emitClickEvent:function(){this.emit("click",{mwEventData:{value:this.get("text")},_dojo_click:!0})},focusLost:function(a){this.get("menu")&&this.get("menu").isDescendant&&!this.get("menu").isDescendant(a,this.get("menu"))&&(this.get("menu")._closeEventData?this.get("menu")._closeEventData.mwEventData?this.get("menu")._closeEventData.mwEventData.gainedFocusWidget=a:this.get("menu")._closeEventData.mwEventData={gainedFocusWidget:a}:this.get("menu")._closeEventData=
{mwEventData:{gainedFocusWidget:a}},this.closeMenu(!1))},focus:function(){this.inherited(arguments);this.get("disabled")||this.openMenu()},_handleRightArrow:function(b){b.keyCode===a.RIGHT_ARROW&&(this.isMenuOpen()?this.get("menu").focusFirst():(this.set("_focusSubMenuOnOpen",!0),this.openMenu()))},_showMenu:function(){var a=this.get("menu");null===a||this._doNotOpen||this.isMenuOpen()||(a._leftArrowListener=g(a.domNode,"keydown",l.hitch(a,this._handleLeftArrow)),a._menuCloseListener=g(a.domNode,
"close",l.hitch(a,this._handleCloseMenu)),a._storeFocusOnOpen=a.get("_focusOnOpen"),a._storeOnOpen=a.onOpen,a._storeMatchMinWidthToInvokingWidget=a.get("_matchMinWidthToInvokingWidget"),a.set("_focusOnOpen",this.get("_focusSubMenuOnOpen")),a.onOpen=this.onOpen,a._matchMinWidthToInvokingWidget=!1,a.domNode.classList.add("mwPopupMenuItemPopup"),this.inherited(arguments))},_handleCloseMenu:function(a){if(a&&a.mwEventData&&a.mwEventData.hasOwnProperty("gainedFocusWidget")&&this._invokingWidget&&this._invokingWidget.getParentWidget){var b=
this._invokingWidget.getParentWidget();a=a.mwEventData.gainedFocusWidget;b.isInvokingWidget(a)||b.isDescendant(a,b)||(this._leftArrowListener&&this._leftArrowListener.remove(),this._menuCloseListener&&this._menuCloseListener.remove(),delete this._leftArrowListener,delete this._menuCloseListener,this._focusOnOpen=this._storeFocusOnOpen,this.onOpen=this._storeOnOpen,this._matchMinWidthToInvokingWidget=this._storeMatchMinWidthToInvokingWidget,this.domNode.classList.remove("mwPopupMenuItemPopup"),b._focusChange(a))}},
_handleLeftArrow:function(b){b.keyCode===a.LEFT_ARROW&&(this._doNotOpen=!0,this._invokingWidget.focus(),this._doNotOpen=!1)},onOpen:function(){this.inherited(arguments);this._emitOpenEvent();this._updateLayout();b.position(this.domNode).x>b.position(this._invokingWidget.domNode).x?(this.domNode.classList.add("mwPopupMenuItemPopupRight"),this.domNode.classList.remove("mwPopupMenuItemPopupleft"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentLeft")):
(this.domNode.classList.add("mwPopupMenuItemPopupLeft"),this.domNode.classList.remove("mwPopupMenuItemPopupRight"),this.domNode.parentElement.classList.remove("mwPopupMenuItemParentRight"),this.domNode.parentElement.classList.add("mwPopupMenuItemParentLeft"));this.domNode.parentElement.classList.add("mwPopupMenuItemParent");0<this.getChildren().length&&this._focusOnOpen&&this.focusFirst&&(this._storeFocus=this.focus,this.focus=function(){this.focusFirst();this.focus=this._storeFocus;delete this._storeFocus});
this._invokingWidget.set("_focusSubMenuOnOpen",!1)},_closeMenuOnParentClick:function(){return!1},_updateWidth:function(){}})})},"mw-form/mixins/property/MenuMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-geometry dojo/has dojo/keys dojo/on dojo/touch dijit/focus dijit/popup dijit/Viewport dijit/_WidgetBase mw-ddux/UsageLogger".split(" "),function(k,d,g,a,b,l,f,h,c,e,m,n,q,p){var t={left:[0],center:[1],right:[2],all:[0,1,2],none:[]},r=function(a){if(!0===
a.synthetic&&window.syn&&-1!==a.type.indexOf("mouse"))switch(a.button){case window.syn.mouse.browser.left[a.type].button:return 0;case window.syn.mouse.browser.right[a.type].button:return 2;default:return 1}else return a.button},u={down_arrow:[f.DOWN_ARROW],right_arrow:[f.RIGHT_ARROW],left_arrow:[f.LEFT_ARROW],up_arrow:[f.UP_ARROW],enter:[f.ENTER],space:[f.SPACE],a11y:[f.ENTER,f.SPACE],down_arrow_a11y:[f.DOWN_ARROW,f.ENTER,f.SPACE],right_arrow_a11y:[f.RIGHT_ARROW,f.ENTER,f.SPACE],left_arrow_a11y:[f.LEFT_ARROW,
f.ENTER,f.SPACE],up_arrow_a11y:[f.UP_ARROW,f.ENTER,f.SPACE],none:[]},y={below:["below","below-alt","below-centered"],vertical:"below below-alt above above-alt below-centered above-centered".split(" "),horizontal:["after","before","after-centered","before-centered"]};return k(null,{menu:null,menuNode:null,aroundNode:null,_clickButtons:t.left,_keyPressButtons:u.a11y,_menuOrientation:y.vertical,_setMenuAttr:function(a){this._validateMenuAttr(a);this._set("menu",a)},_validateMenuAttr:function(a){if(null!==
a&&!(a instanceof q))throw Error("'menu' property expects a widget");},_setMenuNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'menuNode' property expects a DOM node.");a?this._set("menuNode",a):this._set("menuNode",this.focusNode||this.domNode)},_setAroundNodeAttr:function(a){if(!(a instanceof HTMLElement))throw Error("'aroundNode' property expects a DOM node.");a?this._set("aroundNode",a):this._set("aroundNode",this.domNode)},_setClickButtonsAttr:function(a){if("string"!==typeof a||
-1===t.hasOwnProperty(a))throw Error("'clickButtons' property expects one of these values: "+Object.keys(t));this._set("_clickButtons",t[a])},_setKeyPressButtonsAttr:function(a){if("string"!==typeof a||-1===u.hasOwnProperty(a))throw Error("'keyPressButtons' property expects one of these values: "+Object.keys(u));this._set("_keyPressButtons",u[a])},_setMenuOrientationAttr:function(a){if("string"!==typeof a||-1===y.hasOwnProperty(a))throw Error("'menuOrientation' property expects one of these values: "+
Object.keys(y));this._set("_menuOrientation",y[a])},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwMenuMixin");this.menuNode=this.menuNode||this.focusNode||this.domNode;this.aroundNode=this.aroundNode||this.domNode;var a=l("touch")&&!window.PointerEvent;var b=l("touch")&&window.PointerEvent;this.own(h(this.menuNode,a?c.press:b?"pointerdown":"mousedown",d.hitch(this,"_onPress")),h(this.menuNode,"mousedown",d.hitch(this,"_onMouseDown")),h(this.menuNode,"keydown",d.hitch(this,
"_onKeyDown")),h(this.menuNode,"keyup",d.hitch(this,"_onKeyUp")),h(this.domNode,"click",d.hitch(this,"_onMouseClick")),this.watch("disabled",d.hitch(this,function(a,b,c){c&&this._handleClosingPopup(!1)})));this._handleCloseOnEscape=function(a){a.keyCode===f.ESCAPE&&(this.domNode.classList.contains("mwFocusableMenuChildMixin")?(a=this.getParent(),this.closeMenu(!1),a._closeEventData={mwEventData:{gainedFocusWidget:null}},a.closeRequest(!1)):this.closeMenu(!0))}.bind(this)},_onPress:function(a){var b=
-1<this._clickButtons.indexOf(r(a))||"touchstart"===a.type,c=!this.isMenuOpen()||this._closeMenuOnParentClick();this.get("menu")&&(this.get("menu")._lastPressEvent=a);b&&c?(this.get("menu")&&(this.get("menu")._mouseDownTriggered=!0,setTimeout(d.hitch(this,function(){this.get("menu")&&"_mouseDownTriggered"in this.get("menu")&&delete this.get("menu")._mouseDownTriggered}),300)),this.isMenuOpen()||(b={eventType:a&&a.keyStroke?"keypress":"click",elementId:this.tag,elementType:"drop_down"},a&&a.keyStroke&&
(b.keyStroke=a.keyStroke),p.logEvent(b,this.domNode)),this.toggleMenu(a.target)):this.isMenuOpen()&&(a.preventDefault(),a.stopImmediatePropagation())},_onMouseDown:function(a){this.inherited(arguments);var b=this.get("menu")&&"_mouseDownTriggered"in this.get("menu"),c=this.get("menu")&&"_lastPressEvent"in this.get("menu")&&"touchstart"===this.get("menu")._lastPressEvent.type;if(this.isMenuOpen()||b&&c)a.preventDefault(),a.stopImmediatePropagation()},_onMouseClick:function(b){this.get("menu")&&"_mouseDownTriggered"in
this.get("menu")&&delete this.get("menu")._mouseDownTriggered;this.inherited(arguments);a.isDescendant(b.target,this.menuNode)&&b.stopImmediatePropagation()},_onKeyDown:function(a){this.inherited(arguments);if(!this.get("disabled")||this.get("dropDownNeverDisabled"))a.keyCode===f.ESCAPE?(this.domNode.classList.contains("mwFocusableMenuChildMixin")?this.closeMenu(!1):this.closeMenu(!0),this._setAriaExpanded()):-1<this._keyPressButtons.indexOf(a.keyCode)&&(!this.isMenuOpen()||this._closeMenuOnParentClick()&&
this.isMenuOpen())&&(this._toggleOnKeyUp=!0)},_onKeyUp:function(a){this.inherited(arguments);this._toggleOnKeyUp&&(delete this._toggleOnKeyUp,this.isMenuOpen()&&!this.closeMenuOnClick||this.toggleMenu(a.target))},_onBlur:function(){!this.isMenuOpen()||this.get("menu")._invokingWidget!==this||this.get("menu").domNode.classList.contains("mwMenu")||this.get("menu").domNode.classList.contains("mwSectionPopup")||this.get("menu").domNode.classList.contains("galleryPopup")||(a.isDescendant(document.activeElement,
this.domNode)?this.closeMenu(!0):this.closeMenu(!1),this._setAriaExpanded());this.inherited(arguments)},_qeDropDownClick:function(){this.toggleMenu()},toggleMenu:function(b){b=b||this.menuNode;b=b.domNode||b;a.isDescendant(b,this.menuNode)&&(this.isMenuOpen()?this.closeMenu(!0):this.openMenu(),this._setAriaExpanded())},_setAriaExpanded:function(){setTimeout(function(){var a=this.focusNode||this.domNode;a&&a.setAttribute("aria-expanded",this.isMenuOpen())}.bind(this),0)},openMenu:function(){this._showMenu()},
_showMenu:function(){null!=this.get("menu")&&(setTimeout(d.hitch(this,function(){var a,c=this;if(null!=c.get("menu")){if(null==this.aroundNode)var d=a=0;"_invokingWidget"in this.get("menu")&&this.get("menu")._invokingWidget&&(this.get("menu")._lastInvokingWidget=this.get("menu")._invokingWidget);this.get("menu")._invokingWidget=this;this.domNode.classList.add("mwHasMenuOpened");this.get("menu")._onPositionListener=g.around(b,"position",function(a){return function(b,c){var d="ontouchstart"in window||
navigator.maxTouchPoints,e=document.body.clientWidth>window.innerWidth;return c&&d&&e?a(b,!1):a(b,c)}});this.get("menu").domNode.addEventListener("keydown",this._handleCloseOnEscape);this.get("menu").own(this.get("menu")._onPositionListener);this.get("menu").beforeOpen&&this.get("menu").beforeOpen();m.open({parent:this,popup:c.get("menu"),x:a,y:d,around:c.aroundNode,orient:c._menuOrientation,maxHeight:c.get("maxHeight"),onClose:function(){c.get("menu")&&"_lastInvokingWidget"in c.get("menu")?(null!=
c.get("menu")._lastInvokingWidget&&c._cleanUpAfterClose(c,!0),delete c.get("menu")._lastInvokingWidget):c._cleanUpAfterClose(c,!1);c.get("menu")&&"_onPositionListener"in c.get("menu")&&(c.get("menu")._onPositionListener.remove(),delete c.get("menu")._onPositionListener);c.get("menu")&&c.get("menu").domNode&&c.get("menu").domNode.removeEventListener("keydown",c._handleCloseOnEscape)}});this.hasListItemWithPopupAction&&this.get("menu").focus&&this.get("menu").focus();var e=c.own(h(n,"resize",function(){c.getParentWidget?
c.closeMenu(!1):c.closeMenu(!0);e.length?[].slice.call(e).forEach(function(a){a.remove()}):e.remove()}))}}),0),this._setAriaExpanded())},closeMenu:function(a){var b=this._handleClosingPopup(a);this._handleFocusOnClose(a,b);this._setAriaExpanded()},_handleClosingPopup:function(a){if(!this.isMenuOpen()){if(this.get("menu"))return this.get("menu")._closeEventData}else if(this.get("menu")){this.get("menu").getChildren().forEach(function(b){"menu"in b&&b.isMenuOpen()&&(b.get("menu")._closeEventData=this._closeEventData,
b.closeMenu(a))},this);var b=this.get("menu")._closeEventData;m.close(this.get("menu"));return b}},_handleFocusOnClose:function(a,b){!0===a?this.focus?this.focus():e.focus(this.focusNode||this.domNode):b&&"mwEventData"in b&&"gainedFocusWidget"in b.mwEventData&&b.mwEventData.gainedFocusWidget?e.focus(b.mwEventData.gainedFocusWidget.focusNode||b.mwEventData.gainedFocusWidget.domNode):e.focus(document.body)},startup:function(){if(!this._started){if(!this.get("menu")&&this.srcNodeRef){var a=query("[widgetId]",
this.srcNodeRef)[0];a&&this.set("menu",registry.byNode(a))}this.get("menu")&&m.hide(this.get("menu"));this.inherited(arguments)}},destroy:function(){this.isMenuOpen()&&this.closeMenu(!0);this.inherited(arguments)},_closeMenuOnParentClick:function(){return!0},_cleanUpAfterClose:function(a,b){!b&&a.get("menu")&&delete a.get("menu")._invokingWidget;a.domNode&&a.domNode.classList.remove("mwHasMenuOpened")},isMenuOpen:function(){return this.get("menu")&&this.get("menu")._invokingWidget&&this.get("menu")._invokingWidget===
this&&this.get("menu").domNode&&this.get("menu").domNode.parentElement&&this.get("menu").domNode.parentElement.classList.contains("dijitPopup")?"none"!==this.get("menu").domNode.parentElement.style.display:!1}})})},"mw-ddux/UsageLogger":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred mw-ddux/WidgetLogger mw-log/Log mw-messageservice/MessageService mw-utils/Utils".split(" "),function(k,d,g,a,b,l,f){var h,c,e,m,n,q,p,t,r,u,y,x,v,w=0,A=[],z={},D=[],E;return{start:function(b,g,k){y||
("string"===typeof b?(t=b,r=g,u=k,n=b,q=g,p=void 0,h=b,c=g,m=e=void 0):(t=b.product,r=b.scope||b.appComponent,u=b.allowProductScopeOverride,n=b.product,q=b.appComponent||b.scope,p=b.eventKey,h=b.product,c=b.appComponent||b.scope,e=b.artifactType,m=b.artifactId),a.setup(u,d.hitch(this,"logEvent")),y=!0,x="/UsageData/"+f.generateUuid(),v="/UsageResponse/"+f.generateUuid(),l.publish("/UsageSetup",{type:"start",product:t,scope:r,channel:x,responseChannel:v}),l.subscribe(v,"_handleResponse",this))},stop:function(){y&&
(l.publish("/UsageSetup",{type:"stop",channel:x,responseChannel:v}),l.unsubscribe(v,"_handleResponse",this),y=!1)},isRunning:function(){return y},logEvent:function(a,c,d){if(y)if(b.assert(a.eventType,"eventType must be defined"),a.elementType&&!a.elementId)b.warn("Can't log "+a.elementType+" "+a.eventType+" without elementId");else{a.product=t;a.scope=r;var e=this,f=function(){try{e._filterElementId(a),E&&"keypress"===a.eventType&&(a.selection=E),a.messageType="uiEvent",e._sendLogMessage(a)}catch(L){b.warn("Error while logging event: "+
L.message)}};d||c?f():setTimeout(f,0)}},setSelectedContext:function(a){E=a},setPrefixesOfElementIdsToRedact:function(a,b,c){z[this._productAndScopeKey(b||t,c||r)]=a},enableLoggingFromNode:function(b,c){a.enableLoggingFromNode(b,c)},logData:function(a,b,c){this._sendLogMessage(this._composeTelemetryMessage(a,b,c))},logDataObtainResult:function(a,b,c){a=this._composeTelemetryMessage(a,b,c);a.responseSequence=w++;b=new g;b.responseSequence=a.responseSequence;A.push(b);this._sendLogMessage(a);return b.promise},
logComposition:function(a,d,f){a=a||{};a={messageType:"composition",product:a.product||h,appComponent:a.appComponent||c,artifactType:a.artifactType||e,artifactId:a.artifactId||m,properties:d,componentCounts:f};b.assert(a.product,"product must be defined");b.assert(a.appComponent,"appComponent must be defined");b.assert(a.artifactType,"artifactType must be defined");b.assert(a.artifactId,"artifactId must be defined");this._sendLogMessage(a)},addTap:function(a,b,c){var d={matchProperties:a,tapFunction:b,
blockDefault:c};D.push(d);return{remove:function(){var a=D.indexOf(d);0<=a&&D.splice(a,1)}}},removeTap:function(a,b){for(var c=0;c<D.length;c++){var d=D[c];if(d.tapFunction===b){var e=Object.keys(a),f=Object.keys(d.matchProperties),h=e.length===f.length;for(f=0;f<e.legnth&&h;f++)h=e[f],h=a[h]===d.matchProperties[h];h&&(D.splice(c,1),c--)}}},_filterElementId:function(a){var b=z[this._productAndScopeKey(a.product||t,a.scope||r)];if(b){var c;for(c=0;c<b.length;c++){var d=b[c];if(a.elementId.startsWith(d)){b=
a.elementId.slice(d.length);a.elementId=d+":redacted";0<b.length&&(d=b.charAt(0),":"===d||"."===d?a.redactedHash=this.hashString(b):/\D/.test(b)||(a.redactedHash=b));break}}}},_productAndScopeKey:function(a,b){return a+":"+b},hashString:function(a){for(var b=0,c=0;c<a.length;c++)b+=Math.pow(31*a.charCodeAt(c),a.length-c),b&=b;return Math.abs(b).toString(16)},_composeTelemetryMessage:function(a,c,d){c=c||{};a={messageType:"telemetry",product:c.product||n,appComponent:c.appComponent||q,eventKey:c.eventKey||
p,data:a};d&&(a.verifyParametersOnly=d.verifyParametersOnly);b.assert(a.product,"product must be defined");b.assert(a.appComponent,"appComponent must be defined");b.assert(a.eventKey,"eventKey must be defined");return a},_sendLogMessage:function(a){var b=!1;D.forEach(function(c){for(var d=Object.keys(c.matchProperties),e=!0,f=0;f<d.length&&e;f++)e=d[f],e=c.matchProperties[e]===a[e];e&&(c.tapFunction(a),c.blockDefault&&(b=!0))});b||l.publish(x,a)},_handleResponse:function(a){for(var b=a.data.responseSequence;0<
A.length;){var c=A.shift();if(c.responseSequence===b){"telemetryStatus"===a.data.messageType&&c.resolve(a.data.status);break}else c.reject()}}}})},"mw-ddux/WidgetLogger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom","dojo/on","dijit/registry"],function(k,d,g,a,b){var l,f,h={CheckBox:["click"],ColorPickerButton:["change"],ComboBox:["dropdownclick","change"],DropDownButton:["dropdownclick"],GalleryPopupButton:["click"],GalleryItem:["click"],HorizontalSlider:["change"],List:["change"],
ListItem:["click"],ListItemWithCheckBox:["click"],ListItemWithRadioButton:["click"],ListItemWithTextField:["change","click"],ListItemWithPopup:[],PopupList:[],PushButton:["click"],QABPushButton:["click"],QABDropDownButton:["dropdownclick"],QABSplitButton:["click","dropdownclick"],QABToggleButton:["click"],QABToggleSplitButton:["click","dropdownclick"],RadioButton:["click"],Spinner:["change"],SplitButton:["click","dropdownclick"],ToolstripTab:["click"],TextArea:["change"],TextField:["change"],ToggleButton:["click"],
ToggleGalleryItem:["click"],ToggleSplitButton:["click","dropdownclick"]},c="mwPushButton mwDropDownButton mwMenuItem mwPopupMenuItem mwSplitButton mwToggleButton mwToggleSplitButton mwComboBox mwCheckBox mwRadioButton mwSpinner mwGalleryItem mwToggleGalleryItem mwTextField mwTextArea mwCheckBoxMenuItem mwRadioButtonMenuItem mwTextFieldMenuItem mwListBox mwColorPickerButton mwGridPickerButton".split(" ");return{setup:function(a,b){_uiEventDefaults=a;l=b},logEvent:function(a,b,c){var e=this,f=function(){if(b){attributes=
e._getLoggingAttributes(b);if(attributes.enabled)delete attributes.enabled;else return;d.mixin(a,attributes)}l(a,void 0,!0)};c?f():setTimeout(f,0)},enableLoggingFromNode:function(a,b){this._addLoggingAttributes(a,{subscope:b,enabled:!0});f||(this._addListeners(),f=!0)},disableLoggingFromNode:function(a){this._addLoggingAttributes(a,{enabled:!1})},overrideProductAndScope:function(a,b,c){this._addLoggingAttributes(a,{product:b,scope:c})},_addListeners:function(){var b=this,c=!1;window.addEventListener("click",
function(a){c||(c=!0,b._logDomEvent(a,"click"),setTimeout(function(){c=!1},0))},!0);a(window,"change",function(a){b._logDomEvent(a,"change")});a(window,"dropdownclick",function(a){b._logDomEvent(a,"dropdownclick")})},_addLoggingAttributes:function(a,b){var c=b,e=a.getAttribute("data-usage-logging");e&&(c=JSON.parse(e),d.mixin(c,b));a.setAttribute("data-usage-logging",JSON.stringify(c))},_getLoggingAttributes:function(a){var b=this._getPopupInvoker(a);b&&(a=b);for(b={};a&&void 0===b.enabled;){var c=
a.getAttribute?a.getAttribute("data-usage-logging"):void 0;c&&(c=JSON.parse(c),!b.product&&c.product&&(b.product=c.product),!b.scope&&c.scope&&(b.scope=c.scope),!b.subscope&&c.subscope&&(b.subscope=c.subscope),b.enabled||void 0===c.enabled||(b.enabled=c.enabled));a=a.parentNode}return b},_logDomEvent:function(a,c){var d=this._getNodeInfoFromEvent(a);if(d&&this._isEventOfInterest(d.type,c)){c={eventType:a.keyStroke?"keypress":"click",elementId:d.tag,elementType:this._translateElementType(d.type)};
if("GalleryItem"===c.elementType||"ToggleGalleryItem"===c.elementType){var e=b.getEnclosingWidget(d.node);e&&(c.elementType="icon_view"===e.displayState?"button":"list_item")}a.keyStroke&&(c.keyStroke=a.keyStroke);this.logEvent(c,d.node)}},_getNodeInfoFromEvent:function(a){for(a=a.target;a&&a.getAttribute;){var b=a.getAttribute("data-tag");if(b){var c=a.getAttribute("data-type");c||(c=this._getWidgetTypeFromCss(a));if(c)break}a=a.parentNode}return a?{node:a,tag:b,type:c}:null},_getWidgetTypeFromCss:function(a){a=
a.classList;if(a.contains("mwWidget"))for(var b=0;b<c.length;b++){var d=c[b];if(a.contains(d))return d.substring(2)}return null},_isEventOfInterest:function(a,b){return(a=h[a])&&0<=a.indexOf(b)},_getPopupInvoker:function(a){for(;a&&a.classList;){if(a.classList.contains("dijitPopup")){if(a=a.getAttribute("dijitPopupParent"))return(a=g.byId(a))&&a.classList&&a.classList.contains("mwPopupMenuItem")?this._getPopupInvoker(a):a;break}a=a.parentNode}return null},_translateElementType:function(a){switch(a){case "ColorPickerButton":case "GridPickerButton":case "PushButton":case "SplitButton":case "ToggleButton":case "RadioButton":case "CheckBox":case "ToggleSplitButton":case "QABPushButton":case "QABSplitButton":case "QABToggleButton":case "QABToggleSplitButton":a=
"button";break;case "DropDownButton":case "GalleryPopupButton":case "QABDropDownButton":a="drop_down";break;case "ListItem":case "ListItemWithCheckBox":case "ListItemWithTextField":case "ListItemWithRadioButton":a="list_item";break;case "ComboBox":a="combo_box";break;case "HorizontalSlider":a="slider";break;case "Spinner":a="spinner";break;case "TextField":a="text_field";break;case "TextArea":a="text_area";break;case "ToolstripTab":a="toolstrip_tab"}return a}}})},"mw-form/mixins/property/HasDynamicMenuMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","mw-form/mixins/property/MenuMixin"],function(k,d,g){k=k(null,{hasDynamicMenu:!1,_setHasDynamicMenuAttr:function(a){this._set("hasDynamicMenu",a)},postCreate:function(){this.inherited(arguments);this.domNode.classList.add("mwHasDynamicMenuMixin");this.set("hasDynamicMenu",this.get("hasDynamicMenu"))},openMenu:function(){var a=this.get("menu");a&&a.focusNode&&a.focusNode.setAttribute("aria-labelledby",this.get("id"));this.get("hasDynamicMenu")?this._shouldDropDownClickEventBeFired(a)&&
this.emit("dropdownclick",{}):this._showMenu()},_shouldDropDownClickEventBeFired:function(a){return a&&a.isMenuOpen&&a.isMenuOpen()&&a._invokingWidget&&a._invokingWidget.get("id")===this.get("id")?!1:!0},showMenu:function(){this._showMenu();var a=this.menu.on("updatelayout",d.hitch(this.menu,function(){this._updateLayout&&this._updateLayout()})),b=this.menu.on("close",function(){a.remove();b.remove()})}});k._dependencies=[{mixin:g,orderDependent:!0}];return k})},"mw-filebrowser/actions/keyboard/KeyboardActionsBuilder":function(){define(["dojo/_base/lang",
"dojo/aspect","mw-keybindings/BindingUtils","mw-keybindings/DefaultKeys"],function(k,d,g,a){function b(a){var b=a.hasAltKey?"Alt_":"";b+=a.hasCtrlKey?"Ctrl_":"";b+=a.hasMetaKey?"Meta_":"";b+=a.hasShiftKey?"Shift_":"";return b+=a.keyCode||""}function l(a){var b=a.altKey?"Alt_":"";b+=a.ctrlKey?"Ctrl_":"";b+=a.metaKey?"Meta_":"";b+=a.shiftKey?"Shift_":"";return b+=a.keyCode}var f={};return{setNavigationKeyBindings:function(b,c){b.grid.addKeyHandler(a.LEFT_ARROW,k.hitch(b.grid,"moveFocusLeft"));b.grid.addKeyHandler(a.RIGHT_ARROW,
k.hitch(b.grid,"moveFocusRight"));b.grid.addKeyHandler(a.LEFT_ARROW,k.hitch(b.grid,"moveFocusLeft"),!0);b.grid.addKeyHandler(a.RIGHT_ARROW,k.hitch(b.grid,"moveFocusRight"),!0);b.grid.on("keydown",function(a){var d=l(a);c.getActions().then(function(c){!f.hasOwnProperty(d)||a.target.type&&"text"===a.target.type||(f[d].executeAction(a),b.setShouldGiveFocusBackToDgrid(!0))})})},updateActionsKeyBindings:function(a,c){this.clearActionsKeyBindings();a.forEach(function(a){if(a.supportsKeyBinding){var d;void 0!==
c[a.id]?d=c[a.id]:a.keyCode&&(d=[a.keyCode]);if(d=d&&g.getKeyBindingData(d))d=b(d),f[d]={executeAction:function(b){b.preventDefault();b.stopPropagation();a.callback()}}}})},clearActionsKeyBindings:function(){f={}}}})},"mw-filebrowser/columns/ColumnHiderContextMenuBuilder":function(){define(["mw-form/CheckBoxMenuItem"],function(k){var d=function(d){var a=[];d.getColumns().forEach(function(b){b.unhidable||a.push(b)});return a};return{buildContextMenu:function(g,a,b,l){g.destroyDescendants();d(a).forEach(function(a){a=
new k({closeMenuOnClick:!0,checked:!a.hidden,text:a.label,id:a.id});g.addChild(a);a.startup();a.on("change",function(a){a=a.currentTarget.id;l(a,b.isColumnHidden(a))})})}}})},"mw-filebrowser/grid/draganddrop/FileBrowserGridDnDSource":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/NodeList dojo/dom-class dojo/has dojo/topic dojo/dnd/Manager dojo/dnd/Source dojo/has!touch?dgrid/util/touch mw-dnd/DnDUtils mw-filename-utils/FileNameUtil ./FileBrowserGridDnDAvatar".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n,q){return k(c,{manager:h.manager(),hoveredTarget:[],folderTimeout:[],_updateUiDroppableState:function(){if(this.manager.target){var a=this.getTargetFolderInfo(),b=n.normalizePath(n.pathFromFileInfo(a));if(!n.isWritable(a))return!1;var c=!0,d=!1,e=!1;this.manager.nodes.forEach(function(a){a=this.getObject(a);var f=n.normalizePath(n.pathFromFileInfo(a)),h=n.normalizePath(a.location);b===h&&(d=!0);a.isDirectory&&0===b.indexOf(f)&&(e=!0);a.isParentWritable&&(c=!1)},this);
c&&(this.manager.copy=!0);d||e?(this.manager.canDrop(!1),this.removeHighlightTargetNode()):(this.manager.canDrop(!0),this.highlightTargetNode(this.grid.row(a).element))}},onFilesDrop:function(a,b,c){},getTargetRow:function(){var a=this._targetAnchor=this.targetAnchor,b=this.grid;return a&&b.row(a)},getHoveredFolderInfo:function(){var a=this.grid.store,b=this.getTargetRow(),c;b&&(c=a.get(b.id));return c},getTargetFolderInfo:function(){var a=this.grid,b=a.store,c=this.getHoveredFolderInfo();if(!c||
!c.isDirectory&&c.parent===a.getCurrentFolderPath())c=a.getCurrentFolderInfo();c.isDirectory||(c=b.get(c.parent));return c},highlightTargetNode:function(a){this.removeHighlightTargetNode();a&&(b.add(a,"isDnDTarget"),this.previousTargetRowNode=a)},removeHighlightTargetNode:function(){this.previousTargetRowNode&&(b.remove(this.previousTargetRowNode,"isDnDTarget"),this.previousTargetRowNode=null)},getObject:function(a){var b=this.grid;return b._trackError(function(){var c=b.store.get(a.id.slice(b.id.length+
5)),d=b.store.get(c.parent);d=void 0===d?!0:n.isWritable(d);return g.mixin({isParentWritable:d},c)})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},constructor:function(){m.registerMakeAvatar(this,function(){return new q(h.manager())})},onDndCancel:function(){this.inherited(arguments);this.removeHighlightTargetNode()},onDrop:function(a,b,c){var d=this.getTargetFolderInfo();if(this===a)this.onDropInternal(b,c,d)},onDropInternal:function(a,b,c){var e=this,
f=[];a.forEach(function(a){d.when(e.getObject(a),function(a){f.push(a)})});this.onFilesDrop(f,c,b)},onDndStart:function(a){var b=this;this._dragStarted=!0;this.inherited(arguments);a===this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),this.manager.nodes.forEach(function(c){c=a.getObject(c);n.isUserPublishedDirectoryPath(c.path)&&(b.manager.canDrop(!1),b.manager.stopDrag(),f.publish("/dnd/cancel"))}))},onMouseDown:function(a){function b(b){return!c.grid.isSelected(c.grid.row(b.target))&&
!(a.target.classList.contains("dgrid-cell-data")||a.target.classList.contains("iconOverlay")||a.target.classList.contains("dgrid-expando-icon"))&&0===b.button}var c=this;(function(){return l("touch")&&this.isDragging&&1<e.countCurrentTouches(a,this.grid.touchNode)})()||b(a)||this.inherited(arguments)},onMouseUp:function(a){this.dragHappened=!1;this._dragStarted&&(this.dragHappened=!0);this._dragStarted=!1;this.inherited(arguments)},onMouseMove:function(a){if(!l("touch")||1>=e.countCurrentTouches(a,
this.grid.touchNode))if(this.inherited(arguments),this.isDragging){this._updateUiDroppableState();var b=this.getHoveredFolderInfo();b&&this._expandDirectory(b,400)}},checkAcceptance:function(a,b){return a.getObject&&c.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){var b=new a,c;for(c in this.grid.selection)b.push(this._selectedNodes[c]);return b},_markDndStatus:function(){this.inherited(arguments);this._updateUiDroppableState()},_expandDirectory:function(a,b){if(this.hoveredTarget!=
a){clearTimeout(this.folderTimeout);this.hoveredTarget=a;var c=this.grid,d=c.row(a);this.folderTimeout=setTimeout(function(){c.expand(d,!0)},b)}}})})},"mw-dnd/DnDUtils":function(){define(["dojo/_base/declare","dojo/aspect","dojo/dnd/Manager","mw-utils/Utils"],function(k,d,g,a){var b={},l=function(a){var d=-1;Object.keys(b).some(function(c,e,f){return b[c].dndSource===a?(d=c,!0):!1});return d};d.around(g.manager(),"makeAvatar",function(a){return function(){var d=g.manager(),c;!1===Object.keys(b).some(function(a,
f,h){return b[a].dndSource===d.source?(c=b[a].makeAvatarFunc.call(d),!0):!1})&&(c=a.call(d));return c}});return{registerMakeAvatar:function(d,h){var c=l(d);-1===c&&(c=a.generateUuid());b[c]={dndSource:d,makeAvatarFunc:h}},unregisterMakeAvatar:function(a){a=l(a);-1!==a&&delete b[a]},destroy:function(a){a&&a.remove()}}})},"mw-filebrowser/grid/draganddrop/FileBrowserGridDnDAvatar":function(){define("dojo/_base/declare dojo/dnd/Avatar dojo/dom-attr dojo/dom-construct dojo/hccss dojo/i18n!../../l10n/nls/FileBrowserResources dojo/string".split(" "),
function(k,d,g,a,b,l,f){return k([d],{construct:function(){var d=a.create("table",{"class":"fileBrowserGridDnDAvatar dojoDndAvatar"});d.style.zIndex=25;var c=a.create("tbody",null,d);c=a.create("tr",null,c);var e=a.create("td",null,c);b("highcontrast")&&a.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},e);a.create("span",{innerHTML:this.manager.source.generateText?this._generateText():""},e);g.set(c,{"class":"dojoDndAvatarHeader"});this.node=d},_generateText:function(){return this.manager.copy?
f.substitute(l.dndCopyMessage,[this.manager.nodes.length.toString()]):f.substitute(l.dndMoveMessage,[this.manager.nodes.length.toString()])}})})},"mw-filebrowser/grid/workarounds/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has dgrid/util/misc put-selector/put dojo/_base/html xstyle/css!dgrid/css/extensions/ColumnResizer.css".split(" "),function(k,d,g,a,b,l,f,h,c){function e(a){for(var b=a.length,c=b,d=a[0].length,e=Array(b);b--;)e[b]=
Array(d);var f={};for(b=0;b<c;b++)for(var h=e[b],g=a[b],k=0,l=0;k<d;k++){var m=g[l];if("undefined"===typeof h[k]){h[k]=m.id;if(m.rowSpan&&1<m.rowSpan){var n=e;for(var p=m.rowSpan,q=b,r=k,t=m.id,J=1;J<p;J++)n[q+J][r]=t}if(0<b&&m.colSpan&&1<m.colSpan)for(n=1;n<m.colSpan;n++)if(h[++k]=m.id,m.rowSpan&&1<m.rowSpan){p=e;q=m.rowSpan;r=b;t=k;J=m.id;for(var O=1;O<q;O++)p[r+O][t]=J}f[m.id]=a[0][k].id;l++}}return f}function m(a,b,c,e,f){if(!(0>=c)){var g=a.columns[b];if(g){var k={grid:a,columnId:b,width:c,bubbles:!0,
cancelable:!0};e&&(k.parentType=e);if(!a._resizedColumns||d.emit(a.headerNode,"dgrid-columnresize",k))return"auto"===c?delete g.width:(g.width=c,c+="px"),(e=a._columnSizes[b])?e.set("width",c):e=h.addCssRule("#"+h.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=e,!1!==f&&a.resize(),!0}}}var n,q,p=0,t={create:function(){n=c("div.dgrid-column-resizer");q=c("div.dgrid-resize-guard")},destroy:function(){c(n,"!");c(q,"!");n=q=null},show:function(a){var b=
l.position(a.domNode,!0);n.style.top=b.y+"px";n.style.height=b.h+"px";c(document.body,n);c(a.domNode,q)},move:function(a){n.style.left=a+"px"},hide:function(){n.parentNode.removeChild(n);q.parentNode.removeChild(q)}};return k(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);p++||t.create()},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--p||t.destroy()},resizeColumnWidth:function(a,
b){return m(this,a,b)},configStructure:function(){var b=this._oldColumnSizes=a.mixin({},this._columnSizes),c;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(c in b)c in this._columnSizes||b[c].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=h.addCssRule("#"+h.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(b,"-"),"width: "+
a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);var b=this;if(this.columnSets&&this.columnSets.length)for(var k=this.columnSets.length;k--;)var l=a.mixin(l||{},e(this.columnSets[k]));else this.subRows&&1<this.subRows.length&&(l=e(this.subRows));k=g(".dgrid-cell",b.headerNode);for(var m=k.length;m--;){var n=k[m],p=n.columnId,q=b.columns[p],z=n.childNodes;if(q&&!1!==q.resizable){q=c("div.dgrid-resize-header-container");for(n.contents=q;0<z.length;)c(q,z[0]);
c(n,q,"div.dgrid-resize-handle.resizeNode-"+h.escapeCssIdentifier(p,"-")).columnId=l&&l[p]||p}}b.mouseMoveListen||(d(b.headerNode,".dgrid-resize-handle:mousedown"+(f("touch")?",.dgrid-resize-handle:touchstart":""),function(a){b._resizeMouseDown(a,this);b.mouseMoveListen.resume();b.mouseUpListen.resume()}),b._listeners.push(b.mouseMoveListen=d.pausable(document,"mousemove"+(f("touch")?",touchmove":""),h.throttleDelayed(function(a){b._updateResizerPosition(a)}))),b._listeners.push(b.mouseUpListen=d.pausable(document,
"mouseup"+(f("touch")?",touchend":""),function(a){b._resizeMouseUp(a);b.mouseMoveListen.pause();b.mouseUpListen.pause()})),b.mouseMoveListen.pause(),b.mouseUpListen.pause())},_resizeMouseDown:function(a,c){a.preventDefault();b.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=g(".dgrid-column-"+h.escapeCssIdentifier(c.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);t.show(this)},_resizeMouseUp:function(a){var c=this._columnSizes,d;this.adjustLastColumn&&
(d=this.headerNode.clientWidth-1);if(!this._resizedColumns){var e=g(".dgrid-cell",this.headerNode);this.columnSets&&this.columnSets.length?e=e.filter(function(a){return"0"===a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(e=e.filter(function(a){return"0"===a.columnId.charAt(0)&&!(a.columnId in c)}));var f=e.map(function(a){return a.offsetWidth});e.forEach(function(a,b){m(this,a.columnId,f[b],null,!1)},this);this._resizedColumns=!0}b.setSelectable(this.domNode,
!0);e=this._targetCell;var k=this._getResizeMouseLocation(a)-this._startX,l=e.offsetWidth+k,n=this._getResizedColumnWidths(),p=n.totalWidth;n=n.lastColId;var q=g(".dgrid-column-"+h.escapeCssIdentifier(n,"-"),this.headerNode)[0].offsetWidth;l<this.minWidth&&(l=this.minWidth);m(this,e.columnId,l,a.type)&&e.columnId!==n&&this.adjustLastColumn&&(p+k<d?m(this,n,"auto",a.type):q-k<=this.minWidth&&m(this,n,this.minWidth,a.type));t.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){a=
this._getResizeMouseLocation(a);var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&(c=this._startX-(b-this.minWidth));t.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=g((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=
b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"mw-filebrowser/grid/FileBrowserSortProperty":function(){define(["dojo/_base/declare"],function(k){k=k(null,{setFBSortProperties:function(d,a,b){this._compareFunction=d;this._fbSort=[{attribute:a,descending:b}]},getFBCompareFunction:function(){return this._compareFunction},getFBSortArray:function(){return this._fbSort},isFBSortDescending:function(){return this._fbSort[0].descending}});if(!d)var d=new k;return d})},"mw-filebrowser/grid/GridHelper":function(){define(["dojo/_base/declare",
"dojo/has","mw-filename-utils/FileNameUtil","./FileBrowserSortProperty"],function(k,d,g,a){function b(a){return d("mac")&&a.ctrlKey&&0===a.button}return k(null,{clearRemovedFocus:function(){delete this._removedFocus},getSelectedFilePaths:function(){var a=Object.keys(this.selection);return a=0<a.length?a:[]},getSelectedFileInfos:function(){var a=[],b=this;this.getSelectedFilePaths().forEach(function(d){a.push(b.row(d).data)});return a},setCurrentFolderInfo:function(a){this.currentFolderInfo=a},getCurrentFolderInfo:function(){return this.currentFolderInfo},
getCurrentFolderPath:function(){return this.getCurrentFolderInfo()?g.pathFromFileInfo(this.getCurrentFolderInfo()):""},down:function(a,b,d){if(a)return this.inherited(arguments);var c=document.getElementsByClassName("dgrid-row")[0];return this.row(c)},moveFocusRight:function(a){var b=this.row(a)?this.row(a):this._focusedNode;this._expanded[b.id]?(b=this.down(this._focusedNode,1,!0),this.focus(b,!1,a)):(this.expand(b,!0),this.focus(b))},moveFocusLeft:function(a){var b=this.row(a)?this.row(a):this._focusedNode;
this._expanded[b.id]?(this.expand(b,!1),this.focus(b)):(b=this.row(b.data.parent),this.focus(b,!1,a))},updateSortArrow:function(b,d){b=a.getFBSortArray();this.inherited(arguments)},_customSelectionHandler:function(a,d){setTimeout(function(){if("dgrid-cellfocusin"===a.type&&1<this.getSelectedFilePaths().length&&!a.keyCode){for(var f=0;f<this.getSelectedFileInfos().length;f++){var c=this.row(this.getSelectedFileInfos()[f]);this.select(c,null,!0)}this.select(d,null,!0)}else!a.target.classList.contains("dgrid-cell")||
2!==a.button&&!b(a)||d.classList.contains("dgrid-selected")?this.isSelected(d)&&b(a)||this._extendedSelectionHandler(a,d):this.clearSelection()}.bind(this),0)},_focusOnNode:function(a,b,d){d&&d.target.classList.contains("dgrid-cell")&&!d.target.classList.contains("dgrid-selected")&&2===d.button||this.inherited(arguments)}})})},"fileiconprovider-js/FileIconProvider":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented mw-remote/Remote mw-filename-utils/FileNameUtil mw-messageservice/MessageService".split(" "),
function(k,d,g,a,b,l,f){var h="m exe lnk app bat mlx".split(" ");return k([a],{constructor:function(a){this._pendingReq={};f.subscribe("/matlab/fileIconProviderChannel",this._responseHandler,this)},stop:function(){this._pendingReq=void 0;f.unSubscribe("/matlab/fileIconProviderChannel",this._responseHandler,this)},_createPendingRequestObj:function(a){var b=l.pathFromFileInfo(a);if(a.isDirectory)return{key:b,shouldCache:!1,isDirectory:!0};a=l.getFileNameExtension(l.nameFromPath(b));return-1!==h.indexOf(a)?
{key:b,shouldCache:!1,isDirectory:!1}:""===a?{key:"DefaultFile",shouldCache:!0,isDirectory:!1}:{key:a,shouldCache:!0,isDirectory:!1}},_publishAndReturnPendingReq:function(a,b){var c=l.pathFromFileInfo(a),d=new g;this._pendingReq[b.key]={defer:d,shouldCache:b.shouldCache,fileType:a.type};f.publish("/matlab/fileIconProviderChannel",{request:"getIconInfo",filePath:c,key:b.key});return d.promise},getIconData:function(a){var b=this._createPendingRequestObj(a);return this._pendingReq[b.key]?this._pendingReq[b.key].defer.promise:
this._publishAndReturnPendingReq(a,b)},_responseHandler:function(a){"iconInfo"===a.data.identifier&&this._resolveIconInformation(a.data.data)},_resolveIconInformation:function(a){var b=this._pendingReq[a.key];if(b){if(b.shouldCache){var c=this._getCssClassName(b.fileType,b.key,b.isDirectory);this._createStyleTagAndStoreInDataCache(a,b);a={fileType:a.fileType,iconData:a.iconData,iconClass:c}}else a={fileType:a.fileType,iconData:a.iconData},this._pendingReq[b.key]=void 0;b.defer.resolve(a)}},_createStyleTagAndStoreInDataCache:function(a,
b){var c=this._getFileIconProviderNode(),d=this._getCssSelector(b.fileType,b.key,b.isDirectory);b.defer.isResolved()||(b=document.createElement("style"),b.type="text/css",b.innerHTML=d+("{background-image:url('"+a.iconData+"'); background-repeat:no-repeat; background-position-x: 0px;}"),c.appendChild(b))},_getFileIconProviderNode:function(){var a=document.getElementById("fileIconProviderNode");null===a&&(a=document.createElement("div"),a.id="fileIconProviderNode",document.body.appendChild(a));return a},
_getCssSelector:function(a,b,d){return"Folder"===a&&d?".fileIcon.motwFolder":"File"===a&&""===b?".fileIcon.motwFileTypeDefault":".fileIcon.motwFileType"+a.split(" ").join("_").replace(/[^\w\s]/gi,"")},_getCssClassName:function(a,b,d){return"Folder"===a&&d?"fileIcon motwFolder":"File"===a&&""===b?"fileIcon motwFileTypeDefault":"fileIcon motwFileType"+a.split(" ").join("_").replace(/[^\w\s]/gi,"")}})})},"filechooser-ui/columns/ColumnRegistry":function(){define("mw-filebrowser/columns/FileBrowserColumnRegistry mw-filebrowser/columns/NameColumn mw-filebrowser/columns/SizeColumn mw-filebrowser/columns/DateModifiedColumn mw-filebrowser/columns/TypeColumn require".split(" "),
function(k,d,g,a,b){return{getRegistry:function(l){var f=new k;f.addColumn(new d({id:"fcNameColumnID",fileIconProvider:l.fileIconProvider}));f.addColumn(new g({id:"fcSizeColumnID"}));f.addColumn(new a({id:"fcDMColumnID"}));f.addColumn(new b({id:"fcTypeColumnID"}));return f}}})},"mw-filebrowser/columns/FileBrowserColumnRegistry":function(){define(["dojo/_base/declare"],function(k){return k(null,{_columnsMap:null,constructor:function(){this._columnsMap=[]},addColumn:function(d){this._columnsMap.push(d.column)},
getColumns:function(){return this._columnsMap},getColumn:function(d){return this.getColumns().filter(function(g){return g.field===d})[0]},getCompareFunction:function(d,g){var a=this.getColumn(d);if(a.sort)return function(b,d){return a.sort(b,d)*(g?-1:1)}}})})},"mw-filebrowser/columns/NameColumn":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/i18n!../l10n/nls/FileBrowserResources dgrid/editor ../grid/workarounds/tree dijit/form/ValidationTextBox ./helpers/FileIconUtils ./helpers/NameComparator mw-filename-utils/FileNameUtil".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m){return k([],{constructor:function(k){k=k||{};k.sharingManager&&(this._sharingManager=k.sharingManager,this._sharingManager.sharingService&&a(this._sharingManager.sharingService,"updatedShareInfo",d.hitch(this,this._handleUpdateShareInfo),!0));k.fileIconProvider&&(this._fileIconProvider=k.fileIconProvider);this.column=f(l({id:k.id||"nameColumn",_sharingManager:k.sharingManager,_fileIconProvider:k.fileIconProvider,label:b.name,field:"name",renderHeaderCell:function(a){var c=
document.createElement("div");c.className="columnHeaderLabel";var d=document.createTextNode(b.name);c.appendChild(d);a.appendChild(c)},renderCell:function(a,b,d,e){b=document.createElement("span");b.className="dgrid-cell-data";if("group"!==a.type){var f=document.createElement("span");f.id="fileIcon-"+a.path.replace(":","");f.className="fileIcon ";this._fileIconProvider&&!a.isDirectory?this._fileIconProvider.getIconData(a).then(function(b){b.iconClass?f.className=a.isDirectory?f.className+c.getIconClass(a,
this.grid._expanded[a.path]):f.className+b.iconClass:f.style.backgroundImage="url('"+b.iconData+"')"}.bind(this)):f.className+=c.getIconClass(a,this.grid._expanded[m.pathFromFileInfo(a)]);var h=document.createElement("span");h.className="iconOverlay ";f.appendChild(h)}d=document.createTextNode(a.name);b.appendChild(d);"group"===a.type&&g.add(b,"group");if(d=c.getInfoLabel(a))e=document.createElement("span"),e.className="infoLabel",e.innerText=d,b.appendChild(e);this._sharingManager&&a.isDirectory&&
!a.isGroupHeader&&(this._sharingManager.sharingService?(d=this._sharingManager.sharingService.getShareInfo(m.pathFromFileInfo(a)),!d.pending&&0<d.consumers.items.length&&g.add(h,"folderShared")):a.isDirectory&&this._sharingManager.sharingDataService.getSharingInfo(a).then(function(a){a.isShared&&g.add(h,"folderShared")}.bind(this)));return{celldata:b,icon:f}},shouldExpand:function(a,b,c){return"group"===a.data.type?!0:c},canEdit:function(a){return a&&!a.isGroupHeader},expandOn:".dgrid-expando-icon:click",
editor:h,editorArgs:{style:"float:right;",trim:!0,required:!0},editOn:"renameEvent",sortable:!0,sort:function(a,b){return a.isDirectory||b.isDirectory?e.separateFoldersFromFiles(a,b):e.caseSensitiveStringComparator(a.name,b.name)},unhidable:!0,reorderable:!1,setSharedOverlayIcon:c.setSharedOverlayIcon,setNodeClassName:function(a,b){var d=c.getIconNodeFromRow(a);d&&d.hasOwnProperty("className")&&(d.className=c.getIconClass(a.data,b))}}))},_handleUpdateShareInfo:function(a){var b=a.shareInfo;(a=this.column.grid.row(a.path))&&
(0<b.consumers.items.length?this.column.setSharedOverlayIcon(!0,a):this.column.setSharedOverlayIcon(!1,a))}})})},"dgrid/editor":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/on dojo/aspect dojo/has dojo/query dojo/when ./Grid put-selector/put dojo/_base/sniff".split(" "),function(k,d,g,a,b,l,f,h,c,e,m){function n(a,b){a.value=b;if("radio"==a.type||"checkbox"==a.type)a.checked=a.defaultChecked=!!b}function q(a,b){"number"==typeof b?a=isNaN(a)?a:parseFloat(a):
"boolean"==typeof b?a="true"==a?!0:"false"==a?!1:a:b instanceof Date&&(b=new Date(a),a=isNaN(b.getTime())?a:b);return a}function p(a,b){return"function"==typeof b.get?q(b.get("value")):q(b["checkbox"==b.type||"radio"==b.type?"checked":"value"])}function t(a,c,d,e,f){if((d&&d.valueOf())!=(e&&e.valueOf())){var h=c.element;var g=c.row;var k=c.column;if(k.field&&g)if(c={grid:a,cell:c,rowId:g.id,oldValue:d,value:e,bubbles:!0,cancelable:!0},f&&f.type&&(c.parentType=f.type),b.emit(h,"dgrid-datachange",c))a.updateDirty?
(a.updateDirty(g.id,k.field,e),k.autoSave&&setTimeout(function(){a._trackError("save")},0)):g.data[k.field]=e;else{var l;(l=h.widget)?(l._dgridIgnoreChange=!0,l.set("value",d),setTimeout(function(){l._dgridIgnoreChange=!1},0)):(l=h.input)&&n(l,d);return d}}return e}function r(a,b,c){var d=a.cell(b.domNode||b),e=d.column,f;var g=a._activeCell;if(!b.isValid||b.isValid())if(c=t(a,d,g?a._activeValue:b._dgridLastValue,p(e,b),c),g?a._activeValue=c:b._dgridLastValue=c,"radio"===b.type&&b.name&&!e.editOn&&
e.field)for(f in g=a.row(b),h("input[type\x3dradio][name\x3d"+b.name+"]",a.contentNode).forEach(function(c){var d=a.row(c);c!==b&&c._dgridLastValue&&(c._dgridLastValue=!1,a.updateDirty?a.updateDirty(d.id,e.field,!1):d.data[e.field]=!1)}),a.dirty)g.id!==f&&a.dirty[f][e.field]&&a.updateDirty(f,e.field,!1)}function u(a){var c=a.editor,e=a.editOn,h=a.grid,g="string"!=typeof c;var k=a.editorArgs||{};"function"==typeof k&&(k=k.call(h,a));if(g){var l=new c(k);a=l.focusNode||l.domNode;a.className+=" dgrid-input";
l.connect(l,e?"onBlur":"onChange",function(){l._dgridIgnoreChange||r(h,this,{type:"widget"})})}else{var n=function(a){var b=a.target;"_dgridLastValue"in b&&-1<b.className.indexOf("dgrid-input")&&r(h,b,a)};a.grid._hasInputListener||(h._hasInputListener=!0,h.on("change",function(a){n(a)}));l=a=m(("textarea"==c?"textarea":"input[type\x3d"+c+"]")+".dgrid-input",d.mixin({name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},k));if(9>f("ie")||f("ie")&&f("quirks"))"radio"==c||"checkbox"==c?b(l,"click",
function(a){n(a)}):b(l,"change",function(a){n(a)})}return l}function y(a,c){function h(){var a=k._activeCell;q.blur();"function"===typeof k.focus&&setTimeout(function(){k.focus(a)},l&&9>f("ie")?15:0)}var g=u(a),k=a.grid,l=g.domNode,p=g.domNode||g,q=g.focusNode||p,t=l?function(){g.set("value",g._dgridLastValue)}:function(){n(g,g._dgridLastValue);r(a.grid,g)};b(q,"keydown",function(b){b=b.keyCode||b.which;27==b?(t(),k._activeValue=g._dgridLastValue,h()):13==b&&!1!==a.dismissOnEnter&&h()});(a._editorBlurHandle=
b.pausable(g,"blur",function(){var c=p.parentNode,f=c.children.length-1,h={alreadyHooked:!0},l=k.cell(p);b.emit(l.element,"dgrid-editor-hide",{grid:k,cell:l,column:a,editor:g,bubbles:!0,cancelable:!1});a._editorBlurHandle.pause();c.removeChild(p);if(l.row){for(m(l.element,"!dgrid-cell-editing");f--;)m(c.firstChild,"!");e.appendIfNode(c,a.renderCell(a.grid.row(c).data,k._activeValue,c,k._activeOptions?d.delegate(h,k._activeOptions):h))}k._focusedEditorCell=k._activeCell=k._activeValue=k._activeOptions=
null})).pause();return g}function x(a,b,c,d){var e=a.domNode;e||n(a,d);c.innerHTML="";m(c,".dgrid-cell-editing");m(c,a.domNode||a);e&&!b.editOn?b.grid._editorsPendingStartup.push([a,b,c,d]):v(a,b,c,d)}function v(a,c,d,e){var f=c.grid;a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",e),setTimeout(function(){a._dgridIgnoreChange=!1},0));a._dgridLastValue=e;f._activeCell&&(f._activeValue=e,b.emit(d,"dgrid-editor-show",{grid:f,cell:f.cell(d),column:c,editor:a,bubbles:!0,cancelable:!1}))}
function w(a){for(var b=a._editorsPendingStartup,c=b.length;c--;)v.apply(null,b[c]);a._editorsPendingStartup=[]}function A(b){function c(a){f.grid._activeCell=g;x(f.editorInstance,f,g,l);f._editTimer=setTimeout(function(){e.focus&&e.focus();f._editorBlurHandle&&f._editorBlurHandle.resume();f._editTimer=null;a.resolve(e)},0)}var d,e;b.column||(b=this.cell(b));if(!b||!b.element)return null;var f=b.column;var h=f.field;var g=b.element.contents||b.element;if(e=f.editorInstance){if(f.grid._activeCell!=
g){var k=b.row;var l=(d=this.dirty&&this.dirty[k.id])&&h in d?d[h]:f.get?f.get(k.data):k.data[h];if(!f.canEdit||f.canEdit(b.row.data,l)){var m=new a;b=e.domNode||e;b.offsetWidth?(b.blur(),setTimeout(function(){c(m)},0)):c(m);return m.promise}}}else if(f.editor&&(e=g.widget||g.input))return m=new a,e.focus&&e.focus(),m.resolve(e),m.promise;return null}return function(a,d,f){function h(a){var d=a.grid,e;if(!d.edit){d.edit=A;d._editorsPendingStartup=[];n.push(b(d.domNode,".dgrid-input:focusin",function(){d._focusedEditorCell=
d.cell(this)}));var f=d._editorFocusoutHandle=b.pausable(d.domNode,".dgrid-input:focusout",function(){d._focusedEditorCell=null});n.push(f);n.push(l.before(d,"removeRow",function(a){var b=d._focusedEditorCell;a=d.row(a);b&&b.row.id===a.id&&(e=b,f.pause(),setTimeout(function(){f.resume();e=null},0))}));n.push(l.after(d,"insertRow",function(a){var b=d.row(a);e&&e.row.id===b.id&&d.edit(d.cell(b,e.column.id));return a}));n.push(l.after(d,"renderArray",function(a){c(a,function(a){a.length?w(d):d._editorsPendingStartup=
[]});return a}));n.push(l.after(d,"_onNotification",function(){w(d)}))}}var m=a.renderCell||e.defaultRenderCell,n=[];a||(a={});a.editor=d=d||a.editor||"text";a.editOn=f=f||a.editOn;var p="string"!=typeof d;a.widgetArgs&&(k.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4"),a.editorArgs=a.widgetArgs);l.after(a,"init",f?function(){h(a);a.editorInstance=y(a,m)}:function(){var b=a.grid;h(a);p&&n.push(l.before(b,"removeRow",function(c){if(c=(c=b.cell(c,a.id).element)&&(c.contents||
c).widget)b._editorFocusoutHandle.pause(),c.destroyRecursive()}))});l.after(a,"destroy",function(){g.forEach(n,function(a){a.remove()});a._editorBlurHandle&&a._editorBlurHandle.remove();a._editTimer&&clearTimeout(a._editTimer);f&&p&&a.editorInstance.destroyRecursive();a.grid.edit=null;a.grid._editorsPendingStartup=null});a.renderCell=f?function(c,d,e,h){var g=a.grid;h&&h.alreadyHooked||b("TD"==e.tagName?e:e.parentNode,f,function(){g._activeOptions=h;g.edit(this)});return m.call(a,c,d,e,h)}:function(b,
c,d,e){if(!a.canEdit||a.canEdit(b,c))b=u(a),x(b,a,d,c),d[p?"widget":"input"]=b;else return m.call(a,b,c,d,e)};return a}})},"mw-filebrowser/grid/workarounds/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect dgrid/util/has-css3 dgrid/Grid dgrid/util/touch put-selector/put".split(" "),function(k,d,g,a,b,l,f,h,c,e){function m(a,b,c,d){d=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";b&&(f+=".ui-icon.ui-icon-triangle-1-"+(c?"se":
"e"));a=e("div"+f+"[style\x3dmargin-"+d+": "+a*(this.indentWidth||9)+"px; float: "+d+"]");a.innerHTML="";return a}function n(a){var b=this,c=this.style.height;c&&(this.style.display="0px"===c?"none":"block");a&&(e(this,".dgrid-tree-resetting"),setTimeout(function(){e(b,"!dgrid-tree-resetting")}));this.style.height=""}function q(k){var q=k.renderCell||h.defaultRenderCell,p,u;k||(k={});k.shouldExpand=k.shouldExpand||function(a,b,c){return c};l.after(k,"init",function(){var h=k.grid,q=".dgrid-content .dgrid-column-"+
k.id,r=[];h.cleanEmptyObservers=!1;if(!h.store)throw Error("dgrid tree column plugin requires a store to operate.");k.renderExpando||(k.renderExpando=m);r.push(h.on(k.expandOn||".dgrid-expando-icon:click,"+q+":dblclick,"+q+":keydown",function(a){if(a.target.classList.contains("dgrid-expando-icon")){var b=h.row(a);if(-1===a.target.className.indexOf("dgrid-cell-data")&&"id-icon-place-holder"!==a.target.id||-1!==a.target.className.indexOf("group"))h.store.mayHaveChildren&&!h.store.mayHaveChildren(b.data)||
"keydown"===a.type&&32!==a.keyCode||"dblclick"===a.type&&u&&1<u.count&&b.id===u.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||h.expand(b),-1<a.target.className.indexOf("dgrid-expando-icon")&&(u&&u.id===h.row(a).id?u.count++:u={id:h.row(a).id,count:1})}}));f("touch")&&r.push(h.on(c.selector(q,c.dbltap),function(){h.expand(this)}));h._expanded||(h._expanded={});r.push(l.after(h,"insertRow",function(a){var b=this.row(a);k.shouldExpand(b,p,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));
r.push(l.before(h,"removeRow",function(b,c){if(b=b.connected)a("\x3e.dgrid-row",b).forEach(function(a){h.removeRow(a,!0)}),c||e(b,"!")}));k.collapseOnRefresh&&r.push(l.after(h,"cleanup",function(){this._expanded={}}));h._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};h.expand=function(c,d,l){var m=c.element?c:h.row(c),q=f("transitionend");c=new g;var p=c.promise;c.resolve();c=m.element;c=-1<c.className.indexOf("dgrid-expando-icon")?c:a(".dgrid-expando-icon",
c)[0];l=l||!1===k.enableTransitions;if(c&&c.mayHaveChildren&&(l||d!==!!this._expanded[m.id])){var r=void 0===d?!this._expanded[m.id]:d;e(c,".ui-icon-triangle-1-"+(r?"se":"e")+"!ui-icon-triangle-1-"+(r?"e":"se"));d=m.element;var t=d.connected,u={originalQuery:this.query};if(!t){t=u.container=d.connected=e(d,"+div.dgrid-tree-container");var w=function(a){return h.store.getChildren(m.data,a)};k.allowDuplicates&&(u.parentId=m.id);"level"in c&&(w.level=c.level);p=p.then(function(){if(h.renderQuery)return h.renderQuery(w,
u);var a=e(t,"div"),b=h.renderArray(w(u),a,"level"in w?{queryLevel:w.level}:{});g.when(b,function(){e(a,"!")});return b});q?b(t,q,n):n.call(t)}t.hidden=!r;var v=t.style;!q||l?(v.display=r?"block":"none",v.height=""):(r?(v.display="block",v.height="0px"):(e(t,".dgrid-tree-resetting"),v.height=t.scrollHeight+"px"),setTimeout(function(){e(t,"!dgrid-tree-resetting");v.height=r?"auto":"0px"}));r?this._expanded[m.id]=!0:delete this._expanded[m.id]}return p};l.after(k,"destroy",function(){d.forEach(r,function(a){a.remove()});
delete h.expand;delete h._calcRowHeight})});k.renderCell=function(a,b,c,d){var f=k.grid,h=Number(d&&d.queryLevel)+1,g=!f.store.mayHaveChildren||f.store.mayHaveChildren(a),l=d.parentId;h=p=isNaN(h)?0:h;f=k.renderExpando(h,g,f._expanded[(l?l+"-":"")+f.store.getIdentity(a)],a);f.level=h;f.mayHaveChildren=g;(a=q.call(k,a,b,c,d))&&a.celldata.nodeType?(a.icon&&e(f,a.icon),e(f,a.celldata),e(c,f)):c.insertBefore(f,c.firstChild)};return k}q.defaultRenderExpando=m;return q})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(k,d,g,a,b,l,f){var h=k("dijit.form.ValidationTextBox",b,{templateString:f,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=h.prototype[a]&&(d.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,b){return(new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b=
"",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),f=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&f,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?l.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=g.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(n){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=a.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",
a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){l.hide(this.domNode);this.inherited(arguments)}});return h})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main ../_mw/utils/deprecation".split(" "),
function(k,d,g,a,b,l,f,h,c,e,m,n){n.deprecated({deprecated:{module:"dijit/form/TextBox"},replacement:{module:"mw-form/TextField"},geckNumber:1352405});k=k("dijit.form.TextBox",[h,c],{templateString:e,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:f("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=
this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>f("ie")&&this.defer(function(){try{var a=g.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=
b}}}catch(r){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=d.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(l(this._phspan,"mousedown",function(a){a.preventDefault()}),l(this._phspan,"touchend, pointerup, MSPointerUp",b.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},
_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){a.deprecated(this.declaredClass+
"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),f("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>f("ie")&&(k.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();
return a.parentElement()==this.textbox&&0<a.text.length},m._setSelectionRange=c._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});return k})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(k,d,g,a,b,l,f,h){var c=d("dijit.form._TextBoxMixin",
null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){if(void 0!==a){var d=this.filter(a);"string"!=typeof c&&(c=null===d||"number"==typeof d&&isNaN(d)?"":this.filter(this.format(d,this.constraints)),0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null))}null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=
c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},
onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(f(this.textbox,"keydown, keypress, paste, cut, compositionend",
l.hitch(this,function(c){if("keydown"==c.type&&229!=c.keyCode){var d=c.keyCode;switch(d){case b.SHIFT:case b.ALT:case b.CTRL:case b.META:case b.CAPS_LOCK:case b.NUM_LOCK:case b.SCROLL_LOCK:return}if(!c.ctrlKey&&!c.metaKey&&!c.altKey){switch(d){case b.NUMPAD_0:case b.NUMPAD_1:case b.NUMPAD_2:case b.NUMPAD_3:case b.NUMPAD_4:case b.NUMPAD_5:case b.NUMPAD_6:case b.NUMPAD_7:case b.NUMPAD_8:case b.NUMPAD_9:case b.NUMPAD_MULTIPLY:case b.NUMPAD_PLUS:case b.NUMPAD_ENTER:case b.NUMPAD_MINUS:case b.NUMPAD_PERIOD:case b.NUMPAD_DIVIDE:return}if(65<=
d&&90>=d||48<=d&&57>=d||d==b.SPACE)return;d=!1;for(var e in b)if(b[e]===c.keyCode){d=!0;break}if(!d)return}}(d=32<=c.charCode?String.fromCharCode(c.charCode):c.charCode)||(d=65<=c.keyCode&&90>=c.keyCode||48<=c.keyCode&&57>=c.keyCode||c.keyCode==b.SPACE?String.fromCharCode(c.keyCode):c.keyCode);d||(d=229);if("keypress"==c.type){if("string"!=typeof d)return;if("a"<=d&&"z">=d||"A"<=d&&"Z">=d||"0"<=d&&"9">=d||" "===d)if(c.ctrlKey||c.metaKey||c.altKey)return}var h={faux:!0},g;for(g in c)/^(layer[XY]|returnValue|keyLocation)$/.test(g)||
(e=c[g],"function"!=typeof e&&"undefined"!=typeof e&&(h[g]=e));l.mixin(h,{charOrCode:d,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0;c.preventDefault()},stopPropagation:function(){c.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=a("ie"))switch(c.keyCode){case b.TAB:case b.ESCAPE:case b.DOWN_ARROW:case b.UP_ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:break;default:c.keyCode==b.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&f.emit(this.textbox,"input",{bubbles:!0})})}})),f(this.textbox,"input",l.hitch(this,"_onInput")),f(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=l.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=f.once(this.domNode,"mouseup, touchend",l.hitch(this,function(a){this._isTextSelected()||
c.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});c._setSelectionRange=h._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};c.selectInputText=h.selectInputText=function(a,b,d){a=g.byId(a);isNaN(b)&&(b=0);isNaN(d)&&
(d=a.value?a.value.length:0);try{a.focus(),c._setSelectionRange(a,b,d)}catch(q){}};return c})},"dijit/_mw/utils/deprecation":function(){define(["dojo/_base/config"],function(k){var d={warn:function(a){console&&console.warn&&console.warn(a)},error:function(a){console&&console.error&&console.error(a)}},g={deprecated:function(a){if((k.isDebug||window.showDeprecationsAsErrors)&&this._isConfigValid(a)){var b=window.showDeprecationsAsErrors||a.deprecationLevel===this.ERROR?this.ERROR:this.WARN;var g="DEPRECATED: ";
a.deprecated&&(g+=a.deprecated.module,a.deprecated.method&&(g+="."+a.deprecated.method+"()"),g+=".");a.replacement&&(g+=" Use "+a.replacement.module,a.replacement.method&&(g+="."+a.replacement.method+"()"),g+=" instead.");a.removalVersion&&(g+=" Will be removed in version: "+a.removalVersion+".");a.geckNumber&&(g+=" Please use g"+a.geckNumber+" to track latest information regarding this deprecation");a.additionalInformation&&(g+=" "+a.additionalInformation);d[b](g)}},_isConfigValid:function(a){var b=
!!a.deprecated&&"object"===typeof a.deprecated&&a.deprecated.hasOwnProperty("module");a.replacement&&(b=b&&"object"===typeof a.replacement&&a.replacement.hasOwnProperty("module"));a.geckNumber&&(b=b&&"number"===typeof a.geckNumber);b||d.error("Supplied deprecationConfig properties are not valid. Please refer to http://inside.mathworks.com/wiki/Web_Widgets_Deprecation_API for right API");return b}};Object.defineProperties(g,{WARN:{value:"warn",enumerable:!0},ERROR:{value:"error",enumerable:!0}});return g})},
"mw-filebrowser/columns/helpers/FileIconUtils":function(){define(["dojo/dom-class","dojo/dom-style","dojo/i18n!../../l10n/nls/FileBrowserResources","mw-filename-utils/FileNameUtil"],function(k,d,g,a){return{getIconClass:function(a,d){return"group"===a.type?"group":a.isDirectory?d?"fileIcon motwFolder folderOpened":"fileIcon motwFolder folderClosed":""!==a.type?"fileIcon motwFileType"+a.type.split(" ").join("_").replace(/[^\w\s]/gi,""):"fileIcon motwFileTypeDefault"},getIconNodeFromRow:function(a){return a.element.querySelector(".fileIcon")},
getInfoLabel:function(b){if(a.isUserPublishedDirectoryPath(b.path))return g.publishedMySite},setSharedOverlayIcon:function(a,d){d=d.element.querySelector(".fileIcon .iconOverlay");a?k.add(d,"folderShared"):k.remove(d,"folderShared")}}})},"mw-filebrowser/columns/helpers/NameComparator":function(){define([],function(){function k(d){for(var g=[],a=0,b=-1,k=0,f,h;f=(h=d.charAt(a++)).charCodeAt(0);)f=46==f||48<=f&&57>=f,f!==k&&(g[++b]="",k=f),g[b]+=h;return g}return{caseSensitiveStringComparator:function(d,
g){d=k(d.toLocaleLowerCase());g=k(g.toLocaleLowerCase());for(var a=0;d[a]&&g[a];a++)if(d[a]!==g[a]){var b=Number(d[a]),l=Number(g[a]);return b==d[a]&&l==g[a]?b-l:d[a]>g[a]?1:-1}return d.length-g.length},separateFoldersFromFiles:function(d,g){if(d.isDirectory&&g.isDirectory)return this.caseSensitiveStringComparator(d.name,g.name);if(d.isDirectory)return-1;if(g.isDirectory)return 1}}})},"mw-filebrowser/columns/SizeColumn":function(){define("dojo/_base/declare dojo/i18n!../l10n/nls/FileBrowserResources ./helpers/FileSizeGenerator ./helpers/dataValidation ./helpers/NameComparator ./groupingactions/SizeGroupingAction".split(" "),
function(k,d,g,a,b,l){return k([],{constructor:function(f){f=f||{};this.column={id:f.id||"sizeColumn",label:d.size,renderHeaderCell:function(a){var b=document.createElement("div");b.className="columnHeaderLabel";var e=document.createTextNode(d.size);b.appendChild(e);a.appendChild(b)},field:"size",renderCell:function(b,c,d,f){c=document.createElement("span");c.className="dgrid-cell-data";a.isNumeric(b.size)&&(b=document.createTextNode(g.convert(b)),c.appendChild(b));return c},sortable:!0,sort:function(a,
c){return a.isDirectory||c.isDirectory?b.separateFoldersFromFiles(a,c):a.size===c.size?b.caseSensitiveStringComparator(a.name,c.name):a.size-c.size},hidden:!0,groupable:!0,groupingAction:new l}}})})},"mw-filebrowser/columns/helpers/FileSizeGenerator":function(){define(["dojo/i18n!../../l10n/nls/FileBrowserResources","dojo/string"],function(k,d){var g=[k.kb,k.mb,k.gb,k.tb,k.pb,k.eb,k.zb,k.yb];return{convert:function(a){if(a.isDirectory)return"";a=a.size;if(1048576>a){a=Math.ceil(a/1024);a=a.toFixed(0);
var b=g[0]}else{b=-1;do a/=1024,b++;while(1024<a);a=Math.round(100*a)/100;b=g[b]}return d.substitute(k.fileSize,[a,b])}}})},"mw-filebrowser/columns/helpers/dataValidation":function(){define([],function(){return{isNumeric:function(k){return isFinite(k)&&!isNaN(parseFloat(k))}}})},"mw-filebrowser/columns/groupingactions/SizeGroupingAction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Evented","dojo/i18n!../../l10n/nls/FileBrowserResources","mw-filename-utils/FileNameUtil"],function(k,
d,g,a,b){return k([g],{constructor:function(b){this.id="groupBySize";this.text=a.size;this.itemType="check";this.grouped=!1;this.enabled=!0;this.description="Action to group file browser column by size";this.groups=[];this.groupFileInfos=[]},getGroup:function(b){return 8192>b.size?{name:a.small,filter:function(a){return 8192>a.size}}:8192<b.size&&262144>b.size?{name:a.medium,filter:function(a){return 8192<a.size&&262144>a.size}}:{name:a.large,filter:function(a){return 262144<a.size}}},getGroupFileInfo:function(a,
d){var f={id:a.name,hasChildren:!0,isDirectory:!0,isGroupHeader:!0,group:a.name,type:"group",filter:a.filter};f.name=a.name;f.path=a.name;f.location=a.name;f.parent=b.pathFromFileInfo(d);return f},filter:function(a){var b;this.groupFileInfos.forEach(d.hitch(this,function(d){if(d.filter(a))return b=d}));return b}})})},"mw-filebrowser/columns/DateModifiedColumn":function(){define("dojo/_base/declare dojo/i18n!../l10n/nls/FileBrowserResources ./helpers/NameComparator ./helpers/dataValidation ./helpers/DateComparator ./groupingactions/DateModifiedGroupingAction ./helpers/DateUtils".split(" "),
function(k,d,g,a,b,l,f){return k([],{constructor:function(h){h=h||{};this.column={id:h.id||"dateModifiedColumn",label:d.dateModified,renderHeaderCell:function(a){var b=document.createElement("div");b.className="columnHeaderLabel";var c=document.createTextNode(d.dateModified);b.appendChild(c);a.appendChild(b)},field:"modifiedUtc",sortable:!0,renderCell:function(b,d,h,g){d=document.createElement("span");d.className="dgrid-cell-data";a.isNumeric(b.modifiedUtc)&&(b=document.createTextNode(f.formatDate(b.modifiedUtc)),
d.appendChild(b));return d},sort:function(a,d){var c=new Date(a.modifiedUtc),e=new Date(d.modifiedUtc);return a.isDirectory||d.isDirectory?b.separateFoldersFromFiles(a,d):c===e?g.caseSensitiveStringComparator(a.name,d.name):b.compareDate(c,e)},hidden:!0,groupable:!0,groupingAction:new l}}})})},"mw-filebrowser/columns/helpers/DateComparator":function(){define([],function(){return{compareDate:function(k,d){return k<d?-1:k>d?1:0},separateFoldersFromFiles:function(k,d){var g=new Date(k.modifiedUtc),a=
new Date(d.modifiedUtc);if(k.isDirectory&&d.isDirectory)return this.compareDate(g,a);if(k.isDirectory)return-1;if(d.isDirectory)return 1}}})},"mw-filebrowser/columns/groupingactions/DateModifiedGroupingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/date dojo/i18n!../../l10n/nls/FileBrowserResources mw-filename-utils/FileNameUtil".split(" "),function(k,d,g,a,b,l){return k([g],{constructor:function(a){this.id="groupByDateModified";this.text=b.dateModified;this.itemType=
"check";this.grouped=!1;this.enabled=!0;this.description="Action to group file browser column by Date Modified";this.groups=[];this.groupFileInfos=[]},getGroup:function(a){return this._today(a)?{name:"Today",filter:d.hitch(this,function(a){return this._today(a)})}:this._inWeek(a)?(a=this._getDay(a),a!==b.sunday?{name:a,filter:d.hitch(this,function(a){return this._inWeek(a)})}:{name:"Last Week",filter:d.hitch(this,function(a){return this._lastWeek(a)})}):this._lastWeek(a)?{name:"Last Week",filter:d.hitch(this,
function(a){return this._lastWeek(a)})}:this._twoWeeksAgo(a)?{name:"Two Weeks Ago",filter:d.hitch(this,function(a){return this._twoWeeksAgo(a)})}:this._threeWeeksAgo(a)?{name:"Three Weeks Ago",filter:d.hitch(this,function(a){return this._threeWeeksAgo(a)})}:{name:"Older",filter:d.hitch(this,function(a){return!this._today(a)&&!this._inWeek(a)&&!this._lastWeek(a)&&!this._twoWeeksAgo(a)&&!this._threeWeeksAgo(a)})}},getGroupFileInfo:function(a,b){var c={id:a.name,hasChildren:!0,isDirectory:!0,isGroupHeader:!0,
group:a.name,type:"group",filter:a.filter};c.name=a.name;c.path=a.name;c.location=a.name;c.parent=l.pathFromFileInfo(b);return c},filter:function(a){var b,c;for(c in this.groupFileInfos)if(this.groupFileInfos[c].filter(a)&&this._inWeek(a)&&(b=this._getDayInWeek(a)),b)break;return b},_getDayInWeek:function(a){var b;a=this._getDay(a);for(var c in this.groupFileInfos)if(this.groupFileInfos[c].name===a&&(b=this.groupFileInfos[c]),b)break;return b},_today:function(b){return 0===Math.abs(a.difference(new Date,
new Date(b.modifiedUtc)))},_inWeek:function(b){b=new Date(b.modifiedUtc);var d=Math.abs(a.difference(new Date,b));return 0<d&&7>d&&b.getDay()<(new Date).getDay()},_lastWeek:function(b){var d=Math.abs(a.difference(new Date,new Date(b.modifiedUtc)));return!this._inWeek(b)&&7>=d},_twoWeeksAgo:function(b){b=Math.abs(a.difference(new Date,new Date(b.modifiedUtc)));return 7<b&&14>=b},_threeWeeksAgo:function(b){b=Math.abs(a.difference(new Date,new Date(b.modifiedUtc)));return 14<b&&21>=b},_getDay:function(a){switch((new Date(a.modifiedUtc)).getDay()){case 1:return b.monday;
case 2:return b.tuesday;case 3:return b.wednesday;case 4:return b.thursday;case 5:return b.friday;case 6:return b.saturday;default:return b.sunday}}})})},"dojo/date":function(){define(["./has","./_base/lang"],function(k,d){var g={getDaysInMonth:function(a){var b=a.getMonth();return 1==b&&g.isLeapYear(a)?29:[31,28,31,30,31,30,31,31,30,31,30,31][b]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var b=a.toString(),d="",f=b.indexOf("(");if(-1<
f)d=b.substring(++f,b.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,b=b.match(f))d=b[1];else if(b=a.toLocaleString(),f=/ ([A-Z\/]+)$/,b=b.match(f))d=b[1];return"AM"==d||"PM"==d?"":d},compare:function(a,b,d){a=new Date(+a);b=new Date(+(b||new Date));"date"==d?(a.setHours(0,0,0,0),b.setHours(0,0,0,0)):"time"==d&&(a.setFullYear(0,0,0),b.setFullYear(0,0,0));return a>b?1:a<b?-1:0},add:function(a,b,d){var f=new Date(+a),h=!1,c="Date";switch(b){case "day":break;case "weekday":if(b=d%5)var e=parseInt(d/5);
else b=0<d?5:-5,e=0<d?(d-5)/5:(d+5)/5;var g=a.getDay(),k=0;6==g&&0<d?k=1:0==g&&0>d&&(k=-1);g+=b;if(0==g||6==g)k=0<d?2:-2;d=7*e+b+k;break;case "year":c="FullYear";h=!0;break;case "week":d*=7;break;case "quarter":d*=3;case "month":h=!0;c="Month";break;default:c="UTC"+b.charAt(0).toUpperCase()+b.substring(1)+"s"}if(c)f["set"+c](f["get"+c]()+d);h&&f.getDate()<a.getDate()&&f.setDate(0);return f},difference:function(a,b,d){b=b||new Date;d=d||"day";var f=b.getFullYear()-a.getFullYear(),h=1;switch(d){case "quarter":a=
a.getMonth();b=b.getMonth();h=Math.floor(b/3)+1+4*f-(Math.floor(a/3)+1);break;case "weekday":f=Math.round(g.difference(a,b,"day"));d=parseInt(g.difference(a,b,"week"));if(0==f%7)f=5*d;else{h=0;var c=a.getDay(),e=b.getDay();d=parseInt(f/7);b=f%7;a=new Date(a);a.setDate(a.getDate()+7*d);a=a.getDay();if(0<f)switch(!0){case 6==c:h=-1;break;case 0==c:h=0;break;case 6==e:h=-1;break;case 0==e:h=-2;break;case 5<a+b:h=-2}else if(0>f)switch(!0){case 6==c:h=0;break;case 0==c:h=1;break;case 6==e:h=2;break;case 0==
e:h=1;break;case 0>a+b:h=2}f=f+h-2*d}h=f;break;case "year":h=f;break;case "month":h=b.getMonth()-a.getMonth()+12*f;break;case "week":h=parseInt(g.difference(a,b,"day")/7);break;case "day":h/=24;case "hour":h/=60;case "minute":h/=60;case "second":h/=1E3;case "millisecond":h*=b.getTime()-a.getTime()}return Math.round(h)}};d.mixin(d.getObject("dojo.date",!0),g);return g})},"mw-filebrowser/columns/helpers/DateUtils":function(){define([],function(){return{formatDate:function(k){k=new Date(k);return k.toLocaleDateString()+
" "+k.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})}}})},"mw-filebrowser/columns/TypeColumn":function(){define(["dojo/_base/declare","dojo/i18n!../l10n/nls/FileBrowserResources","dojo/string","./helpers/NameComparator","./groupingactions/TypeGroupingAction"],function(k,d,g,a,b){function l(a){var b=-1!==a.name.lastIndexOf(".")?a.name.lastIndexOf(".")+1:a.name.length;return a.name.substring(b,a.name.length)}return k([],{constructor:function(f){f=f||{};this.column={id:f.id||
"typeColumn",label:d.type,renderHeaderCell:function(a){var b=document.createElement("div");b.className="columnHeaderLabel";var e=document.createTextNode(d.type);b.appendChild(e);a.appendChild(b)},field:"type",sortable:!0,renderCell:function(a,b,e,f){b=document.createElement("span");b.className="dgrid-cell-data";a.isGroupHeader||(a=document.createTextNode(a.isDirectory?d.defaultFolderType:a.type?a.type:g.substitute(d.defaultFileType,[l(a).toUpperCase()])),b.appendChild(a));return b},sort:function(b,
c){return b.isDirectory||c.isDirectory?a.separateFoldersFromFiles(b,c):b.type===c.type?a.caseSensitiveStringComparator(b.name,c.name):a.caseSensitiveStringComparator(b.type,c.type)},hidden:!0,groupable:!0,groupingAction:new b}}})})},"mw-filebrowser/columns/groupingactions/TypeGroupingAction":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/string dojo/i18n!../../l10n/nls/FileBrowserResources mw-filename-utils/FileNameUtil".split(" "),function(k,d,g,a,b,l){return k([g],{constructor:function(a){this.id=
"groupByType";this.text=b.type;this.itemType="check";this.grouped=!1;this.enabled=!0;this.description="Action to group file browser column by type";this.groups=[];this.groupFileInfos=[]},getGroup:function(a){if(a.isDirectory)return{name:b.defaultFolderType,filter:function(a){return a.isDirectory}};var d=l.getFileNameExtension(a.name);return""!==d?{name:a.type,ext:d,filter:function(a,b,d){return!a.isDirectory&&!a.hasChildren&&b===d}}:{name:b.fileGroup,ext:"",filter:function(a,b,d){return!a.isDirectory&&
!a.hasChildren&&""===d}}},getGroupFileInfo:function(a,b){var c={id:a.name,hasChildren:!0,isDirectory:!0,isGroupHeader:!0,group:a.name,type:"group",filter:a.filter,ext:a.ext};c.name=a.name;c.path=a.name;c.location=a.name;c.parent=l.pathFromFileInfo(b);return c},filter:function(a){for(var b=0;b<this.groupFileInfos.length;++b)if(this.groupFileInfos[b].group===this.getGroup(a).name)return a=this.groupFileInfos[b]}})})},"filechooser-ui/FileChooserActionManager":function(){define(["dojo/_base/declare",
"dojo/Evented","dojo/Deferred"],function(k,d,g){return k([d],{constructor:function(){this._actionsReq=new g},getActions:function(){return this._actionsReq.promise}})})},"url:mw-form/templates/PushButton.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"button"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"contentWrapperNode" class\x3d"mwContentWrapperNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"iconAndTextContainerNode" class\x3d"mwIconAndTextContainerNode mwAlignmentNode"\n            \x3e\x3cdiv data-dojo-attach-point\x3d"iconNode" class\x3d"mwIconNode"\x3e\x3c/div\n            \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n        \x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"url:mw-filebrowser/filebrowser.html":'\x3cdiv id\x3d${id} class\x3d"fileBrowser2" data-dojo-attach-point\x3d"fileBrowserContainer"\x3e\n\x3cdiv data-dojo-attach-point\x3d"dgridContainer"\n     class\x3d"dgridContainer highlightRowOnPath"\x3e\x3c/div\x3e\n\x3cform id\x3d"uploadForm" data-dojo-attach-point\x3d"uploadForm"\n      enctype\x3d"multipart/form-data"\x3e\n    \x3cinput id\x3d"fileupload" class\x3d"hiddenFileInputForUpload"\n           data-dojo-attach-point\x3d"hiddenFileInputForUpload"\n           data-test-id\x3d"hiddenFileInputForUpload" name\x3d"uploadFileName"\n           type\x3d"file" multiple/\x3e\n\x3c/form\x3e\n\x3c/div\x3e',
"url:mw-form/templates/Menu.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" tabindex\x3d"0" role\x3d"menu" data-focus\x3d"temporary"\x3e\x3c/div\x3e\n',"url:mw-keybindings/browserconflicts.json":'{\n    "Ctrl+N" : {\n        "keys" : ["CTRL","N"],\n        "platform" : {\n            "Windows" : ["Chrome(v43.0)", "Firefox(v40.0)", "IE(v10.10)" ]\n        }\n    },\n\n    "Ctrl+T":  {\n        "keys" : ["CTRL","T"],\n        "platform" : {\n            "Windows" : ["Chrome(v43.0)", "Firefox(v40.0)", "IE(v10.10)" ],\n            "Linux" : ["Chrome(v43.0)", "Firefox(v40.0)" ]\n        }\n    },\n\n    "F11" :    {\n        "keys" : ["F11"],\n        "platform" : {\n            "Mac" : ["Chrome(v43.0)", "Safari(v7.0"]\n        }\n    },\n\n    "F5" :  {\n        "keys" : ["F5"],\n        "platform" : {\n            "Windows" : ["IE(v10.10)" ]\n        }\n\n    }\n}',
"url:mw-form/templates/CheckBox.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"checkbox" aria-checked\x3d"false"\n    \x3e\x3cdiv data-dojo-attach-point\x3d"checkBoxRadioIconNode" class\x3d"mwCheckBoxRadioIconNode"\n        \x3e\x3cdiv class\x3d"mwCheckBoxRadioIconInner"\x3e\x3c/div\x3e\x3c/div\n    \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d"mwTextNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',"url:mw-form/templates/CheckBoxRadioButtonMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" aria-checked\x3d"false"\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwOverlayNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:mw-form/templates/MenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem"\n        \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n\x3e\x3c/div\x3e',
"url:mw-form/templates/MenuSeparator.html":'\x3cdiv data-refuse-key-nav\x3d"true"\x3e\x3c/div\x3e\n',"url:mw-form/templates/PopupMenuItem.html":'\x3cdiv data-dojo-attach-point\x3d"focusNode" class\x3d"mwFocusNode" role\x3d"menuitem" aria-haspopup\x3d"true" aria-expanded\x3d"false"\n    \x3e\x3cdiv class\x3d"mwIconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwTextAndDescriptionContainerNode" data-dojo-attach-point\x3d"textAndDescriptionContainerNode"\n        \x3e\x3cdiv data-dojo-attach-point\x3d"textNode" class\x3d\'mwTextNode\'\x3e\x3c/div\n        \x3e\x3cdiv data-dojo-attach-point\x3d"descriptionNode" class\x3d\'mwDescriptionNode\'\x3e\x3c/div\n    \x3e\x3c/div\n    \x3e\x3cdiv class\x3d"mwShortcutAndArrowWrapperNode"\n        \x3e\x3cdiv class\x3d"mwShortcutKeyNode" data-dojo-attach-point\x3d"shortcutKeyNode"\x3e\x3c/div\n        \x3e\x3cdiv class\x3d"mwMenuArrowNode"  data-dojo-attach-point\x3d"menuArrowNode"\x3e\x3c/div\n    \x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:filechooser-ui/fileChooserTemplate.html":'\x3cdiv class\x3d"fileChooser2"\x3e\n    \x3cdiv class \x3d "fileBrowser" tabindex\x3d"-1" data-dojo-attach-point\x3d"fileBrowserNode"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"bottom" data-dojo-attach-point\x3d"bottom"\x3e\n        \x3cdiv class\x3d"fileNameWithLabel" data-dojo-attach-point\x3d"fileNameWithLabelNode"\x3e\n            \x3cdiv class\x3d"fileNameLabel fileChooserLabels" data-dojo-attach-point\x3d"fileNameLabelNode"\x3e${localization.saveAsFileNameLabel}\x3c/div\x3e\n            \x3cdiv class\x3d"fileName fileChooserFields" data-dojo-attach-point\x3d"fileNameNode"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"fileTypeWithLabel" data-dojo-attach-point\x3d"fileTypeWithLabelNode"\x3e\n            \x3cdiv class\x3d"inputLabel fileChooserLabels" data-dojo-attach-point\x3d"fileTypeLabelNode"\x3e${localization.saveAsFileDropDownLabel}\x3c/div\x3e\n            \x3cdiv class\x3d"fileType fileChooserFields" data-dojo-attach-point\x3d"fileTypeNode"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"buttons" data-dojo-attach-point\x3d"buttons"\x3e\n            \x3cdiv class\x3d"okButton fileChooserButtons" data-dojo-attach-point\x3d"okButtonNode"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d"cancelButton fileChooserButtons" data-dojo-attach-point\x3d"cancelButtonNode"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"*now":function(k){k(['dojo/i18n!*preload*browse_for_folder_button/nls/browse_for_folder_button*["ja-jp","ko-kr","zh-cn","en-us","ROOT"]'])}}});define("browse_for_folder_button/browse_for_folder_button",[],1);